/*

 Video.js 7.5.0 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 @name m3u8-parser @version 4.3.0 @license Apache-2.0 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(m){var q=0;return function(){return q<m.length?{done:!1,value:m[q++]}:{done:!0}}};$jscomp.arrayIterator=function(m){return{next:$jscomp.arrayIteratorImpl(m)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(m,q,v){m!=Array.prototype&&m!=Object.prototype&&(m[q]=v.value)};$jscomp.getGlobal=function(m){return"undefined"!=typeof window&&window===m?m:"undefined"!=typeof global&&null!=global?global:m};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var m=0;return function(q){return $jscomp.SYMBOL_PREFIX+(q||"")+m++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var m=$jscomp.global.Symbol.iterator;m||(m=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[m]&&$jscomp.defineProperty(Array.prototype,m,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var m=$jscomp.global.Symbol.asyncIterator;m||(m=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(m){$jscomp.initSymbolIterator();m={next:m};m[$jscomp.global.Symbol.iterator]=function(){return this};return m};$(".video-transcriptLabel").focus(function(){$(this).css("outline","none")});
$(".video-transcriptLabel").keyup(function(m){9==m.keyCode&&$(this).css("outline","")});
$(document).ready(function(){setTimeout(function(){$(".videoplayerv2.video-asset").each(function(){var m=$(this).find(".video-collection-duration"),q=$(this).find(".video-js.single-player");m.prependTo(q);m=q.attr("data-video-image");q.css("background-image","url('"+m+"')");q.css("background-repeat","no-repeat");q.css("background-size","cover");$(this).hasClass("colors-light-grey")&&$(this).parent().addClass("colors-light-grey-parent")});$(".btn-asset-share").attr("tabindex","0");$('.video-js[data-video-url*\x3d"mp3"]').each(function(){$(this).find(".vjs-poster").css("display",
"inline-block")})},500);$(".btn-asset-share").click(function(){$(this).siblings(".vtn-share-asset").is(":visible")?($(this).siblings(".vtn-share-asset").css("display","none"),$(this).removeClass("transform")):($(this).siblings(".vtn-share-asset").css("display","block"),$(this).addClass("transform"))});$(".btn-asset-share").keyup(function(m){13==m.keyCode&&($(this).siblings(".vtn-share-asset").is(":visible")?($(this).siblings(".vtn-share-asset").css("display","none"),$(this).removeClass("transform")):
($(this).siblings(".vtn-share-asset").css("display","block"),$(this).addClass("transform")))});$(".videoplayer-v2 .video-js").each(function(){""===$(this).attr("data-video-url")&&$(this).parent().hide()});$(".videoplayerv2.single-video").keyup(function(m){13==m.which&&$(m.target).is(".videoplayerv2",".single-video")&&controlPlayPause(this)});$(".videoplayer .asset-sharing-component.video-asset").keyup(function(m){13==m.which&&$(m.target).is(".asset-sharing-component",".video-asset")&&controlPlayPause(this)})});
var controlPlayPause=function(m){var q=$(m).find(".vjs-tech");0!=$(m).find(".vjs-has-started").length?$(m).find(".vjs-play-control").click():(q.click(),$(m).find(".vjs-poster").click())};$(window).load(function(){$(".videoplayerv2.single-video .vjs-big-play-button").attr("tabindex",-1);$(".video-js.single-player.pwcvideoplayer .vjs-big-play-button").attr("tabindex",-1)});
function videoJsInstanceInit(m,q,v){var y="#"+m;m=$(y);y=videojs(y,{controls:!0,fluid:!0,userActions:{hotkeys:!0},controlBar:{volumePanel:{inline:!1,vertical:!0},children:"playToggle volumeMenuButton currentTimeDisplay progressControl durationDisplay qualitySelector fullscreenToggle".split(" ")}});y.poster(q.poster);y.src({type:"youtube"===q.videoType.toLowerCase()?"video/youtube":"video/mp4",src:q.srcUrl,label:q.title,title:q.title});initPlayerEvents(y,v);initCaptionToggle(y,m,q.captionSrc);return y=
y.ready(function(){this.hotkeys({alwaysCaptureHotkeys:!0,enableVolumeScroll:!1})})}
function initCaptionToggle(m,q,v){"undefined"!==typeof m.remoteTextTracks()[0]&&m.removeRemoteTextTrack(m.remoteTextTracks()[0]);$(q).attr("data-captions-enabled",!1);if(0<v.length){m.addRemoteTextTrack({src:v,kind:"captions",language:"eng"},!0);$(q).attr("data-captions-enabled",!0);v=m.remoteTextTracks();for(var y=0;y<v.length;y++)v[y].mode="hidden"}$(q).find("button").off("click touchstart");$(q).find(".vjs-quality-selector \x3e button").on("click touchstart",function(q){q.preventDefault();q=m.remoteTextTracks();
if(1>q.tracks_.length)return!1;if($(this).hasClass("caption-active")){$(this).removeClass("caption-active");var v="hidden"}else $(this).addClass("caption-active"),v="showing";for(var y=0;y<q.length;y++){var M=q[y];"captions"===M.kind&&"eng"===M.language&&(M.mode=v)}})}
function initPlayerEvents(m,q){var v=!0,y=!0,O=!0,z=!1;if(""!==q){q=q.split("/");var S=q[q.length-1]}m.off("firstplay");m.off("timeupdate");m.off("ended");m.off("touchstart");m.on("touchstart",function(q){"VIDEO"===q.target.nodeName&&(m.paused()?this.play():this.pause())});m.on("timeupdate",function(m,q){m=this.currentTime();q=this.duration();$($(this)[0].el_).attr("data-video-duration",this.duration());$($(this)[0].el_).attr("data-video-currenttime",this.currentTime());$($(this)[0].el_).find(".vjs-control-bar .vjs-current-time-display").text(getCurrentTime(m));
m=m/q*100;25<=m.toFixed()&&1==v&&z?(createObject("video.name",""!==S?S:this.cache_.source.label),createObject("video.event","video-25-complete"),createObject("video.time",this.currentTime()),v=!1):50<=m.toFixed()&&1==y&&z?(createObject("video.name",""!==S?S:this.cache_.source.label),createObject("video.event","video-50-complete"),createObject("video.time",this.currentTime()),y=!1):75<=m.toFixed()&&1==O&&z&&(createObject("video.name",""!==S?S:this.cache_.source.label),createObject("video.event","video-75-complete"),
createObject("video.time",this.currentTime()),O=!1)});m.on("ended",function(m,q){$($(this)[0].el_).find(".vjs-play-control").removeClass("vjs-playing").addClass("vjs-paused").attr("title","Play");createObject("video.name",""!==S?S:this.cache_.source.label);createObject("video.event","complete");createObject("video.time",this.currentTime())});m.on("firstplay",function(q,B){m.currentTime(0);z=!0;0<$($(this)[0].el_).siblings(".videowrappercontent").length&&$($(this)[0].el_).siblings(".videowrappercontent").remove();
createObject("video.name",""!==S?S:this.cache_.source.label);createObject("video.event","start");createObject("video.time",this.currentTime())})}
function initializeSingleVideo(m){var q={title:$(m).attr("data-video-title"),srcUrl:$(m).attr("data-video-url"),videoType:0<$(m).attr("data-video-type").length?$(m).attr("data-video-type").toLowerCase():"",poster:$(m).attr("data-video-image"),captionSrc:$(m).attr("data-caption-src"),autoPlay:$(m).attr("data-video-autoplay"),playerId:$(".video-js.single-player").attr("id"),singleModalId:$(m).parent().attr("id"),currPlayerId:$(m).parent().attr("id")};videoJsInstanceInit($(m).attr("id"),q)}
$(".video-asset .videowrapperplay").on("click",function(){var m="#"+$(this).parents(".videowrappercontent").siblings(".video-js").attr("id");$(this).parents(".videowrappercontent").remove();videojs(m).play()});
!function(m,q){"object"==typeof exports&&"undefined"!=typeof module?module.exports=q(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],q):(m=m||self).videojs=q(m.window,m.document)}(this,function(m,q){function v(n,k){n.prototype=Object.create(k.prototype);(n.prototype.constructor=n).__proto__=k}function y(n,k){return(y=Object.setPrototypeOf||function(g,f){return g.__proto__=f,g})(n,k)}function O(n,k,g){return(O=function(){if("undefined"==
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}()?Reflect.construct:function(f,c,b){var a=[null];a.push.apply(a,c);f=new (Function.bind.apply(f,a));return b&&y(f,b.prototype),f}).apply(null,arguments)}function z(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function S(n,k){return k||
(k=n.slice(0)),n.raw=k,n}function M(n,k){Me(n).forEach(function(g){return k(n[g],g)})}function B(n){for(var k=arguments.length,g=Array(1<k?k-1:0),f=1;f<k;f++)g[f-1]=arguments[f];return Object.assign?Object.assign.apply(Object,[n].concat(g)):(g.forEach(function(c){c&&M(c,function(b,c){n[c]=b})}),n)}function Y(n){return!!n&&"object"==typeof n}function Wa(n){return Y(n)&&"[object Object]"===di.call(n)&&n.constructor===Object}function bb(n,k){return n&&k&&"function"==typeof m.getComputedStyle?(n=m.getComputedStyle(n))?
n[k]:"":""}function cb(){var n=S(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);return cb=function(){return n},n}function Fb(n){if(/\s/.test(n))throw Error("class has illegal whitespace characters");}function Ga(){return q===m.document}function Pa(n){return Y(n)&&1===n.nodeType}function nc(){try{return m.parent!==m.self}catch(n){return!0}}
function oc(n){return function(k,g){if("string"!=typeof k||!/\S/.test(k))return q[n](null);"string"==typeof g&&/\S/.test(g)&&(g=q.querySelector(g));g=Pa(g)?g:q;return g[n]&&g[n](k)}}function J(n,k,g,f){void 0===n&&(n="div");void 0===k&&(k={});void 0===g&&(g={});var c=q.createElement(n);return Object.getOwnPropertyNames(k).forEach(function(b){var a=k[b];-1!==b.indexOf("aria-")||"role"===b||"type"===b?(K.warn(Yc(cb(),b,a)),c.setAttribute(b,a)):"textContent"===b?Ha(c,a):c[b]=a}),Object.getOwnPropertyNames(g).forEach(function(b){c.setAttribute(b,
g[b])}),f&&Zc(c,f),c}function Ha(n,k){return"undefined"==typeof n.textContent?n.innerText=k:n.textContent=k,n}function pb(n,k){k.firstChild?k.insertBefore(n,k.firstChild):k.appendChild(n)}function Ia(n,k){return Fb(k),n.classList?n.classList.contains(k):(g=k,new RegExp("(^|\\s)"+g+"($|\\s)")).test(n.className);var g}function Z(n,k){return n.classList?n.classList.add(k):Ia(n,k)||(n.className=(n.className+" "+k).trim()),n}function F(n,k){return n.classList?n.classList.remove(k):(Fb(k),n.className=n.className.split(/\s+/).filter(function(g){return g!==
k}).join(" ")),n}function pc(n,k,g){var f=Ia(n,k);if("function"==typeof g&&(g=g(n,k)),"boolean"!=typeof g&&(g=!f),g!==f)return g?Z(n,k):F(n,k),n}function qc(n,k){Object.getOwnPropertyNames(k).forEach(function(g){var f=k[g];null===f||"undefined"==typeof f||!1===f?n.removeAttribute(g):n.setAttribute(g,!0===f?"":f)})}function ba(n){var k={};if(n&&n.attributes&&0<n.attributes.length)for(var g=n.attributes,f=g.length-1;0<=f;f--){var c=g[f].name,b=g[f].value;"boolean"!=typeof n[c]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+
c+",")||(b=null!==b);k[c]=b}return k}function Gb(){q.body.focus();q.onselectstart=function(){return!1}}function Hb(){q.onselectstart=function(){return!0}}function ca(n){if(n&&n.getBoundingClientRect&&n.parentNode){var k=n.getBoundingClientRect(),g={};return"bottom height left right top width".split(" ").forEach(function(f){void 0!==k[f]&&(g[f]=k[f])}),g.height||(g.height=parseFloat(bb(n,"height"))),g.width||(g.width=parseFloat(bb(n,"width"))),g}}function Ne(n){var k;if(n.getBoundingClientRect&&n.parentNode&&
(k=n.getBoundingClientRect()),!k)return{left:0,top:0};n=q.documentElement;var g=q.body;return{left:Math.round(k.left+(m.pageXOffset||g.scrollLeft)-(n.clientLeft||g.clientLeft||0)),top:Math.round(k.top+(m.pageYOffset||g.scrollTop)-(n.clientTop||g.clientTop||0))}}function $c(n,k){var g={},f=Ne(n),c=n.offsetWidth;n=n.offsetHeight;var b=f.top;f=f.left;var a=k.pageY,e=k.pageX;return k.changedTouches&&(e=k.changedTouches[0].pageX,a=k.changedTouches[0].pageY),g.y=Math.max(0,Math.min(1,(b-a+n)/n)),g.x=Math.max(0,
Math.min(1,(e-f)/c)),g}function Oe(n){return Y(n)&&3===n.nodeType}function ad(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function Pe(n){return"function"==typeof n&&(n=n()),(Array.isArray(n)?n:[n]).map(function(k){return"function"==typeof k&&(k=k()),Pa(k)||Oe(k)?k:"string"==typeof k&&/\S/.test(k)?q.createTextNode(k):void 0}).filter(function(k){return k})}function Zc(n,k){return Pe(k).forEach(function(g){return n.appendChild(g)}),n}function Qe(n,k){return Zc(ad(n),k)}function qb(n){return void 0===
n.button&&void 0===n.buttons||0===n.button&&void 0===n.buttons||0===n.button&&1===n.buttons}function Ib(n){var k=n[hb];return k||(k=n[hb]=ib++),Jb[k]||(Jb[k]={}),Jb[k]}function Re(n){n=n[hb];return!!n&&!!Object.getOwnPropertyNames(Jb[n]).length}function Se(n){var k=n[hb];if(k){delete Jb[k];try{delete n[hb]}catch(g){n.removeAttribute?n.removeAttribute(hb):n[hb]=null}}}function Te(n,k){var g=Ib(n);0===g.handlers[k].length&&(delete g.handlers[k],n.removeEventListener?n.removeEventListener(k,g.dispatcher,
!1):n.detachEvent&&n.detachEvent("on"+k,g.dispatcher));0>=Object.getOwnPropertyNames(g.handlers).length&&(delete g.handlers,delete g.dispatcher,delete g.disabled);0===Object.getOwnPropertyNames(g).length&&Se(n)}function bd(n,k,g,f){g.forEach(function(c){n(k,c,f)})}function rc(n){function k(){return!0}function g(){return!1}if(!n||!n.isPropagationStopped){var f=n||m.event;for(c in n={},f)"layerX"!==c&&"layerY"!==c&&"keyLocation"!==c&&"webkitMovementX"!==c&&"webkitMovementY"!==c&&("returnValue"===c&&
f.preventDefault||(n[c]=f[c]));if(n.target||(n.target=n.srcElement||q),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){f.preventDefault&&f.preventDefault();n.returnValue=!1;f.returnValue=!1;n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){f.stopPropagation&&f.stopPropagation();n.cancelBubble=!0;f.cancelBubble=!0;n.isPropagationStopped=k},n.isPropagationStopped=g,n.stopImmediatePropagation=function(){f.stopImmediatePropagation&&
f.stopImmediatePropagation();n.isImmediatePropagationStopped=k;n.stopPropagation()},n.isImmediatePropagationStopped=g,null!==n.clientX&&void 0!==n.clientX){var c=q.documentElement;var b=q.body;n.pageX=n.clientX+(c&&c.scrollLeft||b&&b.scrollLeft||0)-(c&&c.clientLeft||b&&b.clientLeft||0);n.pageY=n.clientY+(c&&c.scrollTop||b&&b.scrollTop||0)-(c&&c.clientTop||b&&b.clientTop||0)}n.which=n.charCode||n.keyCode;null!==n.button&&void 0!==n.button&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n}
function Ja(n,k,g){if(Array.isArray(k))return bd(Ja,n,k,g);var f=Ib(n);if(f.handlers||(f.handlers={}),f.handlers[k]||(f.handlers[k]=[]),g.guid||(g.guid=ib++),f.handlers[k].push(g),f.dispatcher||(f.disabled=!1,f.dispatcher=function(c,b){if(!f.disabled){c=rc(c);var a=f.handlers[c.type];if(a){a=a.slice(0);for(var e=0,d=a.length;e<d&&!c.isImmediatePropagationStopped();e++)try{a[e].call(n,c,b)}catch(h){K.error(h)}}}}),1===f.handlers[k].length)n.addEventListener?(g=!1,Ue&&-1<ei.indexOf(k)&&(g={passive:!0}),
n.addEventListener(k,f.dispatcher,g)):n.attachEvent&&n.attachEvent("on"+k,f.dispatcher)}function ma(n,k,g){if(Re(n)){var f=Ib(n);if(f.handlers){if(Array.isArray(k))return bd(ma,n,k,g);if(void 0!==k){var c=f.handlers[k];if(c){if(g){if(g.guid)for(f=0;f<c.length;f++)c[f].guid===g.guid&&c.splice(f--,1)}else f.handlers[k]=[];Te(n,k)}}else for(c in f.handlers)Object.prototype.hasOwnProperty.call(f.handlers||{},c)&&(k=n,g=c,f.handlers[g]=[],Te(k,g))}}}function rb(n,k,g){var f=Re(n)?Ib(n):{},c=n.parentNode||
n.ownerDocument;("string"==typeof k?k={type:k,target:n}:k.target||(k.target=n),k=rc(k),f.dispatcher&&f.dispatcher.call(n,k,g),c&&!k.isPropagationStopped()&&!0===k.bubbles)?rb.call(null,c,k,g):c||k.defaultPrevented||(n=Ib(k.target),k.target[k.type]&&(n.disabled=!0,"function"==typeof k.target[k.type]&&k.target[k.type](),n.disabled=!1));return!k.defaultPrevented}function Kb(n,k,g){if(Array.isArray(k))return bd(Kb,n,k,g);var f=function b(){ma(n,k,b);g.apply(this,arguments)};f.guid=g.guid=g.guid||ib++;
Ja(n,k,f)}function cd(n,k){k&&(dd=k);m.setTimeout(fi,n)}function ed(n,k){void 0===k&&(k={});if(k=k.eventBusKey){if(!n[k].nodeName)throw Error('The eventBusKey "'+k+'" does not refer to an element.');n.eventBusEl_=n[k]}else n.eventBusEl_=J("span",{className:"vjs-event-bus"});return B(n,gi),n.eventedCallbacks&&n.eventedCallbacks.forEach(function(g){g()}),n.on("dispose",function(){n.off();m.setTimeout(function(){n.eventBusEl_=null},0)}),n}function Ve(n,k){return B(n,hi),n.state=B({},n.state,k),"function"==
typeof n.handleStateChanged&&jb(n)&&n.on("statechanged",n.handleStateChanged),n}function U(n){return"string"!=typeof n?n:n.charAt(0).toUpperCase()+n.slice(1)}function Q(){for(var n={},k=arguments.length,g=Array(k),f=0;f<k;f++)g[f]=arguments[f];return g.forEach(function(c){c&&M(c,function(b,c){Wa(b)?(Wa(n[c])||(n[c]={}),n[c]=Q(n[c],b)):n[c]=b})}),n}function We(n,k,g,f){var c=g.length-1;if("number"!=typeof f||0>f||c<f)throw Error("Failed to execute '"+n+"' on 'TimeRanges': The index provided ("+f+") is non-numeric or out of bounds (0-"+
c+").");return g[f][k]}function fd(n){return void 0===n||0===n.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:n.length,start:We.bind(null,"start",0,n),end:We.bind(null,"end",1,n)}}function kb(n,k){return Array.isArray(n)?fd(n):void 0===n||void 0===k?fd():fd([[n,k]])}function Xe(n,k){var g,f=0;if(!k)return 0;n&&n.length||(n=kb(0,0));for(var c=0;c<n.length;c++){var b=n.start(c);k<(g=n.end(c))&&
(g=k);f+=g-b}return f/k}function na(n){if(n instanceof na)return n;"number"==typeof n?this.code=n:"string"==typeof n?this.message=n:Y(n)&&("number"==typeof n.code&&(this.code=n.code),B(this,n));this.message||(this.message=na.defaultMessages[this.code]||"")}function Lb(n){null!=n&&"function"==typeof n.then&&n.then(null,function(k){})}function sc(n,k){return n(k={exports:{}},k.exports),k.exports}function Ye(n,k,g){var f=n,c=ii.call(k);return"[object Function]"===c||"function"==typeof k&&"[object RegExp]"!==
c||"undefined"!=typeof window&&(k===window.setTimeout||k===window.alert||k===window.confirm||k===window.prompt)?(g=k,"string"==typeof n&&(f={uri:n})):f=ji(k,{uri:n}),f.callback=g,f}function Qa(n,k,g){return Ze(Ye(n,k,g))}function Ze(n){function k(b){clearTimeout(e);b instanceof Error||(b=Error(""+(b||"Unknown XMLHttpRequest Error")));b.statusCode=0;var c=u;f||(f=!0,n.callback(b,c,void 0))}function g(){if(!b){clearTimeout(e);var c=n.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var g=
u,l=null;if(0!==c){a.response?g=a.response:(g=a.responseText)||("document"===a.responseType?g=a.responseXML:(g=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName,g=""!==a.responseType||g?null:a.responseXML));if(w)try{g=JSON.parse(g)}catch(ja){}g={body:g,statusCode:c,method:h,headers:{},url:d,rawRequest:a};a.getAllResponseHeaders&&(g.headers=ki(a.getAllResponseHeaders()))}else l=Error("Internal XMLHttpRequest Error");c=g.body;f||(f=!0,n.callback(l,g,c))}}if("undefined"==typeof n.callback)throw Error("callback argument missing");
var f=!1,c,b,a=n.xhr||null;a||(a=n.cors||n.useXDR?new Qa.XDomainRequest:new Qa.XMLHttpRequest);var e,d=a.url=n.uri||n.url,h=a.method=n.method||"GET",l=n.body||n.data,p=a.headers=n.headers||{},r=!!n.sync,w=!1,u={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:a};if("json"in n&&!1!==n.json&&(w=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),l=JSON.stringify(!0===n.json?l:n.json))),
a.onreadystatechange=function(){4===a.readyState&&setTimeout(g,0)},a.onload=g,a.onerror=k,a.onprogress=function(){},a.onabort=function(){b=!0},a.ontimeout=k,a.open(h,d,!r,n.username,n.password),r||(a.withCredentials=!!n.withCredentials),!r&&0<n.timeout&&(e=setTimeout(function(){if(!b){b=!0;a.abort("timeout");var c=Error("XMLHttpRequest timeout");c.code="ETIMEDOUT";k(c)}},n.timeout)),a.setRequestHeader)for(c in p)p.hasOwnProperty(c)&&a.setRequestHeader(c,p[c]);else if(n.headers&&!function(b){for(var c in b)if(b.hasOwnProperty(c))return!1;
return!0}(n.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(a.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(a),a.send(l||null),a}function oa(n,k){this.name="ParsingError";this.code=n.code;this.message=k||n.message}function gd(n){function k(g,f,c,b){return 3600*(0|g)+60*(0|f)+(0|c)+(0|b)/1E3}return(n=n.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/))?n[3]?k(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?k(n[1],
n[2],0,n[4]):k(0,n[1],n[2],n[4]):null}function Mb(){this.values=hd(null)}function Nb(n,k,g,f){n=f?n.split(f):[n];for(var c in n)"string"==typeof n[c]&&(f=n[c].split(g),2===f.length&&k(f[0],f[1]))}function li(n,k,g){function f(){var c=gd(n);if(null===c)throw new oa(oa.Errors.BadTimeStamp,"Malformed timestamp: "+b);return n=n.replace(/^[^\sa-zA-Z-]+/,""),c}function c(){n=n.replace(/^\s+/,"")}var b=n;if(c(),k.startTime=f(),c(),"--\x3e"!==n.substr(0,3))throw new oa(oa.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+
b);n=n.substr(3);c();k.endTime=f();c();var a=n;var e=new Mb;Nb(a,function(b,c){switch(b){case "region":for(var a=g.length-1;0<=a;a--)if(g[a].id===c){e.set(b,g[a].region);break}break;case "vertical":e.alt(b,c,["rl","lr"]);break;case "line":c=c.split(",");a=c[0];e.integer(b,a);e.percent(b,a)&&e.set("snapToLines",!1);e.alt(b,a,["auto"]);2===c.length&&e.alt("lineAlign",c[1],["start","middle","end"]);break;case "position":c=c.split(",");e.percent(b,c[0]);2===c.length&&e.alt("positionAlign",c[1],["start",
"middle","end"]);break;case "size":e.percent(b,c);break;case "align":e.alt(b,c,["start","middle","end","left","right"])}},/:/,/\s/);k.region=e.get("region",null);k.vertical=e.get("vertical","");k.line=e.get("line","auto");k.lineAlign=e.get("lineAlign","start");k.snapToLines=e.get("snapToLines",!0);k.size=e.get("size",100);k.align=e.get("align","middle");k.position=e.get("position",{start:0,left:0,middle:50,end:100,right:100},k.align);k.positionAlign=e.get("positionAlign",{start:"start",left:"start",
middle:"middle",end:"end",right:"end"},k.align)}function $e(n,k){function g(){if(!k)return null;var b,c=k.match(/^([^<]*)(<[^>]*>?)?/);return b=c[1]?c[1]:c[2],k=k.substr(b.length),b}function f(b){return mi[b]}function c(b){for(;u=b.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)b=b.replace(u[0],f);return b}function b(b,c){var a=ni[b];if(!a)return null;var d=n.document.createElement(a);d.localName=a;b=oi[b];return b&&c&&(d[b]=c.trim()),d}for(var a,e,d,h=n.document.createElement("div"),l=h,p=[];null!==(a=g());)if("\x3c"!==
a[0])l.appendChild(n.document.createTextNode(c(a)));else if("/"===a[1])p.length&&p[p.length-1]===a.substr(2).replace("\x3e","")&&(p.pop(),l=l.parentNode);else{var r=gd(a.substr(1,a.length-2));if(r){var w=n.document.createProcessingInstruction("timestamp",r);l.appendChild(w)}else{var u=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);u&&(w=b(u[1],u[3]))&&(e=l,!af[(d=w).localName]||af[d.localName]===e.localName)&&(u[2]&&(w.className=u[2].substr(1).replace("."," ")),p.push(u[1]),l.appendChild(w),
l=w)}}return h}function pi(n){for(var k=0;k<bf.length;k++){var g=bf[k];if(n>=g[0]&&n<=g[1])return!0}return!1}function id(){}function jd(n,k,g){this.cue=k;this.cueDiv=$e(n,k.text);var f={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===k.vertical?"horizontal-tb":"lr"===k.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(f,this.cueDiv);this.div=n.document.createElement("div");
f={direction:function(c){function b(b,c){for(var a=c.childNodes.length-1;0<=a;a--)b.push(c.childNodes[a])}function a(c){if(!c||!c.length)return null;var d=c.pop(),e=d.textContent||d.innerText;return e?(d=e.match(/^.*(\n|\r)/))?d[c.length=0]:e:"ruby"===d.tagName?a(c):d.childNodes?(b(c,d),a(c)):void 0}var e=[],d="";if(!c||!c.childNodes)return"ltr";for(b(e,c);d=a(e);)for(c=0;c<d.length;c++)if(pi(d.charCodeAt(c)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===k.vertical?"horizontal-tb":"lr"===
k.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===k.align?"center":k.align,font:g.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(f);this.div.appendChild(this.cueDiv);n=0;switch(k.positionAlign){case "start":n=k.position;break;case "middle":n=k.position-k.size/2;break;case "end":n=k.position-k.size}""===k.vertical?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(k.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(k.size,
"%")});this.move=function(c){this.applyStyles({top:this.formatStyle(c.top,"px"),bottom:this.formatStyle(c.bottom,"px"),left:this.formatStyle(c.left,"px"),right:this.formatStyle(c.right,"px"),height:this.formatStyle(c.height,"px"),width:this.formatStyle(c.width,"px")})}}function pa(n){if(n.div){var k=n.div.offsetHeight;var g=n.div.offsetWidth;var f=n.div.offsetTop;var c=(c=n.div.childNodes)&&(c=c[0])&&c.getClientRects&&c.getClientRects();n=n.div.getBoundingClientRect();var b=c?Math.max(c[0]&&c[0].height||
0,n.height/c.length):0}this.left=n.left;this.right=n.right;this.top=n.top||f;this.height=n.height||k;this.bottom=n.bottom||f+(n.height||k);this.width=n.width||g;this.lineHeight=void 0!==b?b:n.lineHeight}function qi(n,k,g,f){var c=new pa(k);n=k.cue;var b=function(b){if("number"==typeof b.line&&(b.snapToLines||0<=b.line&&100>=b.line))return b.line;if(!b.track||!b.track.textTrackList||!b.track.textTrackList.mediaElement)return-1;b=b.track;for(var c=b.textTrackList,a=0,d=0;d<c.length&&c[d]!==b;d++)"showing"===
c[d].mode&&a++;return-1*++a}(n),a=[];if(n.snapToLines){switch(n.vertical){case "":a=["+y","-y"];var e="height";break;case "rl":a=["+x","-x"];e="width";break;case "lr":a=["-x","+x"],e="width"}var d=c.lineHeight,h=d*Math.round(b);e=g[e]+d;var l=a[0];Math.abs(h)>e&&(h=0>h?-1:1,h*=Math.ceil(e/d)*d);0>b&&(h+=""===n.vertical?g.height:g.width,a=a.reverse());c.move(l,h)}else{c=c.lineHeight/g.height*100;switch(n.lineAlign){case "middle":b-=c/2;break;case "end":b-=c}switch(n.vertical){case "":k.applyStyles({top:k.formatStyle(b,
"%")});break;case "rl":k.applyStyles({left:k.formatStyle(b,"%")});break;case "lr":k.applyStyles({right:k.formatStyle(b,"%")})}a=["+y","-x","+x","-y"];c=new pa(k)}n=function(b,c){for(var a,d=new pa(b),e=1,h=0;h<c.length;h++){for(;b.overlapsOppositeAxis(g,c[h])||b.within(g)&&b.overlapsAny(f);)b.move(c[h]);if(b.within(g))return b;var l=b.intersectPercentage(g);l<e&&(a=new pa(b),e=l);b=new pa(d)}return a||d}(c,a);k.move(n.toCSSCompatValues(g))}function Ob(){}function kd(n){return"string"==typeof n&&!!ri[n.toLowerCase()]&&
n.toLowerCase()}function cf(n,k,g){this.hasBeenReset=!1;var f="",c=!1,b=n,a=k,e=g,d=null,h="",l=!0,p="auto",r="start",w=50,u="middle",m=50,C="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return f},set:function(b){f=""+b}},pauseOnExit:{enumerable:!0,get:function(){return c},set:function(b){c=!!b}},startTime:{enumerable:!0,get:function(){return b},set:function(c){if("number"!=typeof c)throw new TypeError("Start time must be set to a number.");b=c;this.hasBeenReset=!0}},endTime:{enumerable:!0,
get:function(){return a},set:function(b){if("number"!=typeof b)throw new TypeError("End time must be set to a number.");a=b;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return e},set:function(b){e=""+b;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(b){d=b;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(b){b="string"==typeof b&&!!si[b.toLowerCase()]&&b.toLowerCase();if(!1===b)throw new SyntaxError("An invalid or illegal string was specified.");
h=b;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return l},set:function(b){l=!!b;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(b){if("number"!=typeof b&&"auto"!==b)throw new SyntaxError("An invalid number or illegal string was specified.");p=b;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return r},set:function(b){b=kd(b);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");r=b;this.hasBeenReset=!0}},position:{enumerable:!0,
get:function(){return w},set:function(b){if(0>b||100<b)throw Error("Position must be between 0 and 100.");w=b;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return u},set:function(b){b=kd(b);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");u=b;this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(b){if(0>b||100<b)throw Error("Size must be between 0 and 100.");m=b;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return C},
set:function(b){b=kd(b);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");C=b;this.hasBeenReset=!0}}});this.displayState=void 0}function Pb(n){return"number"==typeof n&&0<=n&&100>=n}function ti(n,k,g){n.setTimeout(function(){return function l(c,b,a,e,d,h){void 0===c&&(c={});void 0===b&&(b=[]);void 0===d&&(d=[]);void 0===h&&(h=!1);var g=b[0],k=b.slice(1);if("string"==typeof g)l(c,lb[g],a,e,d,h);else if(g){var w=ui(e,g);if(!w.setSource)return d.push(w),l(c,k,a,e,d,h);w.setSource(B({},
c),function(b,g){if(b)return l(c,k,a,e,d,h);d.push(w);l(g,c.type===g.type?k:lb[g.type],a,e,d,h)})}else k.length?l(c,k,a,e,d,h):h?a(c,d):l(c,lb["*"],a,e,d,!0)}(k,lb[k.type],g,n)},1)}function df(n,k,g,f){void 0===f&&(f=null);var c="call"+U(g);c=n.reduce(ld(c),f);k=(f=c===tc)?null:k[g](c);for(c=n.length-1;0<=c;c--){var b=n[c];b[g]&&b[g](f,k)}return k}function ld(n){return function(k,g){return k===tc?tc:g[n]?g[n](k):k}}function ui(n,k){var g=md[n.id()],f=null;if(null==g)return f=k(n),md[n.id()]=[[k,f]],
f;for(var c=0;c<g.length;c++){var b=g[c],a=b[1];b[0]===k&&(f=a)}return null===f&&(f=k(n),g.push([k,f])),f}function ef(n){var k=uc(n.src);return!n.type&&k&&(n.type=k),n}function nd(n,k){if(4===n.length)n=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else{if(7!==n.length)throw Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");n=n.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+k+")"}function tb(n,k){return void 0===
k&&(k=n),od(n,k)}function ff(n,k){if(k&&(n=k(n)),n&&"none"!==n)return n}function gf(){var n=S(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return gf=function(){return n},n}function hf(){var n=S(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);return hf=function(){return n},
n}function t(n,k,g){var f=t.getPlayer(n);if(f)return k&&K.warn('Player "'+n+'" is already initialised. Options will not be applied.'),g&&f.ready(g),f;var c="string"==typeof n?Xa("#"+jf(n)):n;if(!Pa(c))throw new TypeError("The element or ID supplied is not valid. (videojs)");q.body.contains(c)||K.warn("The element supplied is not included in the DOM");k=k||{};t.hooks("beforesetup").forEach(function(b){b=b(c,Q(k));Y(b)&&!Array.isArray(b)?k=Q(k,b):K.error("please return an object in beforesetup hooks")});
return f=new (x.getComponent("Player"))(c,k,g),t.hooks("setup").forEach(function(b){return b(f)}),f}function kf(){return(kf=Object.assign||function(n){for(var k=1;k<arguments.length;k++){var g=arguments[k],f;for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(n[f]=g[f])}return n}).apply(this,arguments)}function pd(n,k){n.prototype=Object.create(k.prototype);(n.prototype.constructor=n).__proto__=k}function lf(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return n}function mf(n,k){return function(g){var f=this;if(!k)return new ub(n);if(ub&&!g)return g=nf(k.toString().replace(/^function.+?{/,"").slice(0,-1)),this[qd]=new ub(g),function(b,c){if(b&&c){var a=b.terminate;b.objURL=c;b.terminate=function(){b.objURL&&vb.revokeObjectURL(b.objURL);a.call(b)}}}(this[qd],g),this[qd];var c={postMessage:function(b){f.onmessage&&setTimeout(function(){f.onmessage({data:b,target:c})})}};k.call(c);this.postMessage=function(b){setTimeout(function(){c.onmessage({data:b,
target:f})})};this.isThisThread=!0}}function nf(n){try{return vb.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch(g){var k=new vi;return k.append(n),vb.createObjectURL(k.getBlob(type))}}function Qb(){}m=m&&m.hasOwnProperty("default")?m.default:m;q=q&&q.hasOwnProperty("default")?q.default:q;var ka=[],wi=function(n,k){return function(g,f,c){f=k.levels[f];var b=new RegExp("^("+f+")$");if("log"!==g&&c.unshift(g.toUpperCase()+":"),c.unshift(n+":"),ka&&ka.push([].concat(c)),m.console){var a=
m.console[g];a||"debug"!==g||(a=m.console.info||m.console.log);a&&f&&b.test(g)&&a[Array.isArray(c)?"apply":"call"](m.console,c)}}},K=function g(k){var f,c="info",b=function(){for(var b=arguments.length,e=Array(b),d=0;d<b;d++)e[d]=arguments[d];f("log",c,e)};return f=wi(k,b),b.createLogger=function(b){return g(k+": "+b)},b.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:c},b.level=function(a){if("string"==typeof a){if(!b.levels.hasOwnProperty(a))throw Error('"'+
a+'" in not a valid log level');c=a}return c},(b.history=function(){return ka?[].concat(ka):[]}).filter=function(b){return(ka||[]).filter(function(c){return(new RegExp(".*"+b+".*")).test(c[0])})},b.history.clear=function(){ka&&(ka.length=0)},b.history.disable=function(){null!==ka&&(ka.length=0,ka=null)},b.history.enable=function(){null===ka&&(ka=[])},b.error=function(){for(var b=arguments.length,e=Array(b),d=0;d<b;d++)e[d]=arguments[d];return f("error",c,e)},b.warn=function(){for(var b=arguments.length,
e=Array(b),d=0;d<b;d++)e[d]=arguments[d];return f("warn",c,e)},b.debug=function(){for(var b=arguments.length,e=Array(b),d=0;d<b;d++)e[d]=arguments[d];return f("debug",c,e)},b}("VIDEOJS"),of=K.createLogger,Yc=function(k){for(var g="",f=0;f<arguments.length;f++)g+=k[f].replace(/\n\r?\s*/g,"")+(arguments[f+1]||"");return g},di=Object.prototype.toString,Me=function(k){return Y(k)?Object.keys(k):[]},Xa=oc("querySelector"),pf=oc("querySelectorAll"),qf=Object.freeze({isReal:Ga,isEl:Pa,isInFrame:nc,createEl:J,
textContent:Ha,prependTo:pb,hasClass:Ia,addClass:Z,removeClass:F,toggleClass:pc,setAttributes:qc,getAttributes:ba,getAttribute:function(k,g){return k.getAttribute(g)},setAttribute:function(k,g,f){k.setAttribute(g,f)},removeAttribute:function(k,g){k.removeAttribute(g)},blockTextSelection:Gb,unblockTextSelection:Hb,getBoundingClientRect:ca,findPosition:Ne,getPointerPosition:$c,isTextNode:Oe,emptyEl:ad,normalizeContent:Pe,appendContent:Zc,insertContent:Qe,isSingleLeftClick:qb,$:Xa,$$:pf}),ib=1,Jb={},
hb="vdata"+(new Date).getTime(),Ue=!1;!function(){try{var k=Object.defineProperty({},"passive",{get:function(){Ue=!0}});m.addEventListener("test",null,k);m.removeEventListener("test",null,k)}catch(g){}}();var ei=["touchstart","touchmove"],dd,xi=Object.freeze({fixEvent:rc,on:Ja,off:ma,trigger:rb,one:Kb}),rd=!1,fi=function(){if(Ga()&&!1!==dd.options.autoSetup){var k=Array.prototype.slice.call(q.getElementsByTagName("video")),g=Array.prototype.slice.call(q.getElementsByTagName("audio")),f=Array.prototype.slice.call(q.getElementsByTagName("video-js"));
if((k=k.concat(g,f))&&0<k.length)for(g=0,f=k.length;g<f;g++){var c=k[g];if(!c||!c.getAttribute){cd(1);break}void 0===c.player&&null!==c.getAttribute("data-setup")&&dd(c)}else rd||cd(1)}};Ga()&&"complete"===q.readyState?rd=!0:Kb(m,"load",function(){rd=!0});var Rb,rf=function(k){var g=q.createElement("style");return g.className=k,g},sf=function(k,g){k.styleSheet?k.styleSheet.cssText=g:k.textContent=g},G=function(k,g,f){g.guid||(g.guid=ib++);var c=function(){return g.apply(k,arguments)};return c.guid=
f?f+"_"+g.guid:g.guid,c},wb=function(k,g){var f=Date.now();return function(){var c=Date.now();g<=c-f&&(k.apply(void 0,arguments),f=c)}},sa=function(){};sa.prototype.allowedEvents_={};sa.prototype.addEventListener=sa.prototype.on=function(k,g){var f=this.addEventListener;this.addEventListener=function(){};Ja(this,k,g);this.addEventListener=f};sa.prototype.removeEventListener=sa.prototype.off=function(k,g){ma(this,k,g)};sa.prototype.one=function(k,g){var f=this.addEventListener;this.addEventListener=
function(){};Kb(this,k,g);this.addEventListener=f};sa.prototype.dispatchEvent=sa.prototype.trigger=function(k){var g=k.type||k;"string"==typeof k&&(k={type:g});k=rc(k);this.allowedEvents_[g]&&this["on"+g]&&this["on"+g](k);rb(this,k)};sa.prototype.queueTrigger=function(k){var g=this;Rb||(Rb=new Map);var f=k.type||k,c=Rb.get(this);c||(c=new Map,Rb.set(this,c));var b=c.get(f);c.delete(f);m.clearTimeout(b);b=m.setTimeout(function(){0===c.size&&(c=null,Rb.delete(g));g.trigger(k)},0);c.set(f,b)};var jb=
function(k){return k instanceof sa||!!k.eventBusEl_&&["on","one","off","trigger"].every(function(g){return"function"==typeof k[g]})},tf=function(k){return"string"==typeof k&&/\S/.test(k)||Array.isArray(k)&&!!k.length},sd=function(k){if(!k.nodeName&&!jb(k))throw Error("Invalid target; must be a DOM node or evented object.");},uf=function(k){if(!tf(k))throw Error("Invalid event type; must be a non-empty string or array.");},vf=function(k){if("function"!=typeof k)throw Error("Invalid listener; must be a function.");
},wf=function(k,g){var f,c,b,a=3>g.length||g[0]===k||g[0]===k.eventBusEl_;return b=a?(f=k.eventBusEl_,3<=g.length&&g.shift(),c=g[0],g[1]):(f=g[0],c=g[1],g[2]),sd(f),uf(c),vf(b),{isTargetingSelf:a,target:f,type:c,listener:G(k,b)}},Sb=function(k,g,f,c){sd(k);k.nodeName?xi[g](k,f,c):k[g](f,c)},gi={on:function(){for(var k=this,g=arguments.length,f=Array(g),c=0;c<g;c++)f[c]=arguments[c];g=wf(this,f);f=g.isTargetingSelf;var b=g.target,a=g.type,e=g.listener;if(Sb(b,"on",a,e),!f){var d=function(){return k.off(b,
a,e)};d.guid=e.guid;g=function(){return k.off("dispose",d)};g.guid=e.guid;Sb(this,"on","dispose",d);Sb(b,"on","dispose",g)}},one:function(){for(var k=this,g=arguments.length,f=Array(g),c=0;c<g;c++)f[c]=arguments[c];g=wf(this,f);var b=g.target,a=g.type,e=g.listener;g.isTargetingSelf?Sb(b,"one",a,e):(g=function h(){k.off(b,a,h);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];e.apply(null,f)},g.guid=e.guid,Sb(b,"one",a,g))},off:function(k,g,f){!k||tf(k)?ma(this.eventBusEl_,k,g):(sd(k),
uf(g),vf(f),f=G(this,f),this.off("dispose",f),k.nodeName?(ma(k,g,f),ma(k,"dispose",f)):jb(k)&&(k.off(g,f),k.off("dispose",f)))},trigger:function(k,g){return rb(this.eventBusEl_,k,g)}},hi={state:{},setState:function(k){var g,f=this;return"function"==typeof k&&(k=k()),M(k,function(c,b){f.state[b]!==c&&((g=g||{})[b]={from:f.state[b],to:c});f.state[b]=c}),g&&jb(this)&&this.trigger({changes:g,type:"statechanged"}),g}},x=function(){function k(f,c,b){(!f&&this.play?this.player_=f=this:this.player_=f,this.parentComponent_=
null,this.options_=Q({},this.options_),c=this.options_=Q(this.options_,c),this.id_=c.id||c.el&&c.el.id,this.id_)||(this.id_=(f&&f.id&&f.id()||"no_player")+"_component_"+ib++);this.name_=c.name||null;c.el?this.el_=c.el:!1!==c.createEl&&(this.el_=this.createEl());!1!==c.evented&&ed(this,{eventBusKey:this.el_?"el_":null});Ve(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};!(this.childNameIndex_={})!==c.initChildren&&this.initChildren();this.ready(b);!1!==c.reportTouchActivity&&
this.enableTouchActivity()}var g=k.prototype;return g.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var f=this.children_.length-1;0<=f;f--)this.children_[f].dispose&&this.children_[f].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Se(this.el_),this.el_=null);this.player_=null},g.player=function(){return this.player_},g.options=function(f){return K.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),
f&&(this.options_=Q(this.options_,f)),this.options_},g.el=function(){return this.el_},g.createEl=function(f,c,b){return J(f,c,b)},g.localize=function(f,c,b){void 0===b&&(b=f);var a=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),d=e&&e[a];a=a&&a.split("-")[0];e=e&&e[a];return d&&d[f]?b=d[f]:e&&e[f]&&(b=e[f]),c&&(b=b.replace(/\{(\d+)\}/g,function(b,a){var d=a=c[a-1];return"undefined"==typeof a&&(d=b),d})),b},g.contentEl=function(){return this.contentEl_||
this.el_},g.id=function(){return this.id_},g.name=function(){return this.name_},g.children=function(){return this.children_},g.getChildById=function(f){return this.childIndex_[f]},g.getChild=function(f){if(f)return f=U(f),this.childNameIndex_[f]},g.addChild=function(f,c,b){if(void 0===c&&(c={}),void 0===b&&(b=this.children_.length),"string"==typeof f){var a=U(f);f=c.componentClass||a;c.name=a;var e=k.getComponent(f);if(!e)throw Error("Component "+f+" does not exist");if("function"!=typeof e)return null;
c=new e(this.player_||this,c)}else c=f;if(c.parentComponent_&&c.parentComponent_.removeChild(c),this.children_.splice(b,0,c),c.parentComponent_=this,"function"==typeof c.id&&(this.childIndex_[c.id()]=c),(a=a||c.name&&U(c.name()))&&(this.childNameIndex_[a]=c),"function"==typeof c.el&&c.el())b=this.contentEl().children[b]||null,this.contentEl().insertBefore(c.el(),b);return c},g.removeChild=function(f){if("string"==typeof f&&(f=this.getChild(f)),f&&this.children_){for(var c=!1,b=this.children_.length-
1;0<=b;b--)if(this.children_[b]===f){c=!0;this.children_.splice(b,1);break}c&&(f.parentComponent_=null,this.childIndex_[f.id()]=null,this.childNameIndex_[f.name()]=null,(c=f.el())&&c.parentNode===this.contentEl()&&this.contentEl().removeChild(f.el()))}},g.initChildren=function(){var f=this,c=this.options_.children;if(c){var b,a=this.options_,e=k.getComponent("Tech");(b=Array.isArray(c)?c:Object.keys(c)).concat(Object.keys(this.options_).filter(function(c){return!b.some(function(b){return"string"==
typeof b?c===b:c===b.name})})).map(function(b){var a,d;return d="string"==typeof b?c[a=b]||f.options_[a]||{}:(a=b.name,b),{name:a,opts:d}}).filter(function(b){return(b=k.getComponent(b.opts.componentClass||U(b.name)))&&!e.isTech(b)}).forEach(function(b){var c=b.name;b=b.opts;if(void 0!==a[c]&&(b=a[c]),!1!==b)!0===b&&(b={}),b.playerOptions=f.options_.playerOptions,(b=f.addChild(c,b))&&(f[c]=b)})}},g.buildCSSClass=function(){return""},g.ready=function(f,c){if(void 0===c&&(c=!1),f)return this.isReady_?
void(c?f.call(this):this.setTimeout(f,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(f))},g.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var f=this.readyQueue_;this.readyQueue_=[];f&&0<f.length&&f.forEach(function(c){c.call(this)},this);this.trigger("ready")},1)},g.$=function(f,c){return Xa(f,c||this.contentEl())},g.$$=function(f,c){return pf(f,c||this.contentEl())},g.hasClass=function(f){return Ia(this.el_,f)},g.addClass=function(f){Z(this.el_,f)},g.removeClass=
function(f){F(this.el_,f)},g.toggleClass=function(f,c){pc(this.el_,f,c)},g.show=function(){this.removeClass("vjs-hidden")},g.hide=function(){this.addClass("vjs-hidden")},g.lockShowing=function(){this.addClass("vjs-lock-showing")},g.unlockShowing=function(){this.removeClass("vjs-lock-showing")},g.getAttribute=function(f){return this.el_.getAttribute(f)},g.setAttribute=function(f,c){this.el_.setAttribute(f,c)},g.removeAttribute=function(f){this.el_.removeAttribute(f)},g.width=function(f,c){return this.dimension("width",
f,c)},g.height=function(f,c){return this.dimension("height",f,c)},g.dimensions=function(f,c){this.width(f,!0);this.height(c)},g.dimension=function(f,c,b){if(void 0!==c)return null!==c&&c==c||(c=0),-1!==(""+c).indexOf("%")||-1!==(""+c).indexOf("px")?this.el_.style[f]=c:this.el_.style[f]="auto"===c?"":c+"px",void(b||this.trigger("componentresize"));if(!this.el_)return 0;c=this.el_.style[f];b=c.indexOf("px");return-1!==b?parseInt(c.slice(0,b),10):parseInt(this.el_["offset"+U(f)],10)},g.currentDimension=
function(f){var c=0;if("width"!==f&&"height"!==f)throw Error("currentDimension only accepts width or height value");"function"==typeof m.getComputedStyle&&(c=m.getComputedStyle(this.el_),c=c.getPropertyValue(f)||c[f]);0===(c=parseFloat(c))&&(f="offset"+U(f),c=this.el_[f]);return c},g.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},g.currentWidth=function(){return this.currentDimension("width")},g.currentHeight=function(){return this.currentDimension("height")},
g.focus=function(){this.el_.focus()},g.blur=function(){this.el_.blur()},g.handleKeyPress=function(f){this.player_&&this.player_.handleKeyPress(f)},g.emitTapEvents=function(){var f,c=0,b=null;this.on("touchstart",function(a){1===a.touches.length&&(b={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY},c=(new Date).getTime(),f=!0)});this.on("touchmove",function(c){if(1<c.touches.length)f=!1;else if(b){var a=c.touches[0].pageX-b.pageX;c=c.touches[0].pageY-b.pageY;10<Math.sqrt(a*a+c*c)&&(f=!1)}});var a=
function(){f=!1};this.on("touchleave",a);this.on("touchcancel",a);this.on("touchend",function(a){!(b=null)===f&&200>(new Date).getTime()-c&&(a.preventDefault(),this.trigger("tap"))})},g.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var f,c=G(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){c();this.clearInterval(f);f=this.setInterval(c,250)});var b=function(b){c();this.clearInterval(f)};this.on("touchmove",c);this.on("touchend",b);
this.on("touchcancel",b)}},g.setTimeout=function(f,c){var b,a,e=this;return f=G(this,f),b=m.setTimeout(function(){e.off("dispose",a);f()},c),(a=function(){return e.clearTimeout(b)}).guid="vjs-timeout-"+b,this.on("dispose",a),b},g.clearTimeout=function(f){m.clearTimeout(f);var c=function(){};return c.guid="vjs-timeout-"+f,this.off("dispose",c),f},g.setInterval=function(f,c){var b=this;f=G(this,f);var a=m.setInterval(f,c);f=function(){return b.clearInterval(a)};return f.guid="vjs-interval-"+a,this.on("dispose",
f),a},g.clearInterval=function(f){m.clearInterval(f);var c=function(){};return c.guid="vjs-interval-"+f,this.off("dispose",c),f},g.requestAnimationFrame=function(f){var c,b,a=this;return this.supportsRaf_?(f=G(this,f),c=m.requestAnimationFrame(function(){a.off("dispose",b);f()}),(b=function(){return a.cancelAnimationFrame(c)}).guid="vjs-raf-"+c,this.on("dispose",b),c):this.setTimeout(f,1E3/60)},g.cancelAnimationFrame=function(f){if(this.supportsRaf_){m.cancelAnimationFrame(f);var c=function(){};return c.guid=
"vjs-raf-"+f,this.off("dispose",c),f}return this.clearTimeout(f)},k.registerComponent=function(f,c){if("string"!=typeof f||!f)throw Error('Illegal component name, "'+f+'"; must be a non-empty string.');var b,a=k.getComponent("Tech");a=a&&a.isTech(c);var e=k===c||k.prototype.isPrototypeOf(c.prototype);if(a||!e)throw b=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",Error('Illegal component, "'+f+'"; '+b+".");f=U(f);k.components_||(k.components_={});b=k.getComponent("Player");
if("Player"===f&&b&&b.players){var d=b.players;b=Object.keys(d);if(d&&0<b.length&&b.map(function(b){return d[b]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}return k.components_[f]=c},k.getComponent=function(f){if(f)return f=U(f),k.components_&&k.components_[f]?k.components_[f]:void 0},k}();x.prototype.supportsRaf_="function"==typeof m.requestAnimationFrame&&"function"==typeof m.cancelAnimationFrame;x.registerComponent("Component",x);var td,ud,
vd,wd,da=m.navigator&&m.navigator.userAgent||"",xf=/AppleWebKit\/([\d.]+)/i.exec(da),yi=xf?parseFloat(xf.pop()):null,xd=/iPad/i.test(da),yd=/iPhone/i.test(da)&&!xd,yf=/iPod/i.test(da),Ya=yd||xd||yf,zi=(td=da.match(/OS (\d+)_/i))&&td[1]?td[1]:null,mb=/Android/i.test(da),zd=function(){var k=da.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!k)return null;var g=k[1]&&parseFloat(k[1]),f=k[2]&&parseFloat(k[2]);return g&&f?parseFloat(k[1]+"."+k[2]):g||null}(),zf=mb&&5>zd&&537>yi,Af=/Firefox/i.test(da),
Ad=/Edge/i.test(da),ab=!Ad&&(/Chrome/i.test(da)||/CriOS/i.test(da)),Bf=(ud=da.match(/(Chrome|CriOS)\/(\d+)/))&&ud[2]?parseFloat(ud[2]):null,Cf=(vd=/MSIE\s(\d+)\.\d/.exec(da),!(wd=vd&&parseFloat(vd[1]))&&/Trident\/7.0/i.test(da)&&/rv:11.0/.test(da)&&(wd=11),wd),Df=/Safari/i.test(da)&&!ab&&!mb&&!Ad,Ef=(Df||Ya)&&!ab,Tb=Ga()&&("ontouchstart"in m||m.navigator.maxTouchPoints||m.DocumentTouch&&m.document instanceof m.DocumentTouch),Ai=Object.freeze({IS_IPAD:xd,IS_IPHONE:yd,IS_IPOD:yf,IS_IOS:Ya,IOS_VERSION:zi,
IS_ANDROID:mb,ANDROID_VERSION:zd,IS_NATIVE_ANDROID:zf,IS_FIREFOX:Af,IS_EDGE:Ad,IS_CHROME:ab,CHROME_VERSION:Bf,IE_VERSION:Cf,IS_SAFARI:Df,IS_ANY_SAFARI:Ef,TOUCH_ENABLED:Tb}),ya={},vc=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],Ff=vc[0],Gf=!1,wc=0;for(;wc<vc.length;wc++)if(vc[wc][1]in q){var xc=vc[wc];break}if(xc){for(var yc=0;yc<xc.length;yc++)ya[Ff[yc]]=xc[yc];Gf=xc[0]===Ff[0]}na.prototype.code=0;na.prototype.message="";na.prototype.status=null;na.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
na.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var xb=0;xb<na.errorTypes.length;xb++)na[na.errorTypes[xb]]=
xb,na.prototype[na.errorTypes[xb]]=xb;var Hf=function(k){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(g,f,c){return k[f]&&(g[f]=k[f]),g},{cues:k.cues&&Array.prototype.map.call(k.cues,function(g){return{startTime:g.startTime,endTime:g.endTime,text:g.text,id:g.id}})})},Bi=function(k){var g=k.$$("track"),f=Array.prototype.map.call(g,function(c){return c.track});return Array.prototype.map.call(g,function(c){var b=Hf(c.track);return c.src&&(b.src=c.src),
b}).concat(Array.prototype.filter.call(k.textTracks(),function(c){return-1===f.indexOf(c)}).map(Hf))},Ci=function(k,g){return k.forEach(function(f){var c=g.addRemoteTextTrack(f).track;!f.src&&f.cues&&f.cues.forEach(function(b){return c.addCue(b)})}),g.textTracks()};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var H=sc(function(k,g){function f(d){if(d&&"object"==typeof d){var e=d.which||d.keyCode||d.charCode;e&&(d=e)}if("number"==typeof d)return a[d];
var f;d=String(d);return(f=c[d.toLowerCase()])?f:b[d.toLowerCase()]||(1===d.length?d.charCodeAt(0):void 0)}f.isEventKey=function(a,e){if(a&&"object"==typeof a){a=a.which||a.keyCode||a.charCode;if(null==a)return!1;if("string"==typeof e){var d;if((d=c[e.toLowerCase()])||(d=b[e.toLowerCase()]))return d===a}else if("number"==typeof e)return e===a;return!1}};var c=(g=k.exports=f).code=g.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,
"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"\x3d":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},b=g.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,
escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(k=97;123>k;k++)c[String.fromCharCode(k)]=k-32;for(k=48;58>k;k++)c[k-48]=k;for(k=1;13>k;k++)c["f"+k]=k+111;for(k=0;10>k;k++)c["numpad "+k]=k+96;var a=g.names=g.title={};for(k in c)a[c[k]]=k;for(var e in b)c[e]=b[e]}),Bd=(H.code,H.codes,H.aliases,H.names,H.title,"vjs-modal-dialog"),yb=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),
a.content(a.options_.content),a.contentEl_=J("div",{className:Bd+"-content"},{role:"document"}),a.descEl_=J("p",{className:Bd+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),Ha(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}v(g,k);var f=g.prototype;return f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true",
"aria-label":this.label(),role:"dialog"})},f.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;k.prototype.dispose.call(this)},f.buildCSSClass=function(){return Bd+" vjs-hidden "+k.prototype.buildCSSClass.call(this)},f.handleKeyPress=function(c){H.isEventKey(c,"Escape")&&this.closeable()&&this.close()},f.label=function(){return this.localize(this.options_.label||"Modal Window")},f.description=function(){var c=this.options_.description||this.localize("This is a modal window.");
return this.closeable()&&(c+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),c},f.open=function(){if(!this.opened_){var c=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!c.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&c.pause();this.closeable()&&this.on(this.el_.ownerDocument,"keydown",G(this,this.handleKeyPress));this.hadControls_=
c.controls();c.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}},f.opened=function(c){return"boolean"==typeof c&&this[c?"open":"close"](),this.opened_},f.close=function(){if(this.opened_){var c=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&c.play();this.closeable()&&this.off(this.el_.ownerDocument,"keydown",G(this,this.handleKeyPress));this.hadControls_&&
c.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}},f.closeable=function(c){if("boolean"==typeof c){c=this.closeable_=!!c;var b=this.getChild("closeButton");if(c&&!b){var a=this.contentEl_;this.contentEl_=this.el_;b=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=a;this.on(b,"close",this.close)}!c&&b&&(this.off(b,"close",this.close),this.removeChild(b),b.dispose())}return this.closeable_},
f.fill=function(){this.fillWith(this.content())},f.fillWith=function(c){var b=this.contentEl(),a=b.parentNode,e=b.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;a.removeChild(b);this.empty();Qe(b,c);this.trigger("modalfill");e?a.insertBefore(b,e):a.appendChild(b);(c=this.getChild("closeButton"))&&a.appendChild(c.el_)},f.empty=function(){this.trigger("beforemodalempty");ad(this.contentEl());this.trigger("modalempty")},f.content=function(c){return"undefined"!=typeof c&&(this.content_=
c),this.content_},f.conditionalFocus_=function(){var c=q.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null;(b.contains(c)||b===c)&&(this.previouslyActiveEl_=c,this.focus(),this.on(q,"keydown",this.handleKeyDown))},f.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null);this.off(q,"keydown",this.handleKeyDown)},f.handleKeyDown=function(c){if(H.isEventKey(c,"Tab")){for(var b,a=this.focusableEls_(),e=this.el_.querySelector(":focus"),
d=0;d<a.length;d++)if(e===a[d]){b=d;break}q.activeElement===this.el_&&(b=0);c.shiftKey&&0===b?(a[a.length-1].focus(),c.preventDefault()):c.shiftKey||b!==a.length-1||(a[0].focus(),c.preventDefault())}},f.focusableEls_=function(){var c=this.el_.querySelectorAll("*");return Array.prototype.filter.call(c,function(b){return(b instanceof m.HTMLAnchorElement||b instanceof m.HTMLAreaElement)&&b.hasAttribute("href")||(b instanceof m.HTMLInputElement||b instanceof m.HTMLSelectElement||b instanceof m.HTMLTextAreaElement||
b instanceof m.HTMLButtonElement)&&!b.hasAttribute("disabled")||b instanceof m.HTMLIFrameElement||b instanceof m.HTMLObjectElement||b instanceof m.HTMLEmbedElement||b.hasAttribute("tabindex")&&-1!==b.getAttribute("tabindex")||b.hasAttribute("contenteditable")})},g}(x);yb.prototype.options_={pauseOnOpen:!0,temporary:!0};x.registerComponent("ModalDialog",yb);var zb=function(k){function g(c){var b;void 0===c&&(c=[]);(b=k.call(this)||this).tracks_=[];Object.defineProperty(z(z(b)),"length",{get:function(){return this.tracks_.length}});
for(var a=0;a<c.length;a++)b.addTrack(c[a]);return b}v(g,k);var f=g.prototype;return f.addTrack=function(c){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}});-1===this.tracks_.indexOf(c)&&(this.tracks_.push(c),this.trigger({track:c,type:"addtrack"}))},f.removeTrack=function(c){for(var b,a=0,e=this.length;a<e;a++)if(this[a]===c){(b=this[a]).off&&b.off();this.tracks_.splice(a,1);break}b&&this.trigger({track:b,type:"removetrack"})},f.getTrackById=
function(c){for(var b=null,a=0,e=this.length;a<e;a++){var d=this[a];if(d.id===c){b=d;break}}return b},g}(sa),If;for(If in zb.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},zb.prototype.allowedEvents_)zb.prototype["on"+If]=null;var Cd=function(k,g){for(var f=0;f<k.length;f++)Object.keys(k[f]).length&&g.id!==k[f].id&&(k[f].enabled=!1)},Di=function(k){function g(f){var c;void 0===f&&(f=[]);for(var b=f.length-1;0<=b;b--)if(f[b].enabled){Cd(f,f[b]);break}return(c=
k.call(this,f)||this).changing_=!1,c}return v(g,k),g.prototype.addTrack=function(f){var c=this;f.enabled&&Cd(this,f);k.prototype.addTrack.call(this,f);f.addEventListener&&f.addEventListener("enabledchange",function(){c.changing_||(c.changing_=!0,Cd(c,f),c.changing_=!1,c.trigger("change"))})},g}(zb),Dd=function(k,g){for(var f=0;f<k.length;f++)Object.keys(k[f]).length&&g.id!==k[f].id&&(k[f].selected=!1)},Ei=function(k){function g(f){var c;void 0===f&&(f=[]);for(var b=f.length-1;0<=b;b--)if(f[b].selected){Dd(f,
f[b]);break}return(c=k.call(this,f)||this).changing_=!1,Object.defineProperty(z(z(c)),"selectedIndex",{get:function(){for(var b=0;b<this.length;b++)if(this[b].selected)return b;return-1},set:function(){}}),c}return v(g,k),g.prototype.addTrack=function(f){var c=this;f.selected&&Dd(this,f);k.prototype.addTrack.call(this,f);f.addEventListener&&f.addEventListener("selectedchange",function(){c.changing_||(c.changing_=!0,Dd(c,f),c.changing_=!1,c.trigger("change"))})},g}(zb),Jf=function(k){function g(){return k.apply(this,
arguments)||this}return v(g,k),g.prototype.addTrack=function(f){k.prototype.addTrack.call(this,f);f.addEventListener("modechange",G(this,function(){this.queueTrigger("change")}));-1===["metadata","chapters"].indexOf(f.kind)&&f.addEventListener("modechange",G(this,function(){this.trigger("selectedlanguagechange")}))},g}(zb),Fi=function(){function k(f){void 0===f&&(f=[]);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var c=0,b=f.length;c<
b;c++)this.addTrackElement_(f[c])}var g=k.prototype;return g.addTrackElement_=function(f){var c=this.trackElements_.length;""+c in this||Object.defineProperty(this,c,{get:function(){return this.trackElements_[c]}});-1===this.trackElements_.indexOf(f)&&this.trackElements_.push(f)},g.getTrackElementByTrack_=function(f){for(var c,b=0,a=this.trackElements_.length;b<a;b++)if(f===this.trackElements_[b].track){c=this.trackElements_[b];break}return c},g.removeTrackElement_=function(f){for(var c=0,b=this.trackElements_.length;c<
b;c++)if(f===this.trackElements_[c]){this.trackElements_.splice(c,1);break}},k}(),Kf=function(){function k(f){k.prototype.setCues_.call(this,f);Object.defineProperty(this,"length",{get:function(){return this.length_}})}var g=k.prototype;return g.setCues_=function(f){var c=this.length||0,b=0,a=f.length;this.cues_=f;this.length_=f.length;f=function(b){""+b in this||Object.defineProperty(this,""+b,{get:function(){return this.cues_[b]}})};if(c<a)for(b=c;b<a;b++)f.call(this,b)},g.getCueById=function(f){for(var c=
null,b=0,a=this.length;b<a;b++){var e=this[b];if(e.id===f){c=e;break}}return c},k}(),Gi={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Hi={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ii={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Lf={disabled:"disabled",hidden:"hidden",
showing:"showing"},Ed=function(k){function g(f){void 0===f&&(f={});var c=k.call(this)||this;var b={id:f.id||"vjs_track_"+ib++,kind:f.kind||"",label:f.label||"",language:f.language||""};f=function(a){Object.defineProperty(z(z(c)),a,{get:function(){return b[a]},set:function(){}})};for(var a in b)f(a);return c}return v(g,k),g}(sa),Fd=function(k){var g="protocol hostname port pathname search hash host".split(" "),f=q.createElement("a");f.href=k;var c,b=""===f.host&&"file:"!==f.protocol;b&&((c=q.createElement("div")).innerHTML=
'\x3ca href\x3d"'+k+'"\x3e\x3c/a\x3e',f=c.firstChild,c.setAttribute("style","display:none; position:absolute;"),q.body.appendChild(c));k={};for(var a=0;a<g.length;a++)k[g[a]]=f[g[a]];return"http:"===k.protocol&&(k.host=k.host.replace(/:80$/,"")),"https:"===k.protocol&&(k.host=k.host.replace(/:443$/,"")),k.protocol||(k.protocol=m.location.protocol),b&&q.body.removeChild(c),k},Mf=function(k){if(!k.match(/^https?:\/\//)){var g=q.createElement("div");g.innerHTML='\x3ca href\x3d"'+k+'"\x3ex\x3c/a\x3e';
k=g.firstChild.href}return k},Gd=function(k){return"string"==typeof k&&(k=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(k))?k.pop().toLowerCase():""},zc=function(k){var g=m.location;k=Fd(k);return(":"===k.protocol?g.protocol:k.protocol)+k.host!==g.protocol+g.host},Ji=Object.freeze({parseUrl:Fd,getAbsoluteURL:Mf,getFileExtension:Gd,isCrossOrigin:zc}),ii=Object.prototype.toString;$jscomp.initSymbol();$jscomp.initSymbol();var Ub=sc(function(k,g){(g=k.exports=function(f){return f.replace(/^\s*|\s*$/g,
"")}).left=function(f){return f.replace(/^\s*/,"")};g.right=function(f){return f.replace(/\s*$/,"")}}),Nf=(Ub.left,Ub.right,Function.prototype.toString),Ki=/^\s*class\b/,Of=function(k){try{var g=Nf.call(k);return Ki.test(g)}catch(f){return!1}},Li=Object.prototype.toString,Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Ni=function(k){if(!k||"function"!=typeof k&&"object"!=typeof k)return!1;if("function"==typeof k&&!k.prototype)return!0;if(Mi){try{var g=!Of(k)&&(Nf.call(k),!0)}catch(f){g=
!1}return g}if(Of(k))return!1;k=Li.call(k);return"[object Function]"===k||"[object GeneratorFunction]"===k},Oi=Object.prototype.toString,Pf=Object.prototype.hasOwnProperty,Pi=function(k,g,f){if(!Ni(g))throw new TypeError("iterator must be a function");var c;3<=arguments.length&&(c=f);"[object Array]"===Oi.call(k)?function(b,c,e){for(var a=0,f=b.length;a<f;a++)Pf.call(b,a)&&(null==e?c(b[a],a,b):c.call(e,b[a],a,b))}(k,g,c):"string"==typeof k?function(b,c,e){for(var a=0,f=b.length;a<f;a++)null==e?c(b.charAt(a),
a,b):c.call(e,b.charAt(a),a,b)}(k,g,c):function(b,c,e){for(var a in b)Pf.call(b,a)&&(null==e?c(b[a],a,b):c.call(e,b[a],a,b))}(k,g,c)},ki=function(k){if(!k)return{};var g={};return Pi(Ub(k).split("\n"),function(f){var c,b=f.indexOf(":"),a=Ub(f.slice(0,b)).toLowerCase();f=Ub(f.slice(b+1));"undefined"==typeof g[a]?g[a]=f:(c=g[a],"[object Array]"===Object.prototype.toString.call(c)?g[a].push(f):g[a]=[g[a],f])}),g},ji=function(){for(var k={},g=0;g<arguments.length;g++){var f=arguments[g],c;for(c in f)Qi.call(f,
c)&&(k[c]=f[c])}return k},Qi=Object.prototype.hasOwnProperty;Qa.XMLHttpRequest=m.XMLHttpRequest||function(){};Qa.XDomainRequest="withCredentials"in new Qa.XMLHttpRequest?Qa.XMLHttpRequest:m.XDomainRequest;(function(k,g){for(var f=0;f<k.length;f++)g(k[f])})("get put post patch head delete".split(" "),function(k){Qa["delete"===k?"del":k]=function(g,f,c){return(f=Ye(g,f,c)).method=k.toUpperCase(),Ze(f)}});var Qf=function(k,g){var f=new m.WebVTT.Parser(m,m.vttjs,m.WebVTT.StringDecoder()),c=[];f.oncue=
function(b){g.addCue(b)};f.onparsingerror=function(b){c.push(b)};f.onflush=function(){g.trigger({type:"loadeddata",target:g})};f.parse(k);0<c.length&&(m.console&&m.console.groupCollapsed&&m.console.groupCollapsed("Text Track parsing errors for "+g.src),c.forEach(function(b){return K.error(b)}),m.console&&m.console.groupEnd&&m.console.groupEnd());f.flush()},Vb=function(k){function g(c){var b;if(void 0===c&&(c={}),!c.tech)throw Error("A tech was not provided.");c=Q(c,{kind:Ii[c.kind]||"subtitles",language:c.language||
c.srclang||""});var a=Lf[c.mode]||"disabled",e=c.default;"metadata"!==c.kind&&"chapters"!==c.kind||(a="hidden");(b=k.call(this,c)||this).tech_=c.tech;b.cues_=[];b.activeCues_=[];var d=new Kf(b.cues_),f=new Kf(b.activeCues_),g=!1,p=G(z(z(b)),function(){this.activeCues=this.activeCues;g&&(this.trigger("cuechange"),g=!1)});return"disabled"!==a&&b.tech_.ready(function(){b.tech_.on("timeupdate",p)},!0),Object.defineProperties(z(z(b)),{default:{get:function(){return e},set:function(){}},mode:{get:function(){return a},
set:function(b){var c=this;Lf[b]&&("disabled"!==(a=b)?this.tech_.ready(function(){c.tech_.on("timeupdate",p)},!0):this.tech_.off("timeupdate",p),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?d:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return f;for(var b=this.tech_.currentTime(),c=[],a=0,d=this.cues.length;a<d;a++){var e=this.cues[a];e.startTime<=b&&e.endTime>=b?c.push(e):e.startTime===e.endTime&&e.startTime<=b&&
e.startTime+.5>=b&&c.push(e)}if(g=!1,c.length!==this.activeCues_.length)g=!0;else for(b=0;b<c.length;b++)-1===this.activeCues_.indexOf(c[b])&&(g=!0);return this.activeCues_=c,f.setCues_(this.activeCues_),f},set:function(){}}}),c.src?(b.src=c.src,function(b,c){var a={uri:b};(b=zc(b))&&(a.cors=b);Qa(a,G(this,function(b,a,d){if(b)return K.error(b,a);if(c.loaded_=!0,"function"!=typeof m.WebVTT){if(c.tech_){var e=function(){return Qf(d,c)};c.tech_.on("vttjsloaded",e);c.tech_.on("vttjserror",function(){K.error("vttjs failed to load, stopping trying to process "+
c.src);c.tech_.off("vttjsloaded",e)})}}else Qf(d,c)}))}(c.src,z(z(b)))):b.loaded_=!0,b}v(g,k);var f=g.prototype;return f.addCue=function(c){var b=c;if(m.vttjs&&!(c instanceof m.vttjs.VTTCue)){for(var a in b=new m.vttjs.VTTCue(c.startTime,c.endTime,c.text),c)a in b||(b[a]=c[a]);b.id=c.id;b.originalCue_=c}c=this.tech_.textTracks();for(a=0;a<c.length;a++)c[a]!==this&&c[a].removeCue(b);this.cues_.push(b);this.cues.setCues_(this.cues_)},f.removeCue=function(c){for(var b=this.cues_.length;b--;){var a=this.cues_[b];
if(a===c||a.originalCue_&&a.originalCue_===c){this.cues_.splice(b,1);this.cues.setCues_(this.cues_);break}}},g}(Ed);Vb.prototype.allowedEvents_={cuechange:"cuechange"};var Rf=function(k){function g(f){void 0===f&&(f={});var c=Q(f,{kind:Hi[f.kind]||""});f=k.call(this,c)||this;var b=!1;return Object.defineProperty(z(z(f)),"enabled",{get:function(){return b},set:function(c){"boolean"==typeof c&&c!==b&&(b=c,this.trigger("enabledchange"))}}),c.enabled&&(f.enabled=c.enabled),f.loaded_=!0,f}return v(g,k),
g}(Ed),Sf=function(k){function g(f){void 0===f&&(f={});var c=Q(f,{kind:Gi[f.kind]||""});f=k.call(this,c)||this;var b=!1;return Object.defineProperty(z(z(f)),"selected",{get:function(){return b},set:function(c){"boolean"==typeof c&&c!==b&&(b=c,this.trigger("selectedchange"))}}),c.selected&&(f.selected=c.selected),f}return v(g,k),g}(Ed),Ab=function(k){function g(f){var c;void 0===f&&(f={});var b=k.call(this)||this;var a=new Vb(f);return b.kind=a.kind,b.src=a.src,b.srclang=a.language,b.label=a.label,
b.default=a.default,Object.defineProperties(z(z(b)),{readyState:{get:function(){return c}},track:{get:function(){return a}}}),c=0,a.addEventListener("loadeddata",function(){c=2;b.trigger({type:"load",target:z(z(b))})}),b}return v(g,k),g}(sa);Ab.prototype.allowedEvents_={load:"load"};Ab.NONE=0;Ab.LOADING=1;Ab.LOADED=2;Ab.ERROR=3;var za={audio:{ListClass:Di,TrackClass:Rf,capitalName:"Audio"},video:{ListClass:Ei,TrackClass:Sf,capitalName:"Video"},text:{ListClass:Jf,TrackClass:Vb,capitalName:"Text"}};
Object.keys(za).forEach(function(k){za[k].getterName=k+"Tracks";za[k].privateName=k+"Tracks_"});var Wb={remoteText:{ListClass:Jf,TrackClass:Vb,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Fi,TrackClass:Ab,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Aa=Q(za,Wb);Wb.names=Object.keys(Wb);za.names=Object.keys(za);Aa.names=[].concat(Wb.names).concat(za.names);var hd=Object.create||
function(){function k(){}return function(g){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");return k.prototype=g,new k}}();((oa.prototype=hd(Error.prototype)).constructor=oa).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};Mb.prototype={set:function(k,g){this.get(k)||""===g||(this.values[k]=g)},get:function(k,g,f){return f?this.has(k)?this.values[k]:g[f]:this.has(k)?this.values[k]:g},has:function(k){return k in
this.values},alt:function(k,g,f){for(var c=0;c<f.length;++c)if(g===f[c]){this.set(k,g);break}},integer:function(k,g){/^-?\d+$/.test(g)&&this.set(k,parseInt(g,10))},percent:function(k,g){return!!(g.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(g=parseFloat(g))&&100>=g)&&(this.set(k,g),!0)}};var mi={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26lrm;":"\u200e","\x26rlm;":"\u200f","\x26nbsp;":"\u00a0"},ni={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},oi={v:"title",lang:"lang"},
af={rt:"ruby"},bf=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,
64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],
[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];id.prototype.applyStyles=
function(k,g){for(var f in g=g||this.div,k)k.hasOwnProperty(f)&&(g.style[f]=k[f])};id.prototype.formatStyle=function(k,g){return 0===k?0:k+g};(jd.prototype=hd(id.prototype)).constructor=jd;pa.prototype.move=function(k,g){switch(g=void 0!==g?g:this.lineHeight,k){case "+x":this.left+=g;this.right+=g;break;case "-x":this.left-=g;this.right-=g;break;case "+y":this.top+=g;this.bottom+=g;break;case "-y":this.top-=g,this.bottom-=g}};pa.prototype.overlaps=function(k){return this.left<k.right&&this.right>
k.left&&this.top<k.bottom&&this.bottom>k.top};pa.prototype.overlapsAny=function(k){for(var g=0;g<k.length;g++)if(this.overlaps(k[g]))return!0;return!1};pa.prototype.within=function(k){return this.top>=k.top&&this.bottom<=k.bottom&&this.left>=k.left&&this.right<=k.right};pa.prototype.overlapsOppositeAxis=function(k,g){switch(g){case "+x":return this.left<k.left;case "-x":return this.right>k.right;case "+y":return this.top<k.top;case "-y":return this.bottom>k.bottom}};pa.prototype.intersectPercentage=
function(k){return Math.max(0,Math.min(this.right,k.right)-Math.max(this.left,k.left))*Math.max(0,Math.min(this.bottom,k.bottom)-Math.max(this.top,k.top))/(this.height*this.width)};pa.prototype.toCSSCompatValues=function(k){return{top:this.top-k.top,bottom:k.bottom-this.bottom,left:this.left-k.left,right:k.right-this.right,height:this.height,width:this.width}};pa.getSimpleBoxPosition=function(k){var g=k.div?k.div.offsetHeight:k.tagName?k.offsetHeight:0,f=k.div?k.div.offsetWidth:k.tagName?k.offsetWidth:
0,c=k.div?k.div.offsetTop:k.tagName?k.offsetTop:0;return{left:(k=k.div?k.div.getBoundingClientRect():k.tagName?k.getBoundingClientRect():k).left,right:k.right,top:k.top||c,height:k.height||g,bottom:k.bottom||c+(k.height||g),width:k.width||f}};Ob.StringDecoder=function(){return{decode:function(k){if(!k)return"";if("string"!=typeof k)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(k))}}};Ob.convertCueToDOMTree=function(k,g){return k&&g?$e(k,g):null};Ob.processCues=
function(k,g,f){if(!k||!g||!f)return null;for(;f.firstChild;)f.removeChild(f.firstChild);var c=k.document.createElement("div");if(c.style.position="absolute",c.style.left="0",c.style.right="0",c.style.top="0",c.style.bottom="0",c.style.margin="1.5%",f.appendChild(c),function(b){for(var c=0;c<b.length;c++)if(b[c].hasBeenReset||!b[c].displayState)return!0;return!1}(g)){var b=[],a=pa.getSimpleBoxPosition(c),e={font:Math.round(5*a.height)/100+"px sans-serif"};!function(){for(var d,f,l=0;l<g.length;l++)f=
g[l],d=new jd(k,f,e),c.appendChild(d.div),qi(0,d,a,b),f.displayState=d.div,b.push(pa.getSimpleBoxPosition(d))}()}else for(f=0;f<g.length;f++)c.appendChild(g[f].displayState)};(Ob.Parser=function(k,g,f){f||(f=g,g={});g||(g={});this.window=k;this.vttjs=g;this.state="INITIAL";this.buffer="";this.decoder=f||new TextDecoder("utf8");this.regionList=[]}).prototype={reportOrThrowError:function(k){if(!(k instanceof oa))throw k;this.onparsingerror&&this.onparsingerror(k)},parse:function(k){function g(){for(var b=
c.buffer,a=0;a<b.length&&"\r"!==b[a]&&"\n"!==b[a];)++a;var e=b.substr(0,a);return"\r"===b[a]&&++a,"\n"===b[a]&&++a,c.buffer=b.substr(a),e}function f(b){b.match(/X-TIMESTAMP-MAP/)?Nb(b,function(b,a){switch(b){case "X-TIMESTAMP-MAP":b=a;var d=new Mb;Nb(b,function(b,c){switch(b){case "MPEGT":d.integer(b+"S",c);break;case "LOCA":d.set(b+"L",gd(c))}},/[^\d]:/,/,/);c.ontimestampmap&&c.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}},/=/):Nb(b,function(b,a){switch(b){case "Region":!function(b){var a=
new Mb;if(Nb(b,function(b,c){switch(b){case "id":a.set(b,c);break;case "width":a.percent(b,c);break;case "lines":a.integer(b,c);break;case "regionanchor":case "viewportanchor":c=c.split(",");if(2!==c.length)break;var d=new Mb;if(d.percent("x",c[0]),d.percent("y",c[1]),!d.has("x")||!d.has("y"))break;a.set(b+"X",d.get("x"));a.set(b+"Y",d.get("y"));break;case "scroll":a.alt(b,c,["up"])}},/=/,/\s/),a.has("id"))b=new (c.vttjs.VTTRegion||c.window.VTTRegion),b.width=a.get("width",100),b.lines=a.get("lines",
3),b.regionAnchorX=a.get("regionanchorX",0),b.regionAnchorY=a.get("regionanchorY",100),b.viewportAnchorX=a.get("viewportanchorX",0),b.viewportAnchorY=a.get("viewportanchorY",100),b.scroll=a.get("scroll",""),c.onregion&&c.onregion(b),c.regionList.push({id:a.get("id"),region:b})}(a)}},/:/)}var c=this;k&&(c.buffer+=c.decoder.decode(k,{stream:!0}));try{var b;if("INITIAL"===c.state){if(!/\r\n|\n/.test(c.buffer))return this;var a=(b=g()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new oa(oa.Errors.BadSignature);
c.state="HEADER"}for(k=!1;c.buffer;){if(!/\r\n|\n/.test(c.buffer))return this;switch(k?k=!1:b=g(),c.state){case "HEADER":/:/.test(b)?f(b):b||(c.state="ID");continue;case "NOTE":b||(c.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(b)){c.state="NOTE";break}if(!b)continue;if(c.cue=new (c.vttjs.VTTCue||c.window.VTTCue)(0,0,""),c.state="CUE",-1===b.indexOf("--\x3e")){c.cue.id=b;continue}case "CUE":try{li(b,c.cue,c.regionList)}catch(d){c.reportOrThrowError(d);c.cue=null;c.state="BADCUE";continue}c.state=
"CUETEXT";continue;case "CUETEXT":var e=-1!==b.indexOf("--\x3e");if(!b||e&&(k=!0)){c.oncue&&c.oncue(c.cue);c.cue=null;c.state="ID";continue}c.cue.text&&(c.cue.text+="\n");c.cue.text+=b;continue;case "BADCUE":b||(c.state="ID")}}}catch(d){c.reportOrThrowError(d),"CUETEXT"===c.state&&c.cue&&c.oncue&&c.oncue(c.cue),c.cue=null,c.state="INITIAL"===c.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",
this.parse()),"INITIAL"===this.state)throw new oa(oa.Errors.BadSignature);}catch(k){this.reportOrThrowError(k)}return this.onflush&&this.onflush(),this}};var si={"":1,lr:1,rl:1},ri={start:1,middle:1,end:1,left:1,right:1};cf.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Ri={"":!0,up:!0},Si=function(){var k=100,g=3,f=0,c=100,b=0,a=100,e="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return k},set:function(b){if(!Pb(b))throw Error("Width must be between 0 and 100.");
k=b}},lines:{enumerable:!0,get:function(){return g},set:function(b){if("number"!=typeof b)throw new TypeError("Lines must be set to a number.");g=b}},regionAnchorY:{enumerable:!0,get:function(){return c},set:function(b){if(!Pb(b))throw Error("RegionAnchorX must be between 0 and 100.");c=b}},regionAnchorX:{enumerable:!0,get:function(){return f},set:function(b){if(!Pb(b))throw Error("RegionAnchorY must be between 0 and 100.");f=b}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(b){if(!Pb(b))throw Error("ViewportAnchorY must be between 0 and 100.");
a=b}},viewportAnchorX:{enumerable:!0,get:function(){return b},set:function(c){if(!Pb(c))throw Error("ViewportAnchorX must be between 0 and 100.");b=c}},scroll:{enumerable:!0,get:function(){return e},set:function(b){b="string"==typeof b&&!!Ri[b.toLowerCase()]&&b.toLowerCase();if(!1===b)throw new SyntaxError("An invalid or illegal string was specified.");e=b}}})},Xb=sc(function(k){k=k.exports={WebVTT:Ob,VTTCue:cf,VTTRegion:Si};m.vttjs=k;m.WebVTT=k.WebVTT;var g=k.VTTCue,f=k.VTTRegion,c=m.VTTCue,b=m.VTTRegion;
k.shim=function(){m.VTTCue=g;m.VTTRegion=f};k.restore=function(){m.VTTCue=c;m.VTTRegion=b};m.VTTCue||k.shim()});Xb.WebVTT;Xb.VTTCue;Xb.VTTRegion;var R=function(k){function g(c,b){var a;return void 0===c&&(c={}),void 0===b&&(b=function(){}),c.reportTouchActivity=!1,(a=k.call(this,null,c,b)||this).hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),Aa.names.forEach(function(b){b=Aa[b];c&&c[b.getterName]&&(a[b.privateName]=c[b.getterName])}),
a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(b){!1===c["native"+b+"Tracks"]&&(a["featuresNative"+b+"Tracks"]=!1)}),!1===c.nativeCaptions||!1===c.nativeTextTracks?a.featuresNativeTextTracks=!1:!0!==c.nativeCaptions&&!0!==c.nativeTextTracks||(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.autoRemoteTextTracks_=new Aa.text.ListClass,a.initTrackListeners(),c.nativeControlsForTouch||
a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}v(g,k);var f=g.prototype;return f.triggerSourceset=function(c){var b=this;this.isReady_||this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(c)},1)});this.trigger({src:c,type:"sourceset"})},f.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)},f.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();
this.off("durationchange",this.onDurationChange)},f.trackProgress=function(c){this.stopTrackingProgress();this.progressInterval=this.setInterval(G(this,function(){var b=this.bufferedPercent();this.bufferedPercent_!==b&&this.trigger("progress");1===(this.bufferedPercent_=b)&&this.stopTrackingProgress()}),500)},f.onDurationChange=function(c){this.duration_=this.duration()},f.buffered=function(){return kb(0,0)},f.bufferedPercent=function(){return Xe(this.buffered(),this.duration_)},f.stopTrackingProgress=
function(){this.clearInterval(this.progressInterval)},f.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)},f.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)},f.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",
target:this,manuallyTriggered:!0})},250)},f.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},f.dispose=function(){this.clearTracks(za.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();k.prototype.dispose.call(this)},f.clearTracks=function(c){var b=this;(c=[].concat(c)).forEach(function(c){for(var a=b[c+"Tracks"]()||[],d=a.length;d--;){var f=a[d];
"text"===c&&b.removeRemoteTextTrack(f);a.removeTrack(f)}})},f.cleanupAutoTextTracks=function(){for(var c=this.autoRemoteTextTracks_||[],b=c.length;b--;)this.removeRemoteTextTrack(c[b])},f.reset=function(){},f.error=function(c){return void 0!==c&&(this.error_=new na(c),this.trigger("error")),this.error_},f.played=function(){return this.hasStarted_?kb(0,0):kb()},f.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},f.initTrackListeners=
function(){var c=this;za.names.forEach(function(b){var a=function(){c.trigger(b+"trackchange")},e=c[za[b].getterName]();e.addEventListener("removetrack",a);e.addEventListener("addtrack",a);c.on("dispose",function(){e.removeEventListener("removetrack",a);e.removeEventListener("addtrack",a)})})},f.addWebVttScript_=function(){var c=this;if(!m.WebVTT)if(q.body.contains(this.el())){if(!this.options_["vtt.js"]&&Wa(Xb)&&0<Object.keys(Xb).length)return void this.trigger("vttjsloaded");var b=q.createElement("script");
b.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";b.onload=function(){c.trigger("vttjsloaded")};b.onerror=function(){c.trigger("vttjserror")};this.on("dispose",function(){b.onload=null;b.onerror=null});m.WebVTT=!0;this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)},f.emulateTextTracks=function(){var c=this,b=this.textTracks(),a=this.remoteTextTracks(),e=function(c){return b.addTrack(c.track)},d=function(c){return b.removeTrack(c.track)};a.on("addtrack",
e);a.on("removetrack",d);this.addWebVttScript_();var f=function(){return c.trigger("texttrackchange")},g=function(){f();for(var c=0;c<b.length;c++){var a=b[c];a.removeEventListener("cuechange",f);"showing"===a.mode&&a.addEventListener("cuechange",f)}};g();b.addEventListener("change",g);b.addEventListener("addtrack",g);b.addEventListener("removetrack",g);this.on("dispose",function(){a.off("addtrack",e);a.off("removetrack",d);b.removeEventListener("change",g);b.removeEventListener("addtrack",g);b.removeEventListener("removetrack",
g);for(var c=0;c<b.length;c++)b[c].removeEventListener("cuechange",f)})},f.addTextTrack=function(c,b,a){if(!c)throw Error("TextTrack kind is required but was not provided");var e=void 0;void 0===e&&(e={});var d=this.textTracks();e.kind=c;b&&(e.label=b);a&&(e.language=a);e.tech=this;c=new Aa.text.TrackClass(e);return d.addTrack(c),c},f.createRemoteTextTrack=function(c){c=Q(c,{tech:this});return new Wb.remoteTextEl.TrackClass(c)},f.addRemoteTextTrack=function(c,b){var a=this;void 0===c&&(c={});var e=
this.createRemoteTextTrack(c);return!0!==b&&!1!==b&&(K.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0),this.remoteTextTrackEls().addTrackElement_(e),this.remoteTextTracks().addTrack(e.track),!0!==b&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(e.track)}),e},f.removeRemoteTextTrack=function(c){var b=this.remoteTextTrackEls().getTrackElementByTrack_(c);this.remoteTextTrackEls().removeTrackElement_(b);
this.remoteTextTracks().removeTrack(c);this.autoRemoteTextTracks_.removeTrack(c)},f.getVideoPlaybackQuality=function(){return{}},f.setPoster=function(){},f.playsinline=function(){},f.setPlaysinline=function(){},f.overrideNativeAudioTracks=function(){},f.overrideNativeVideoTracks=function(){},f.canPlayType=function(){return""},g.canPlayType=function(){return""},g.canPlaySource=function(c,b){return g.canPlayType(c.type)},g.isTech=function(c){return c.prototype instanceof g||c instanceof g||c===g},g.registerTech=
function(c,b){if(g.techs_||(g.techs_={}),!g.isTech(b))throw Error("Tech "+c+" must be a Tech");if(!g.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!g.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");return c=U(c),g.techs_[c]=b,"Tech"!==c&&g.defaultTechOrder_.push(c),b},g.getTech=function(c){if(c)return c=U(c),g.techs_&&g.techs_[c]?g.techs_[c]:m&&m.videojs&&m.videojs[c]?(K.warn("The "+c+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),
m.videojs[c]):void 0},g}(x);Aa.names.forEach(function(k){var g=Aa[k];R.prototype[g.getterName]=function(){return this[g.privateName]=this[g.privateName]||new g.ListClass,this[g.privateName]}});R.prototype.featuresVolumeControl=!0;R.prototype.featuresMuteControl=!0;R.prototype.featuresFullscreenResize=!1;R.prototype.featuresPlaybackRate=!1;R.prototype.featuresProgressEvents=!1;R.prototype.featuresSourceset=!1;R.prototype.featuresTimeupdateEvents=!1;R.prototype.featuresNativeTextTracks=!1;R.withSourceHandlers=
function(k){k.registerSourceHandler=function(g,f){var c=k.sourceHandlers;c||(c=k.sourceHandlers=[]);void 0===f&&(f=c.length);c.splice(f,0,g)};k.canPlayType=function(g){for(var f,c=k.sourceHandlers||[],b=0;b<c.length;b++)if(f=c[b].canPlayType(g))return f;return""};k.selectSourceHandler=function(g,f){for(var c=k.sourceHandlers||[],b=0;b<c.length;b++)if(c[b].canHandleSource(g,f))return c[b];return null};k.canPlaySource=function(g,f){var c=k.selectSourceHandler(g,f);return c?c.canHandleSource(g,f):""};
["seekable","seeking","duration"].forEach(function(g){var f=this[g];"function"==typeof f&&(this[g]=function(){return this.sourceHandler_&&this.sourceHandler_[g]?this.sourceHandler_[g].apply(this.sourceHandler_,arguments):f.apply(this,arguments)})},k.prototype);k.prototype.setSource=function(g){var f=k.selectSourceHandler(g,this.options_);f||(k.nativeSourceHandler?f=k.nativeSourceHandler:K.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);
f!==k.nativeSourceHandler&&(this.currentSource_=g);this.sourceHandler_=f.handleSource(g,this,this.options_);this.on("dispose",this.disposeSourceHandler)};k.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};x.registerComponent("Tech",R);R.registerTech("Tech",R);R.defaultTechOrder_=[];var lb=
{},md={},tc={},Ti={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Ui={setCurrentTime:1},Tf={play:1,pause:1},Vi={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},uc=function(k){void 0===k&&(k="");k=Gd(k);return Vi[k.toLowerCase()]||""},Wi=function(k){function g(f,
c,b){var a=Q({createEl:!1},c);if(b=k.call(this,f,a,b)||this,c.playerOptions.sources&&0!==c.playerOptions.sources.length)f.src(c.playerOptions.sources);else for(a=0,c=c.playerOptions.techOrder;a<c.length;a++){var e=U(c[a]),d=R.getTech(e);if(e||(d=x.getComponent(e)),d&&d.isSupported()){f.loadTech_(e);break}}return b}return v(g,k),g}(x);x.registerComponent("MediaLoader",Wi);var Ac=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).emitTapEvents(),a.enable(),a}v(g,k);var f=g.prototype;
return f.createEl=function(c,b,a){void 0===c&&(c="div");void 0===b&&(b={});void 0===a&&(a={});b=B({innerHTML:'\x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e',className:this.buildCSSClass(),tabIndex:0},b);"button"===c&&K.error("Creating a ClickableComponent with an HTML element of "+c+" is not supported; use a Button instead.");a=B({role:"button"},a);this.tabIndex_=b.tabIndex;c=k.prototype.createEl.call(this,c,b,a);return this.createControlTextEl(c),c},f.dispose=function(){this.controlTextEl_=
null;k.prototype.dispose.call(this)},f.createControlTextEl=function(c){return this.controlTextEl_=J("span",{className:"vjs-control-text"},{"aria-live":"polite"}),c&&c.appendChild(this.controlTextEl_),this.controlText(this.controlText_,c),this.controlTextEl_},f.controlText=function(c,b){if(void 0===b&&(b=this.el()),void 0===c)return this.controlText_||"Need Text";var a=this.localize(c);this.controlText_=c;Ha(this.controlTextEl_,a);this.nonIconControl||b.setAttribute("title",a)},f.buildCSSClass=function(){return"vjs-control vjs-button "+
k.prototype.buildCSSClass.call(this)},f.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},f.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!=typeof this.tabIndex_&&
this.el_.removeAttribute("tabIndex");this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)},f.handleClick=function(c){},f.handleFocus=function(c){Ja(q,"keydown",G(this,this.handleKeyPress))},f.handleKeyPress=function(c){H.isEventKey(c,"Space")||H.isEventKey(c,"Enter")?(c.preventDefault(),this.trigger("click")):k.prototype.handleKeyPress.call(this,c)},f.handleBlur=function(c){ma(q,"keydown",G(this,this.handleKeyPress))},g}(x);x.registerComponent("ClickableComponent",
Ac);var Xi=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).update(),c.on("posterchange",G(z(z(a)),a.update)),a}v(g,k);var f=g.prototype;return f.dispose=function(){this.player().off("posterchange",this.update);k.prototype.dispose.call(this)},f.createEl=function(){return J("div",{className:"vjs-poster",tabIndex:-1})},f.update=function(c){c=this.player().poster();this.setSrc(c);c?this.show():this.hide()},f.setSrc=function(c){var b="";c&&(b='url("'+c+'")');this.el_.style.backgroundImage=
b},f.handleClick=function(c){this.player_.controls()&&(this.player_.paused()?Lb(this.player_.play()):this.player_.pause(),this.player_.handleFocus({}))},g}(Ac);x.registerComponent("PosterImage",Xi);var Yi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',
smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Zi=function(k){function g(c,b,a){b=k.call(this,c,b,a)||this;var e=G(z(z(b)),b.updateDisplay);return c.on("loadstart",G(z(z(b)),b.toggleDisplay)),c.on("texttrackchange",e),c.on("loadedmetadata",G(z(z(b)),b.preselectTrack)),c.ready(G(z(z(b)),function(){if(c.tech_&&c.tech_.featuresNativeTextTracks)this.hide();else{c.on("fullscreenchange",e);c.on("playerresize",e);m.addEventListener("orientationchange",e);c.on("dispose",function(){return m.removeEventListener("orientationchange",
e)});for(var b=this.options_.playerOptions.tracks||[],a=0;a<b.length;a++)this.player_.addRemoteTextTrack(b[a],!0);this.preselectTrack()}})),b}v(g,k);var f=g.prototype;return f.preselectTrack=function(){for(var c,b,a,e={captions:1,subtitles:1},d=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage,g=0;g<d.length;g++){var k=d[g];f&&f.enabled&&f.language&&f.language===k.language&&k.kind in e?k.kind===f.kind?a=k:a||(a=k):f&&!f.enabled?b=c=a=null:k.default&&("descriptions"!==k.kind||c?k.kind in
e&&!b&&(b=k):c=k)}a?a.mode="showing":b?b.mode="showing":c&&(c.mode="showing")},f.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},f.clearDisplay=function(){"function"==typeof m.WebVTT&&m.WebVTT.processCues(m,[],this.el_)},f.updateDisplay=function(){var c=this.player_.textTracks();this.clearDisplay();
for(var b=null,a=null,e=c.length;e--;){var d=c[e];"showing"===d.mode&&("descriptions"===d.kind?b=d:a=d)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))},f.updateForTrack=function(c){if("function"==typeof m.WebVTT&&c.activeCues){for(var b=[],a=0;a<c.activeCues.length;a++)b.push(c.activeCues[a]);if(m.WebVTT.processCues(m,b,this.el_),
this.player_.textTrackSettings)for(c=this.player_.textTrackSettings.getValues(),a=b.length;a--;){var e=b[a];if(e){e=e.displayState;c.color&&(e.firstChild.style.color=c.color);if(c.textOpacity){var d=nd(c.color||"#fff",c.textOpacity);try{e.firstChild.style.color=d}catch(h){}}c.backgroundColor&&(e.firstChild.style.backgroundColor=c.backgroundColor);if(c.backgroundOpacity){d=nd(c.backgroundColor||"#000",c.backgroundOpacity);try{e.firstChild.style.backgroundColor=d}catch(h){}}if(c.windowColor)if(c.windowOpacity){d=
nd(c.windowColor,c.windowOpacity);try{e.style.backgroundColor=d}catch(h){}}else e.style.backgroundColor=c.windowColor;if(c.edgeStyle&&("dropshadow"===c.edgeStyle?e.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===c.edgeStyle?e.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===c.edgeStyle?e.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===c.edgeStyle&&(e.firstChild.style.textShadow=
"0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),c.fontPercent&&1!==c.fontPercent)d=m.parseFloat(e.style.fontSize),e.style.fontSize=d*c.fontPercent+"px",e.style.height="auto",e.style.top="auto",e.style.bottom="2px";c.fontFamily&&"default"!==c.fontFamily&&("small-caps"===c.fontFamily?e.firstChild.style.fontVariant="small-caps":e.firstChild.style.fontFamily=Yi[c.fontFamily])}}}},g}(x);x.registerComponent("TextTrackDisplay",Zi);var $i=function(k){function g(){return k.apply(this,arguments)||
this}return v(g,k),g.prototype.createEl=function(){var f=this.player_.isAudio();f=this.localize(f?"Audio Player":"Video Player");f=J("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[f])});var c=k.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return c.appendChild(f),c},g}(x);x.registerComponent("LoadingSpinner",$i);var Ka=function(k){function g(){return k.apply(this,arguments)||this}v(g,k);var f=g.prototype;return f.createEl=function(c,
b,a){void 0===b&&(b={});void 0===a&&(a={});b=B({innerHTML:'\x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e',className:this.buildCSSClass()},b);a=B({type:"button"},a);c=x.prototype.createEl.call(this,"button",b,a);return this.createControlTextEl(c),c},f.addChild=function(c,b){void 0===b&&(b={});return K.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),x.prototype.addChild.call(this,
c,b)},f.enable=function(){k.prototype.enable.call(this);this.el_.removeAttribute("disabled")},f.disable=function(){k.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")},f.handleKeyPress=function(c){H.isEventKey(c,"Space")||H.isEventKey(c,"Enter")||k.prototype.handleKeyPress.call(this,c)},g}(Ac);x.registerComponent("Button",Ka);var Uf=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).mouseused_=!1,a.on("mousedown",a.handleMouseDown),a}v(g,k);var f=g.prototype;
return f.buildCSSClass=function(){return"vjs-big-play-button"},f.handleClick=function(c){var b=this.player_.play();if(this.mouseused_&&c.clientX&&c.clientY)return Lb(b),void this.player_.handleFocus({});var a=(c=this.player_.getChild("controlBar"))&&c.getChild("playToggle");a?(c=function(){return a.focus()},null!=b&&"function"==typeof b.then?b.then(c,function(){}):this.setTimeout(c,1)):this.player_.focus()},f.handleKeyPress=function(c){this.mouseused_=!1;k.prototype.handleKeyPress.call(this,c)},f.handleMouseDown=
function(c){this.mouseused_=!0},g}(Ka);Uf.prototype.controlText_="Play Video";x.registerComponent("BigPlayButton",Uf);var aj=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).controlText(b&&b.controlText||a.localize("Close")),a}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-close-button "+k.prototype.buildCSSClass.call(this)},f.handleKeyPress=function(c){},f.handleClick=function(c){this.trigger({type:"close",bubbles:!1})},g}(Ka);x.registerComponent("CloseButton",
aj);var Vf=function(k){function g(c,b){var a;return void 0===b&&(b={}),a=k.call(this,c,b)||this,b.replay=void 0===b.replay||b.replay,a.on(c,"play",a.handlePlay),a.on(c,"pause",a.handlePause),b.replay&&a.on(c,"ended",a.handleEnded),a}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-play-control "+k.prototype.buildCSSClass.call(this)},f.handleClick=function(c){this.player_.paused()?this.player_.play():this.player_.pause()},f.handleSeeked=function(c){this.removeClass("vjs-ended");
this.player_.paused()?this.handlePause(c):this.handlePlay(c)},f.handlePlay=function(c){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")},f.handlePause=function(c){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")},f.handleEnded=function(c){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)},g}(Ka);Vf.prototype.controlText_=
"Play";x.registerComponent("PlayToggle",Vf);var Wf=function(k,g){k=0>k?0:k;var f=Math.floor(k%60),c=Math.floor(k/60%60),b=Math.floor(k/3600),a=Math.floor(g/60%60);g=Math.floor(g/3600);return(isNaN(k)||k===1/0)&&(b=c=f="-"),(b=0<b||0<g?b+":":"")+(((b||10<=a)&&10>c?"0"+c:c)+":")+(10>f?"0"+f:f)},od=Wf,Bb=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).throttledUpdateContent=wb(G(z(z(a)),a.updateContent),25),a.on(c,"timeupdate",a.throttledUpdateContent),a}v(g,k);var f=g.prototype;return f.createEl=
function(){var c=this.buildCSSClass(),b=k.prototype.createEl.call(this,"div",{className:c+" vjs-time-control vjs-control",innerHTML:'\x3cspan class\x3d"vjs-control-text" role\x3d"presentation"\x3e'+this.localize(this.labelText_)+"\u00a0\x3c/span\x3e"});return this.contentEl_=J("span",{className:c+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),b.appendChild(this.contentEl_),b},f.dispose=function(){this.textNode_=this.contentEl_=null;k.prototype.dispose.call(this)},f.updateTextNode_=
function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=q.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)}},f.formatTime_=function(c){return tb(c)},f.updateFormattedTime_=function(c){c=this.formatTime_(c);c!==this.formattedTime_&&(this.formattedTime_=c,this.requestAnimationFrame(this.updateTextNode_))},f.updateContent=function(c){},g}(x);Bb.prototype.labelText_="Time";
Bb.prototype.controlText_="Time";x.registerComponent("TimeDisplay",Bb);var Hd=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).on(c,"ended",a.handleEnded),a}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-current-time"},f.updateContent=function(c){c=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(c)},f.handleEnded=function(c){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},
g}(Bb);Hd.prototype.labelText_="Current Time";Hd.prototype.controlText_="Current Time";x.registerComponent("CurrentTimeDisplay",Hd);var Id=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).on(c,"durationchange",a.updateContent),a.on(c,"loadstart",a.updateContent),a.on(c,"loadedmetadata",a.throttledUpdateContent),a}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-duration"},f.updateContent=function(c){c=this.player_.duration();this.duration_!==c&&(this.duration_=
c,this.updateFormattedTime_(c))},g}(Bb);Id.prototype.labelText_="Duration";Id.prototype.controlText_="Duration";x.registerComponent("DurationDisplay",Id);var bj=function(k){function g(){return k.apply(this,arguments)||this}return v(g,k),g.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"\x3cdiv\x3e\x3cspan\x3e/\x3c/span\x3e\x3c/div\x3e"},{"aria-hidden":!0})},g}(x);x.registerComponent("TimeDivider",bj);var Jd=function(k){function g(c,
b){var a;return(a=k.call(this,c,b)||this).on(c,"durationchange",a.throttledUpdateContent),a.on(c,"ended",a.handleEnded),a}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-remaining-time"},f.createEl=function(){var c=k.prototype.createEl.call(this);return c.insertBefore(J("span",{},{"aria-hidden":!0},"-"),this.contentEl_),c},f.updateContent=function(c){"number"==typeof this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):
this.updateFormattedTime_(this.player_.remainingTime()))},f.handleEnded=function(c){this.player_.duration()&&this.updateFormattedTime_(0)},g}(Bb);Jd.prototype.labelText_="Remaining Time";Jd.prototype.controlText_="Remaining Time";x.registerComponent("RemainingTimeDisplay",Jd);var cj=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).updateShowing(),a.on(a.player(),"durationchange",a.updateShowing),a}v(g,k);var f=g.prototype;return f.createEl=function(){var c=k.prototype.createEl.call(this,
"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=J("div",{className:"vjs-live-display",innerHTML:'\x3cspan class\x3d"vjs-control-text"\x3e'+this.localize("Stream Type")+"\u00a0\x3c/span\x3e"+this.localize("LIVE")},{"aria-live":"off"}),c.appendChild(this.contentEl_),c},f.dispose=function(){this.contentEl_=null;k.prototype.dispose.call(this)},f.updateShowing=function(c){this.player().duration()===1/0?this.show():this.hide()},g}(x);x.registerComponent("LiveDisplay",cj);var Xf=
function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).updateLiveEdgeStatus(),a.player_.liveTracker&&a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatus),a}v(g,k);var f=g.prototype;return f.createEl=function(){var c=k.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=J("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),c.appendChild(this.textEl_),c},f.updateLiveEdgeStatus=
function(c){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},f.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},f.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",
this.updateLiveEdgeStatus);this.textEl_=null;k.prototype.dispose.call(this)},g}(Ka);Xf.prototype.controlText_="Seek to live, currently playing live";x.registerComponent("SeekToLive",Xf);var Kd=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}v(g,k);var f=g.prototype;return f.enabled=function(){return this.enabled_},f.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",
this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},f.disable=function(){if(this.enabled()){var c=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);
this.off("blur",this.handleBlur);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(c,"mousemove",this.handleMouseMove);this.off(c,"mouseup",this.handleMouseUp);this.off(c,"touchmove",this.handleMouseMove);this.off(c,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}},f.createEl=function(c,b,a){return void 0===b&&(b={}),void 0===
a&&(a={}),b.className+=" vjs-slider",b=B({tabIndex:0},b),a=B({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),k.prototype.createEl.call(this,c,b,a)},f.handleMouseDown=function(c){var b=this.bar.el_.ownerDocument;"mousedown"===c.type&&c.preventDefault();"touchstart"!==c.type||ab||c.preventDefault();Gb();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,"mousemove",this.handleMouseMove);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchmove",
this.handleMouseMove);this.on(b,"touchend",this.handleMouseUp);this.handleMouseMove(c)},f.handleMouseMove=function(c){},f.handleMouseUp=function(){var c=this.bar.el_.ownerDocument;Hb();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(c,"mousemove",this.handleMouseMove);this.off(c,"mouseup",this.handleMouseUp);this.off(c,"touchmove",this.handleMouseMove);this.off(c,"touchend",this.handleMouseUp);this.update()},f.update=function(){if(this.el_){var c=this.getPercent(),b=this.bar;
if(b){("number"!=typeof c||c!=c||0>c||c===1/0)&&(c=0);var a=(100*c).toFixed(2)+"%";b=b.el().style;return this.vertical()?b.height=a:b.width=a,c}}},f.calculateDistance=function(c){c=$c(this.el_,c);return this.vertical()?c.y:c.x},f.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},f.handleKeyPress=function(c){H.isEventKey(c,"Left")||H.isEventKey(c,"Down")?(c.preventDefault(),this.stepBack()):H.isEventKey(c,"Right")||H.isEventKey(c,"Up")?(c.preventDefault(),this.stepForward()):
k.prototype.handleKeyPress.call(this,c)},f.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},f.handleClick=function(c){c.stopImmediatePropagation();c.preventDefault()},f.vertical=function(c){if(void 0===c)return this.vertical_||!1;(this.vertical_=!!c)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},g}(x);x.registerComponent("Slider",Kd);var dj=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).partEls_=[],a.on(c,
"progress",a.update),a}v(g,k);var f=g.prototype;return f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'\x3cspan class\x3d"vjs-control-text"\x3e\x3cspan\x3e'+this.localize("Loaded")+'\x3c/span\x3e: \x3cspan class\x3d"vjs-control-text-loaded-percentage"\x3e0%\x3c/span\x3e\x3c/span\x3e'})},f.dispose=function(){this.partEls_=null;k.prototype.dispose.call(this)},f.update=function(c){var b=this.player_.liveTracker;c=this.player_.buffered();var a=
b&&b.isLive()?b.seekableEnd():this.player_.duration(),e=this.player_.bufferedEnd();b=this.partEls_;var d=this.$(".vjs-control-text-loaded-percentage"),f=function(b,c,a){b=b/c||0;return b=100*(1<=b?1:b),a&&(b=b.toFixed(2)),b+"%"};this.el_.style.width=f(e,a);Ha(d,f(e,a,!0));for(a=0;a<c.length;a++){d=c.start(a);var g=c.end(a),k=b[a];k||(k=this.el_.appendChild(J()),b[a]=k);k.style.left=f(d,e);k.style.width=f(g-d,e)}for(e=b.length;e>c.length;e--)this.el_.removeChild(b[e-1]);b.length=c.length},g}(x);x.registerComponent("LoadProgressBar",
dj);var ej=function(k){function g(){return k.apply(this,arguments)||this}v(g,k);var f=g.prototype;return f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},f.update=function(c,b,a){var e=ca(this.el_),d=ca(this.player_.el()),f=c.width*b;d&&e&&(b=c.left-d.left+f,c=c.width-f+(d.right-c.right),d=e.width/2,b<d?d+=d-b:c<d&&(d=c),0>d?d=0:d>e.width&&(d=e.width),this.el_.style.right="-"+d+"px",Ha(this.el_,a))},f.updateTime=function(c,b,
a,e){var d=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var f=d.player_.duration();if(d.player_.liveTracker&&d.player_.liveTracker.isLive()){f=d.player_.liveTracker.liveWindow();var g=f-b*f;f=(1>g?"":"-")+tb(g,f)}else f=tb(a,f);d.update(c,b,f);e&&e()})},g}(x);x.registerComponent("TimeTooltip",ej);var Ld=function(k){function g(){return k.apply(this,arguments)||this}v(g,k);var f=g.prototype;return f.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},f.update=function(c,b){var a=this.getChild("timeTooltip");if(a){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(c,b,e)}},g}(x);Ld.prototype.options_={children:[]};Ya||mb||Ld.prototype.options_.children.push("timeTooltip");x.registerComponent("PlayProgressBar",Ld);var Yf=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).update=wb(G(z(z(a)),a.update),
25),a}v(g,k);var f=g.prototype;return f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},f.update=function(c,b){var a=this,e=b*this.player_.duration();this.getChild("timeTooltip").updateTime(c,b,e,function(){a.el_.style.left=c.width*b+"px"})},g}(x);Yf.prototype.options_={children:["timeTooltip"]};x.registerComponent("MouseTimeDisplay",Yf);var Bc=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).setEventHandlers_(),a}v(g,k);var f=g.prototype;
return f.setEventHandlers_=function(){var c=this;this.update=wb(G(this,this.update),30);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.on(this.player_,"durationchange",this.update);this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.on(this.player_,["playing"],function(){c.clearInterval(c.updateInterval);c.updateInterval=c.setInterval(function(){c.requestAnimationFrame(function(){c.update()})},
30)});this.on(this.player_,["ended","pause","waiting"],function(b){c.player_.liveTracker&&c.player_.liveTracker.isLive()&&"ended"!==b.type||c.clearInterval(c.updateInterval)});this.on(this.player_,["timeupdate","ended"],this.update)},f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},f.update_=function(c,b){var a=this.player_.liveTracker,e=this.player_.duration();a&&a.isLive()&&(e=this.player_.liveTracker.liveCurrentTime());
this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime\x3d{1} duration\x3d{2}",[tb(c,e),tb(e,e)],"{1} of {2}"));this.bar.update(ca(this.el_),b)},f.update=function(c){c=k.prototype.update.call(this);return this.update_(this.getCurrentTime_(),c),c},f.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},f.handleEnded=function(c){this.update_(this.player_.duration(),
1)},f.getPercent=function(){var c,b=this.getCurrentTime_(),a=this.player_.liveTracker;return a&&a.isLive()?(c=(b-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(c=1)):c=b/this.player_.duration(),1<=c?1:c||0},f.handleMouseDown=function(c){qb(c)&&(c.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),k.prototype.handleMouseDown.call(this,c))},f.handleMouseMove=function(c){if(qb(c)){var b;c=this.calculateDistance(c);var a=this.player_.liveTracker;
if(a&&a.isLive()){var e=a.seekableStart(),d=a.liveCurrentTime();if(d<=(b=e+c*a.liveWindow())&&(b=d),b<=e&&(b=e+.1),b===1/0)return}else(b=c*this.player_.duration())===this.player_.duration()&&(b-=.1);this.player_.currentTime(b)}},f.enable=function(){k.prototype.enable.call(this);var c=this.getChild("mouseTimeDisplay");c&&c.show()},f.disable=function(){k.prototype.disable.call(this);var c=this.getChild("mouseTimeDisplay");c&&c.hide()},f.handleMouseUp=function(c){k.prototype.handleMouseUp.call(this,
c);c&&c.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying&&Lb(this.player_.play())},f.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},f.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},f.handleAction=function(c){this.player_.paused()?this.player_.play():this.player_.pause()},f.handleKeyPress=function(c){H.isEventKey(c,"Space")||H.isEventKey(c,"Enter")?
(c.preventDefault(),this.handleAction(c)):H.isEventKey(c,"Home")?(c.preventDefault(),this.player_.currentTime(0)):H.isEventKey(c,"End")?(c.preventDefault(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(H(c))?(c.preventDefault(),c=10*(H.codes[H(c)]-H.codes[0])/100,this.player_.currentTime(this.player_.duration()*c)):H.isEventKey(c,"PgDn")?(c.preventDefault(),this.player_.currentTime(this.player_.currentTime()-60)):H.isEventKey(c,"PgUp")?(c.preventDefault(),this.player_.currentTime(this.player_.currentTime()+
60)):k.prototype.handleKeyPress.call(this,c)},g}(Kd);Bc.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Ya||mb||Bc.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Bc.prototype.playerEvent="timeupdate";x.registerComponent("SeekBar",Bc);var Zf=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).handleMouseMove=wb(G(z(z(a)),a.handleMouseMove),25),a.throttledHandleMouseSeek=wb(G(z(z(a)),a.handleMouseSeek),25),a.enable(),a}v(g,k);
var f=g.prototype;return f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},f.handleMouseMove=function(c){var b=this.getChild("seekBar");if(b){var a=b.getChild("mouseTimeDisplay"),e=b.el();b=ca(e);c=$c(e,c).x;1<c?c=1:0>c&&(c=0);a&&a.update(b,c)}},f.handleMouseSeek=function(c){var b=this.getChild("seekBar");b&&b.handleMouseMove(c)},f.enabled=function(){return this.enabled_},f.disable=function(){this.children().forEach(function(c){return c.disable&&
c.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},f.enable=function(){this.children().forEach(function(c){return c.enable&&c.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},f.handleMouseDown=function(c){var b=
this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(c);this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchend",this.handleMouseUp)},f.handleMouseUp=function(c){var b=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseUp(c);this.off(b,"mousemove",this.throttledHandleMouseSeek);this.off(b,"touchmove",this.throttledHandleMouseSeek);this.off(b,"mouseup",this.handleMouseUp);
this.off(b,"touchend",this.handleMouseUp)},g}(x);Zf.prototype.options_={children:["seekBar"]};x.registerComponent("ProgressControl",Zf);var $f=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).on(c,"fullscreenchange",a.handleFullscreenChange),!1===q[ya.fullscreenEnabled]&&a.disable(),a}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-fullscreen-control "+k.prototype.buildCSSClass.call(this)},f.handleFullscreenChange=function(c){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):
this.controlText("Fullscreen")},f.handleClick=function(c){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},g}(Ka);$f.prototype.controlText_="Fullscreen";x.registerComponent("FullscreenToggle",$f);var fj=function(k){function g(){return k.apply(this,arguments)||this}return v(g,k),g.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'\x3cspan class\x3d"vjs-control-text"\x3e\x3c/span\x3e'})},g}(x);
x.registerComponent("VolumeLevel",fj);var Md=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).on("slideractive",a.updateLastVolume_),a.on(c,"volumechange",a.updateARIAAttributes),c.ready(function(){return a.updateARIAAttributes()}),a}v(g,k);var f=g.prototype;return f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},f.handleMouseDown=function(c){qb(c)&&k.prototype.handleMouseDown.call(this,
c)},f.handleMouseMove=function(c){qb(c)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(c)))},f.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},f.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},f.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)},f.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)},f.updateARIAAttributes=function(c){c=this.player_.muted()?0:this.volumeAsPercentage_();
this.el_.setAttribute("aria-valuenow",c);this.el_.setAttribute("aria-valuetext",c+"%")},f.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},f.updateLastVolume_=function(){var c=this,b=this.player_.volume();this.one("sliderinactive",function(){0===c.player_.volume()&&c.player_.lastVolume_(b)})},g}(Kd);Md.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};Md.prototype.playerEvent="volumechange";x.registerComponent("VolumeBar",Md);var ag=function(k){function g(c,
b){var a,e;return void 0===b&&(b={}),b.vertical=b.vertical||!1,("undefined"==typeof b.volumeBar||Wa(b.volumeBar))&&(b.volumeBar=b.volumeBar||{},b.volumeBar.vertical=b.vertical),a=k.call(this,c,b)||this,e=z(z(a)),c.tech_&&!c.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(c,"loadstart",function(){c.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}),a.throttledHandleMouseMove=wb(G(z(z(a)),a.handleMouseMove),25),a.on("mousedown",a.handleMouseDown),a.on("touchstart",
a.handleMouseDown),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active");a.addClass("vjs-slider-active");a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active");a.removeClass("vjs-slider-active");a.trigger("sliderinactive")}),a}v(g,k);var f=g.prototype;return f.createEl=function(){var c="vjs-volume-horizontal";return this.options_.vertical&&(c="vjs-volume-vertical"),k.prototype.createEl.call(this,
"div",{className:"vjs-volume-control vjs-control "+c})},f.handleMouseDown=function(c){c=this.el_.ownerDocument;this.on(c,"mousemove",this.throttledHandleMouseMove);this.on(c,"touchmove",this.throttledHandleMouseMove);this.on(c,"mouseup",this.handleMouseUp);this.on(c,"touchend",this.handleMouseUp)},f.handleMouseUp=function(c){c=this.el_.ownerDocument;this.off(c,"mousemove",this.throttledHandleMouseMove);this.off(c,"touchmove",this.throttledHandleMouseMove);this.off(c,"mouseup",this.handleMouseUp);
this.off(c,"touchend",this.handleMouseUp)},f.handleMouseMove=function(c){this.volumeBar.handleMouseMove(c)},g}(x);ag.prototype.options_={children:["volumeBar"]};x.registerComponent("VolumeControl",ag);var bg=function(k){function g(c,b){var a,e;return a=k.call(this,c,b)||this,e=z(z(a)),c.tech_&&!c.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(c,"loadstart",function(){c.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}),a.on(c,["loadstart","volumechange"],a.update),
a}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-mute-control "+k.prototype.buildCSSClass.call(this)},f.handleClick=function(c){c=this.player_.volume();var b=this.player_.lastVolume_();0===c?(this.player_.volume(.1>b?.1:b),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},f.update=function(c){this.updateIcon_();this.updateControlText_()},f.updateIcon_=function(){var c=this.player_.volume(),b=3;Ya&&this.player_.muted(this.player_.tech_.el_.muted);0===c||this.player_.muted()?
b=0:.33>c?b=1:.67>c&&(b=2);for(c=0;4>c;c++)F(this.el_,"vjs-vol-"+c);Z(this.el_,"vjs-vol-"+b)},f.updateControlText_=function(){var c=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==c&&this.controlText(c)},g}(Ka);bg.prototype.controlText_="Mute";x.registerComponent("MuteToggle",bg);var cg=function(k){function g(c,b){var a;return void 0===b&&(b={}),"undefined"!=typeof b.inline?b.inline=b.inline:b.inline=!0,("undefined"==typeof b.volumeControl||Wa(b.volumeControl))&&
(b.volumeControl=b.volumeControl||{},b.volumeControl.vertical=!b.inline),(a=k.call(this,c,b)||this).on(c,["loadstart"],a.volumePanelState_),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}v(g,k);var f=g.prototype;return f.sliderActive_=function(){this.addClass("vjs-slider-active")},f.sliderInactive_=function(){this.removeClass("vjs-slider-active")},f.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&
this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},f.createEl=function(){var c="vjs-volume-panel-horizontal";return this.options_.inline||(c="vjs-volume-panel-vertical"),k.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+c})},g}(x);cg.prototype.options_={children:["muteToggle","volumeControl"]};x.registerComponent("VolumePanel",cg);var Nd=function(k){function g(c,b){var a;
return a=k.call(this,c,b)||this,b&&(a.menuButton_=b.menuButton),a.focusedChild_=-1,a.on("keydown",a.handleKeyPress),a.boundHandleBlur_=G(z(z(a)),a.handleBlur),a.boundHandleTapClick_=G(z(z(a)),a.handleTapClick),a}v(g,k);var f=g.prototype;return f.addEventListenerForItem=function(c){c instanceof x&&(c.on("blur",this.boundHandleBlur_),c.on(["tap","click"],this.boundHandleTapClick_))},f.removeEventListenerForItem=function(c){c instanceof x&&(c.off("blur",this.boundHandleBlur_),c.off(["tap","click"],this.boundHandleTapClick_))},
f.removeChild=function(c){"string"==typeof c&&(c=this.getChild(c));this.removeEventListenerForItem(c);k.prototype.removeChild.call(this,c)},f.addItem=function(c){(c=this.addChild(c))&&this.addEventListenerForItem(c)},f.createEl=function(){this.contentEl_=J(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var c=k.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.appendChild(this.contentEl_),Ja(c,"click",
function(b){b.preventDefault();b.stopImmediatePropagation()}),c},f.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;k.prototype.dispose.call(this)},f.handleBlur=function(c){var b=c.relatedTarget||q.activeElement;this.children().some(function(c){return c.el()===b})||(c=this.menuButton_)&&c.buttonPressed_&&b!==c.el().firstChild&&c.unpressButton()},f.handleTapClick=function(c){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();Array.isArray(b)&&
(b=b.filter(function(b){return b.el()===c.target})[0])&&"CaptionSettingsMenuItem"!==b.name()&&this.menuButton_.focus()}},f.handleKeyPress=function(c){H.isEventKey(c,"Left")||H.isEventKey(c,"Down")?(c.preventDefault(),this.stepForward()):(H.isEventKey(c,"Right")||H.isEventKey(c,"Up"))&&(c.preventDefault(),this.stepBack())},f.stepForward=function(){var c=0;void 0!==this.focusedChild_&&(c=this.focusedChild_+1);this.focus(c)},f.stepBack=function(){var c=0;void 0!==this.focusedChild_&&(c=this.focusedChild_-
1);this.focus(c)},f.focus=function(c){void 0===c&&(c=0);var b=this.children().slice();b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className)&&b.shift();0<b.length&&(0>c?c=0:c>=b.length&&(c=b.length-1),b[this.focusedChild_=c].el_.focus())},g}(x);x.registerComponent("Menu",Nd);var Od=function(k){function g(c,b){var a;void 0===b&&(b={});(a=k.call(this,c,b)||this).menuButton_=new Ka(c,b);a.menuButton_.controlText(a.controlText_);a.menuButton_.el_.setAttribute("aria-haspopup","true");c=Ka.prototype.buildCSSClass();
return a.menuButton_.el_.className=a.buildCSSClass()+" "+c,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0,a.on(a.menuButton_,"tap",a.handleClick),a.on(a.menuButton_,"click",a.handleClick),a.on(a.menuButton_,"focus",a.handleFocus),a.on(a.menuButton_,"blur",a.handleBlur),a.on(a.menuButton_,"mouseenter",function(){a.menu.show()}),a.on("keydown",a.handleSubmenuKeyPress),a}v(g,k);var f=g.prototype;return f.update=function(){var c=this.createMenu();this.menu&&
(this.menu.dispose(),this.removeChild(this.menu));this.menu=c;this.addChild(c);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},f.createMenu=function(){var c=new Nd(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var b=J("li",{className:"vjs-menu-title",innerHTML:U(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;b=new x(this.player_,{el:b});c.addItem(b)}if(this.items=
this.createItems(),this.items)for(b=0;b<this.items.length;b++)c.addItem(this.items[b]);return c},f.createItems=function(){},f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},f.buildWrapperCSSClass=function(){var c="vjs-menu-button";return!0===this.options_.inline?c+="-inline":c+="-popup","vjs-menu-button "+c+" "+Ka.prototype.buildCSSClass()+" "+k.prototype.buildCSSClass.call(this)},f.buildCSSClass=function(){var c="vjs-menu-button";return!0===
this.options_.inline?c+="-inline":c+="-popup","vjs-menu-button "+c+" "+k.prototype.buildCSSClass.call(this)},f.controlText=function(c,b){return void 0===b&&(b=this.menuButton_.el()),this.menuButton_.controlText(c,b)},f.handleClick=function(c){this.buttonPressed_?this.unpressButton():this.pressButton()},f.focus=function(){this.menuButton_.focus()},f.blur=function(){this.menuButton_.blur()},f.handleFocus=function(){Ja(q,"keydown",G(this,this.handleKeyPress))},f.handleBlur=function(){ma(q,"keydown",
G(this,this.handleKeyPress))},f.handleKeyPress=function(c){H.isEventKey(c,"Esc")||H.isEventKey(c,"Tab")?(this.buttonPressed_&&this.unpressButton(),H.isEventKey(c,"Tab")||(c.preventDefault(),this.menuButton_.focus())):(H.isEventKey(c,"Up")||H.isEventKey(c,"Down"))&&(this.buttonPressed_||(c.preventDefault(),this.pressButton()))},f.handleSubmenuKeyPress=function(c){(H.isEventKey(c,"Esc")||H.isEventKey(c,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),H.isEventKey(c,"Tab")||(c.preventDefault(),this.menuButton_.focus()))},
f.pressButton=function(){!this.enabled_||(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ya&&nc())||this.menu.focus()},f.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},f.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()},f.enable=function(){this.enabled_=
!0;this.removeClass("vjs-disabled");this.menuButton_.enable()},g}(x);x.registerComponent("MenuButton",Od);var Pd=function(k){function g(f,c){var b,a=c.tracks;if(1>=(b=k.call(this,f,c)||this).items.length&&b.hide(),!a)return z(b);var e=G(z(z(b)),b.update);return a.addEventListener("removetrack",e),a.addEventListener("addtrack",e),b.player_.on("ready",e),b.player_.on("dispose",function(){a.removeEventListener("removetrack",e);a.removeEventListener("addtrack",e)}),b}return v(g,k),g}(Od);x.registerComponent("TrackButton",
Pd);var gj="Tab Esc Up Down Right Left".split(" "),Yb=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).selectable=b.selectable,a.isSelected_=b.selected||!1,a.multiSelectable=b.multiSelectable,a.selected(a.isSelected_),a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem"),a}v(g,k);var f=g.prototype;return f.createEl=function(c,b,a){return this.nonIconControl=!0,k.prototype.createEl.call(this,
"li",B({className:"vjs-menu-item",innerHTML:'\x3cspan class\x3d"vjs-menu-item-text"\x3e'+this.localize(this.options_.label)+"\x3c/span\x3e",tabIndex:-1},b),a)},f.handleKeyPress=function(c){gj.some(function(b){return H.isEventKey(c,b)})||k.prototype.handleKeyPress.call(this,c)},f.handleClick=function(c){this.selected(!0)},f.selected=function(c){this.selectable&&(this.isSelected_=c?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),!0):(this.removeClass("vjs-selected"),
this.el_.setAttribute("aria-checked","false"),this.controlText(""),!1))},g}(Ac);x.registerComponent("MenuItem",Yb);var Zb=function(k){function g(c,b){var a,e=b.track,d=c.textTracks();b.label=e.label||e.language||"Unknown";b.selected="showing"===e.mode;(a=k.call(this,c,b)||this).track=e;var f,g=function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];a.handleTracksChange.apply(z(z(a)),c)},p=function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];a.handleSelectedLanguageChange.apply(z(z(a)),
c)};(c.on(["loadstart","texttrackchange"],g),d.addEventListener("change",g),d.addEventListener("selectedlanguagechange",p),a.on("dispose",function(){c.off(["loadstart","texttrackchange"],g);d.removeEventListener("change",g);d.removeEventListener("selectedlanguagechange",p)}),void 0===d.onchange)&&a.on(["tap","click"],function(){if("object"!=typeof m.Event)try{f=new m.Event("change")}catch(r){}f||(f=q.createEvent("Event")).initEvent("change",!0,!0);d.dispatchEvent(f)});return a.handleTracksChange(),
a}v(g,k);var f=g.prototype;return f.handleClick=function(c){var b=this.track,a=this.player_.textTracks();if(k.prototype.handleClick.call(this,c),a){c=(b.kinds||[b.kind]).filter(Boolean);for(var e=0;e<a.length;e++){var d=a[e];-1!==c.indexOf(d.kind)&&(d===b?"showing"!==d.mode&&(d.mode="showing"):"disabled"!==d.mode&&(d.mode="disabled"))}}},f.handleTracksChange=function(c){c="showing"===this.track.mode;c!==this.isSelected_&&this.selected(c)},f.handleSelectedLanguageChange=function(c){"showing"===this.track.mode&&
(c=this.player_.cache_.selectedLanguage,c&&c.enabled&&c.language===this.track.language&&c.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))},f.dispose=function(){this.track=null;k.prototype.dispose.call(this)},g}(Yb);x.registerComponent("TextTrackMenuItem",Zb);var dg=function(k){function g(c,b){return b.track={player:c,kind:b.kind,kinds:b.kinds,default:!1,mode:"disabled"},b.kinds||(b.kinds=[b.kind]),b.label?b.track.label=
b.label:b.track.label=b.kinds.join(" and ")+" off",b.selectable=!0,b.multiSelectable=!1,k.call(this,c,b)||this}v(g,k);var f=g.prototype;return f.handleTracksChange=function(c){c=this.player().textTracks();for(var b=!0,a=0,e=c.length;a<e;a++){var d=c[a];if(-1<this.options_.kinds.indexOf(d.kind)&&"showing"===d.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)},f.handleSelectedLanguageChange=function(c){c=this.player().textTracks();for(var b=!0,a=0,e=c.length;a<e;a++){var d=c[a];if(-1<["captions",
"descriptions","subtitles"].indexOf(d.kind)&&"showing"===d.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})},g}(Zb);x.registerComponent("OffTextTrackMenuItem",dg);var Cb=function(k){function g(f,c){return void 0===c&&(c={}),c.tracks=f.textTracks(),k.call(this,f,c)||this}return v(g,k),g.prototype.createItems=function(f,c){var b;void 0===f&&(f=[]);void 0===c&&(c=Zb);this.label_&&(b=this.label_+" off");f.push(new dg(this.player_,{kinds:this.kinds_,kind:this.kind_,label:b}));this.hideThreshold_+=
1;b=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var a=0;a<b.length;a++){var e=b[a];if(-1<this.kinds_.indexOf(e.kind)){var d=new c(this.player_,{track:e,selectable:!0,multiSelectable:!1});d.addClass("vjs-"+e.kind+"-menu-item");f.push(d)}}return f},g}(Pd);x.registerComponent("TextTrackButton",Cb);var eg=function(k){function g(c,b){var a,e=b.track,d=b.cue,f=c.currentTime();return b.selectable=!0,b.multiSelectable=!1,b.label=d.text,b.selected=d.startTime<=f&&f<
d.endTime,(a=k.call(this,c,b)||this).track=e,a.cue=d,e.addEventListener("cuechange",G(z(z(a)),a.update)),a}v(g,k);var f=g.prototype;return f.handleClick=function(c){k.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)},f.update=function(c){c=this.cue;var b=this.player_.currentTime();this.selected(c.startTime<=b&&b<c.endTime)},g}(Yb);x.registerComponent("ChaptersTrackMenuItem",eg);var Qd=function(k){function g(c,b,a){return k.call(this,c,b,
a)||this}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-chapters-button "+k.prototype.buildCSSClass.call(this)},f.buildWrapperCSSClass=function(){return"vjs-chapters-button "+k.prototype.buildWrapperCSSClass.call(this)},f.update=function(c){this.track_&&(!c||"addtrack"!==c.type&&"removetrack"!==c.type)||this.setTrack(this.findChaptersTrack());k.prototype.update.call(this)},f.setTrack=function(c){if(this.track_!==c){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),
this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=c,this.track_)this.track_.mode="hidden",(c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&c.addEventListener("load",this.updateHandler_)}},f.findChaptersTrack=function(){for(var c=this.player_.textTracks()||[],b=c.length-1;0<=b;b--){var a=c[b];if(a.kind===this.kind_)return a}},f.getMenuCaption=function(){return this.track_&&
this.track_.label?this.track_.label:this.localize(U(this.kind_))},f.createMenu=function(){return this.options_.title=this.getMenuCaption(),k.prototype.createMenu.call(this)},f.createItems=function(){var c=[];if(!this.track_)return c;var b=this.track_.cues;if(!b)return c;for(var a=0,e=b.length;a<e;a++){var d=new eg(this.player_,{track:this.track_,cue:b[a]});c.push(d)}return c},g}(Cb);Qd.prototype.kind_="chapters";Qd.prototype.controlText_="Chapters";x.registerComponent("ChaptersButton",Qd);var Rd=
function(k){function g(c,b,a){b=k.call(this,c,b,a)||this;var e=c.textTracks(),d=G(z(z(b)),b.handleTracksChange);return e.addEventListener("change",d),b.on("dispose",function(){e.removeEventListener("change",d)}),b}v(g,k);var f=g.prototype;return f.handleTracksChange=function(c){c=this.player().textTracks();for(var b=!1,a=0,e=c.length;a<e;a++){var d=c[a];if(d.kind!==this.kind_&&"showing"===d.mode){b=!0;break}}b?this.disable():this.enable()},f.buildCSSClass=function(){return"vjs-descriptions-button "+
k.prototype.buildCSSClass.call(this)},f.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+k.prototype.buildWrapperCSSClass.call(this)},g}(Cb);Rd.prototype.kind_="descriptions";Rd.prototype.controlText_="Descriptions";x.registerComponent("DescriptionsButton",Rd);var Sd=function(k){function g(c,b,a){return k.call(this,c,b,a)||this}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-subtitles-button "+k.prototype.buildCSSClass.call(this)},f.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+
k.prototype.buildWrapperCSSClass.call(this)},g}(Cb);Sd.prototype.kind_="subtitles";Sd.prototype.controlText_="Subtitles";x.registerComponent("SubtitlesButton",Sd);var Td=function(k){function g(f,c){var b;return c.track={player:f,kind:c.kind,label:c.kind+" settings",selectable:!1,default:!1,mode:"disabled"},c.selectable=!1,c.name="CaptionSettingsMenuItem",(b=k.call(this,f,c)||this).addClass("vjs-texttrack-settings"),b.controlText(", opens "+c.kind+" settings dialog"),b}return v(g,k),g.prototype.handleClick=
function(f){this.player().getChild("textTrackSettings").open()},g}(Zb);x.registerComponent("CaptionSettingsMenuItem",Td);var Ud=function(k){function g(c,b,a){return k.call(this,c,b,a)||this}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-captions-button "+k.prototype.buildCSSClass.call(this)},f.buildWrapperCSSClass=function(){return"vjs-captions-button "+k.prototype.buildWrapperCSSClass.call(this)},f.createItems=function(){var c=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||
!this.player().getChild("textTrackSettings")||(c.push(new Td(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),k.prototype.createItems.call(this,c)},g}(Cb);Ud.prototype.kind_="captions";Ud.prototype.controlText_="Captions";x.registerComponent("CaptionsButton",Ud);var fg=function(k){function g(){return k.apply(this,arguments)||this}return v(g,k),g.prototype.createEl=function(f,c,b){var a='\x3cspan class\x3d"vjs-menu-item-text"\x3e'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&
(a+='\n        \x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"vjs-control-text"\x3e '+this.localize("Captions")+"\x3c/span\x3e\n      "),a+="\x3c/span\x3e",k.prototype.createEl.call(this,f,B({innerHTML:a},c),b)},g}(Zb);x.registerComponent("SubsCapsMenuItem",fg);var Vd=function(k){function g(c,b){var a;return void 0===b&&(b={}),(a=k.call(this,c,b)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)&&(a.label_=
"captions"),a.menuButton_.controlText(U(a.label_)),a}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-subs-caps-button "+k.prototype.buildCSSClass.call(this)},f.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+k.prototype.buildWrapperCSSClass.call(this)},f.createItems=function(){var c=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(c.push(new Td(this.player_,{kind:this.label_})),this.hideThreshold_+=
1),k.prototype.createItems.call(this,c,fg)},g}(Cb);Vd.prototype.kinds_=["captions","subtitles"];Vd.prototype.controlText_="Subtitles";x.registerComponent("SubsCapsButton",Vd);var gg=function(k){function g(c,b){var a,e=b.track,d=c.audioTracks();b.label=e.label||e.language||"Unknown";b.selected=e.enabled;(a=k.call(this,c,b)||this).track=e;a.addClass("vjs-"+e.kind+"-menu-item");var f=function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];a.handleTracksChange.apply(z(z(a)),c)};
return d.addEventListener("change",f),a.on("dispose",function(){d.removeEventListener("change",f)}),a}v(g,k);var f=g.prototype;return f.createEl=function(c,b,a){var e='\x3cspan class\x3d"vjs-menu-item-text"\x3e'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(e+='\n        \x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"vjs-control-text"\x3e '+this.localize("Descriptions")+"\x3c/span\x3e\n      "),e+="\x3c/span\x3e",
k.prototype.createEl.call(this,c,B({innerHTML:e},b),a)},f.handleClick=function(c){var b=this.player_.audioTracks();k.prototype.handleClick.call(this,c);for(c=0;c<b.length;c++){var a=b[c];a.enabled=a===this.track}},f.handleTracksChange=function(c){this.selected(this.track.enabled)},g}(Yb);x.registerComponent("AudioTrackMenuItem",gg);var hg=function(k){function g(c,b){return void 0===b&&(b={}),b.tracks=c.audioTracks(),k.call(this,c,b)||this}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-audio-button "+
k.prototype.buildCSSClass.call(this)},f.buildWrapperCSSClass=function(){return"vjs-audio-button "+k.prototype.buildWrapperCSSClass.call(this)},f.createItems=function(c){void 0===c&&(c=[]);this.hideThreshold_=1;for(var b=this.player_.audioTracks(),a=0;a<b.length;a++)c.push(new gg(this.player_,{track:b[a],selectable:!0,multiSelectable:!1}));return c},g}(Pd);hg.prototype.controlText_="Audio Track";x.registerComponent("AudioTrackButton",hg);var Wd=function(k){function g(c,b){var a,e=b.rate,d=parseFloat(e,
10);return b.label=e,b.selected=1===d,b.selectable=!0,b.multiSelectable=!1,(a=k.call(this,c,b)||this).label=e,a.rate=d,a.on(c,"ratechange",a.update),a}v(g,k);var f=g.prototype;return f.handleClick=function(c){k.prototype.handleClick.call(this);this.player().playbackRate(this.rate)},f.update=function(c){this.selected(this.player().playbackRate()===this.rate)},g}(Yb);Wd.prototype.contentElType="button";x.registerComponent("PlaybackRateMenuItem",Wd);var ig=function(k){function g(c,b){var a;return(a=
k.call(this,c,b)||this).updateVisibility(),a.updateLabel(),a.on(c,"loadstart",a.updateVisibility),a.on(c,"ratechange",a.updateLabel),a}v(g,k);var f=g.prototype;return f.createEl=function(){var c=k.prototype.createEl.call(this);return this.labelEl_=J("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),c.appendChild(this.labelEl_),c},f.dispose=function(){this.labelEl_=null;k.prototype.dispose.call(this)},f.buildCSSClass=function(){return"vjs-playback-rate "+k.prototype.buildCSSClass.call(this)},
f.buildWrapperCSSClass=function(){return"vjs-playback-rate "+k.prototype.buildWrapperCSSClass.call(this)},f.createMenu=function(){var c=new Nd(this.player()),b=this.playbackRates();if(b)for(var a=b.length-1;0<=a;a--)c.addChild(new Wd(this.player(),{rate:b[a]+"x"}));return c},f.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},f.handleClick=function(c){c=this.player().playbackRate();for(var b=this.playbackRates(),a=b[0],e=0;e<b.length;e++)if(b[e]>
c){a=b[e];break}this.player().playbackRate(a)},f.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},f.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},f.updateVisibility=function(c){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},f.updateLabel=function(c){this.playbackRateSupported()&&
(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},g}(Od);ig.prototype.controlText_="Playback Rate";x.registerComponent("PlaybackRateMenuButton",ig);var jg=function(k){function g(){return k.apply(this,arguments)||this}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-spacer "+k.prototype.buildCSSClass.call(this)},f.createEl=function(){return k.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},g}(x);x.registerComponent("Spacer",jg);var hj=function(k){function g(){return k.apply(this,
arguments)||this}v(g,k);var f=g.prototype;return f.buildCSSClass=function(){return"vjs-custom-control-spacer "+k.prototype.buildCSSClass.call(this)},f.createEl=function(){var c=k.prototype.createEl.call(this,{className:this.buildCSSClass()});return c.innerHTML="\u00a0",c},g}(jg);x.registerComponent("CustomControlSpacer",hj);var kg=function(k){function g(){return k.apply(this,arguments)||this}return v(g,k),g.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-control-bar",
dir:"ltr"})},g}(x);kg.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};x.registerComponent("ControlBar",kg);var lg=function(k){function g(c,b){var a;return(a=k.call(this,c,b)||this).on(c,"error",a.open),a}v(g,k);var f=g.prototype;return f.buildCSSClass=
function(){return"vjs-error-display "+k.prototype.buildCSSClass.call(this)},f.content=function(){var c=this.player().error();return c?this.localize(c.message):""},g}(yb);lg.prototype.options_=Q(yb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});x.registerComponent("ErrorDisplay",lg);var mg=["#000","Black"],ng=["#00F","Blue"],og=["#0FF","Cyan"],pg=["#0F0","Green"],qg=["#F0F","Magenta"],rg=["#F00","Red"],sg=["#FFF","White"],tg=["#FF0","Yellow"],Xd=["1","Opaque"],Yd=["0.5",
"Semi-Transparent"],ug=["0","Transparent"],Za={backgroundColor:{selector:".vjs-bg-color \x3e select",id:"captions-background-color-%s",label:"Color",options:[mg,sg,rg,pg,ng,tg,qg,og]},backgroundOpacity:{selector:".vjs-bg-opacity \x3e select",id:"captions-background-opacity-%s",label:"Transparency",options:[Xd,Yd,ug]},color:{selector:".vjs-fg-color \x3e select",id:"captions-foreground-color-%s",label:"Color",options:[sg,mg,rg,pg,ng,tg,qg,og]},edgeStyle:{selector:".vjs-edge-style \x3e select",id:"%s",
label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family \x3e select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},
fontPercent:{selector:".vjs-font-percent \x3e select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(k){return"1.00"===k?null:Number(k)}},textOpacity:{selector:".vjs-text-opacity \x3e select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Xd,Yd]},windowColor:{selector:".vjs-window-color \x3e select",id:"captions-window-color-%s",
label:"Color"},windowOpacity:{selector:".vjs-window-opacity \x3e select",id:"captions-window-opacity-%s",label:"Transparency",options:[ug,Yd,Xd]}};Za.windowColor.options=Za.backgroundColor.options;var ij=function(k){function g(c,b){var a;return b.temporary=!1,(a=k.call(this,c,b)||this).updateDisplay=G(z(z(a)),a.updateDisplay),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=J("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),
a.setDefaults(),void 0===b.persistTextTrackSettings&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings();a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults();a.updateDisplay()}),M(Za,function(b){a.on(a.$(b.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}v(g,k);var f=g.prototype;return f.dispose=function(){this.endDialog=null;
k.prototype.dispose.call(this)},f.createElSelect_=function(c,b,a){var e=this;void 0===b&&(b="");void 0===a&&(a="label");c=Za[c];var d=c.id.replace("%s",this.id_),f=[b,d].join(" ").trim();return["\x3c"+a+' id\x3d"'+d+'" class\x3d"'+("label"===a?"vjs-label":"")+'"\x3e',this.localize(c.label),"\x3c/"+a+"\x3e",'\x3cselect aria-labelledby\x3d"'+f+'"\x3e'].concat(c.options.map(function(b){var c=d+"-"+b[1].replace(/\W+/g,"");return['\x3coption id\x3d"'+c+'" value\x3d"'+b[0]+'" ','aria-labelledby\x3d"'+f+
" "+c+'"\x3e',e.localize(b[1]),"\x3c/option\x3e"].join("")})).concat("\x3c/select\x3e").join("")},f.createElFgColor_=function(){var c="captions-text-legend-"+this.id_;return['\x3cfieldset class\x3d"vjs-fg-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+c+'"\x3e',this.localize("Text"),"\x3c/legend\x3e",this.createElSelect_("color",c),'\x3cspan class\x3d"vjs-text-opacity vjs-opacity"\x3e',this.createElSelect_("textOpacity",c),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")},f.createElBgColor_=function(){var c=
"captions-background-"+this.id_;return['\x3cfieldset class\x3d"vjs-bg-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+c+'"\x3e',this.localize("Background"),"\x3c/legend\x3e",this.createElSelect_("backgroundColor",c),'\x3cspan class\x3d"vjs-bg-opacity vjs-opacity"\x3e',this.createElSelect_("backgroundOpacity",c),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")},f.createElWinColor_=function(){var c="captions-window-"+this.id_;return['\x3cfieldset class\x3d"vjs-window-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+
c+'"\x3e',this.localize("Window"),"\x3c/legend\x3e",this.createElSelect_("windowColor",c),'\x3cspan class\x3d"vjs-window-opacity vjs-opacity"\x3e',this.createElSelect_("windowOpacity",c),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")},f.createElColors_=function(){return J("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},f.createElFont_=function(){return J("div",{className:"vjs-track-settings-font",innerHTML:['\x3cfieldset class\x3d"vjs-font-percent vjs-track-setting"\x3e',
this.createElSelect_("fontPercent","","legend"),'\x3c/fieldset\x3e\x3cfieldset class\x3d"vjs-edge-style vjs-track-setting"\x3e',this.createElSelect_("edgeStyle","","legend"),'\x3c/fieldset\x3e\x3cfieldset class\x3d"vjs-font-family vjs-track-setting"\x3e',this.createElSelect_("fontFamily","","legend"),"\x3c/fieldset\x3e"].join("")})},f.createElControls_=function(){var c=this.localize("restore all settings to the default values");return J("div",{className:"vjs-track-settings-controls",innerHTML:['\x3cbutton type\x3d"button" class\x3d"vjs-default-button" title\x3d"'+
c+'"\x3e',this.localize("Reset"),'\x3cspan class\x3d"vjs-control-text"\x3e '+c+"\x3c/span\x3e","\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"vjs-done-button"\x3e'+this.localize("Done")+"\x3c/button\x3e"].join("")})},f.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},f.label=function(){return this.localize("Caption Settings Dialog")},f.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},
f.buildCSSClass=function(){return k.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},f.getValues=function(){var c,b,a=this;return c=function(b,c,f){var d,e;c=(d=a.$(c.selector),e=c.parser,ff(d.options[d.options.selectedIndex].value,e));return void 0!==c&&(b[f]=c),b},void 0===(b={})&&(b=0),Me(Za).reduce(function(b,a){return c(b,Za[a],a)},b)},f.setValues=function(c){var b=this;M(Za,function(a,f){var d=b.$(a.selector);f=c[f];a=a.parser;if(f)for(var e=0;e<d.options.length;e++)if(ff(d.options[e].value,
a)===f){d.selectedIndex=e;break}!0})},f.setDefaults=function(){var c=this;M(Za,function(b){var a=b.hasOwnProperty("default")?b.default:0;c.$(b.selector).selectedIndex=a})},f.restoreSettings=function(){try{var c=JSON.parse(m.localStorage.getItem("vjs-text-track-settings"))}catch(b){K.warn(b)}c&&this.setValues(c)},f.saveSettings=function(){if(this.options_.persistTextTrackSettings){var c=this.getValues();try{Object.keys(c).length?m.localStorage.setItem("vjs-text-track-settings",JSON.stringify(c)):m.localStorage.removeItem("vjs-text-track-settings")}catch(b){K.warn(b)}}},
f.updateDisplay=function(){var c=this.player_.getChild("textTrackDisplay");c&&c.updateDisplay()},f.conditionalBlur_=function(){this.previouslyActiveEl_=null;this.off(q,"keydown",this.handleKeyDown);var c=this.player_.controlBar,b=c&&c.subsCapsButton;c=c&&c.captionsButton;b?b.focus():c&&c.focus()},g}(yb);x.registerComponent("TextTrackSettings",ij);var jj=function(k){function g(c,b){var a,f=b.ResizeObserver||m.ResizeObserver;null===b.ResizeObserver&&(f=!1);var d=Q({createEl:!f,reportTouchActivity:!1},
b);return(a=k.call(this,c,d)||this).ResizeObserver=b.ResizeObserver||m.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=function(b,c,a,d){var f;void 0===d&&(d=m);var e=function(){var e=this,g=arguments,h=function(){h=f=null;a||b.apply(e,g)};!f&&a&&b.apply(e,g);d.clearTimeout(f);f=d.setTimeout(h,c)};return e.cancel=function(){d.clearTimeout(f);f=null},e}(function(){a.resizeHandler()},100,!1,z(z(a))),f?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(c.el())):
(a.loadListener_=function(){a.el_&&a.el_.contentWindow&&Ja(a.el_.contentWindow,"resize",a.debouncedHandler_)},a.one("load",a.loadListener_)),a}v(g,k);var f=g.prototype;return f.createEl=function(){return k.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},f.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},f.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&
(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.el_&&this.el_.contentWindow&&ma(this.el_.contentWindow,"resize",this.debouncedHandler_);this.loadListener_&&this.off("load",this.loadListener_);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null},g}(x);x.registerComponent("ResizeManager",jj);var kj=function(k){function g(c,b){var a;b=Q({createEl:!1},b);return(a=k.call(this,c,b)||this).reset_(),a.on(a.player_,
"durationchange",a.handleDurationchange),a}v(g,k);var f=g.prototype;return f.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var c=this.liveCurrentTime(),b=this.player_.currentTime(),a=this.seekableIncrement_;return c!==1/0&&b<=c-(2*a+.07)},f.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var c=this.player_.seekable();c&&c.length&&(c=this.seekableEnd(),c!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrement_=Math.abs(c-this.lastSeekEnd_)),this.pastSeekEnd_=0,this.lastSeekEnd_=
c,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange")))},f.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},f.startTracking=function(){var c=this;this.isTracking()||(this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,
"pause",this.trackLive_),this.one(this.player_,"play",this.handlePlay),this.timeupdateSeen_||(this.handleTimeupdate=function(){c.timeupdateSeen_=!0;c.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},f.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},f.reset_=function(){this.pastSeekEnd_=0;this.behindLiveEdge_=this.lastSeekEnd_=null;this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.seekableIncrement_=
12;this.off(this.player_,"play",this.trackLive_);this.off(this.player_,"pause",this.trackLive_);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.seekToLiveEdge);this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},f.stopTracking=function(){this.isTracking()&&this.reset_()},f.seekableEnd=function(){for(var c=this.player_.seekable(),b=[],a=c?c.length:0;a--;)b.push(c.end(a));return b.length?b.sort()[b.length-
1]:1/0},f.seekableStart=function(){for(var c=this.player_.seekable(),b=[],a=c?c.length:0;a--;)b.push(c.start(a));return b.length?b.sort()[0]:0},f.liveWindow=function(){var c=this.liveCurrentTime();return c===1/0?1/0:c-this.seekableStart()},f.isLive=function(){return this.isTracking()},f.atLiveEdge=function(){return!this.behindLiveEdge()},f.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},f.pastSeekEnd=function(){return this.pastSeekEnd_},f.behindLiveEdge=function(){return this.behindLiveEdge_},
f.isTracking=function(){return"number"==typeof this.trackingInterval_},f.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},f.dispose=function(){this.stopTracking();k.prototype.dispose.call(this)},g}(x);x.registerComponent("LiveTracker",kj);var Zd=function(k){var g=k.el();if(g.hasAttribute("src"))return k.triggerSourceset(g.src),!0;g=k.$$("source");var f=[],c="";if(!g.length)return!1;for(var b=0;b<g.length;b++){var a=
g[b].src;a&&-1===f.indexOf(a)&&f.push(a)}return!!f.length&&(1===f.length&&(c=f[0]),k.triggerSourceset(c),!0)},lj=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(k){var g=q.createElement(this.nodeName.toLowerCase());g.innerHTML=k;for(k=q.createDocumentFragment();g.childNodes.length;)k.appendChild(g.childNodes[0]);return this.innerText="",m.Element.prototype.appendChild.call(this,k),this.innerHTML}}),vg=function(k,g){for(var f={},c=0;c<k.length&&
!((f=Object.getOwnPropertyDescriptor(k[c],g))&&f.set&&f.get);c++);return f.enumerable=!0,f.configurable=!0,f},wg=function(k){var g=k.el();if(!g.resetSourceWatch_){var f={},c=vg([k.el(),m.HTMLMediaElement.prototype,m.Element.prototype,lj],"innerHTML"),b=function(b){return function(){for(var c=arguments.length,a=Array(c),f=0;f<c;f++)a[f]=arguments[f];c=b.apply(g,a);return Zd(k),c}};["append","appendChild","insertAdjacentHTML"].forEach(function(c){g[c]&&(f[c]=g[c],g[c]=b(f[c]))});Object.defineProperty(g,
"innerHTML",Q(c,{set:b(c.set)}));g.resetSourceWatch_=function(){g.resetSourceWatch_=null;Object.keys(f).forEach(function(b){g[b]=f[b]});Object.defineProperty(g,"innerHTML",c)};k.one("sourceset",g.resetSourceWatch_)}},mj=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Mf(m.Element.prototype.getAttribute.call(this,"src")):""},set:function(k){return m.Element.prototype.setAttribute.call(this,"src",k),k}}),nj=function(k){if(k.featuresSourceset){var g=k.el();if(!g.resetSourceset_){var f=
vg([k.el(),m.HTMLMediaElement.prototype,mj],"src"),c=g.setAttribute,b=g.load;Object.defineProperty(g,"src",Q(f,{set:function(b){b=f.set.call(g,b);return k.triggerSourceset(g.src),b}}));g.setAttribute=function(b,f){f=c.call(g,b,f);return/src/i.test(b)&&k.triggerSourceset(g.src),f};g.load=function(){var c=b.call(g);return Zd(k)||(k.triggerSourceset(""),wg(k)),c};g.currentSrc?k.triggerSourceset(g.currentSrc):Zd(k)||wg(k);g.resetSourceset_=function(){g.resetSourceset_=null;g.load=b;g.setAttribute=c;Object.defineProperty(g,
"src",f);g.resetSourceWatch_&&g.resetSourceWatch_()}}}},A=function(k){function g(c,b){b=k.call(this,c,b)||this;var a=c.source,f=!1;if(a&&(b.el_.currentSrc!==a.src||c.tag&&3===c.tag.initNetworkState_)?b.setSource(a):b.handleLateInit_(b.el_),c.enableSourceset&&b.setupSourcesetHandling_(),b.el_.hasChildNodes()){var d=b.el_.childNodes,g=d.length;for(a=[];g--;){var l=d[g];"track"===l.nodeName.toLowerCase()&&(b.featuresNativeTextTracks?(b.remoteTextTrackEls().addTrackElement_(l),b.remoteTextTracks().addTrack(l.track),
b.textTracks().addTrack(l.track),f||b.el_.hasAttribute("crossorigin")||!zc(l.src)||(f=!0)):a.push(l))}for(d=0;d<a.length;d++)b.el_.removeChild(a[d])}return b.proxyNativeTracks_(),b.featuresNativeTextTracks&&f&&K.warn(Yc(gf())),b.restoreMetadataTracksInIOSNativePlayer_(),(Tb||yd||zf)&&!0===c.nativeControlsForTouch&&b.setControls(!0),b.proxyWebkitFullscreen_(),b.triggerReady(),b}v(g,k);var f=g.prototype;return f.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();g.disposeMediaElement(this.el_);
this.options_=null;k.prototype.dispose.call(this)},f.setupSourcesetHandling_=function(){nj(this)},f.restoreMetadataTracksInIOSNativePlayer_=function(){var c,b=this.textTracks(),a=function(){c=[];for(var a=0;a<b.length;a++){var f=b[a];"metadata"===f.kind&&c.push({track:f,storedMode:f.mode})}};a();b.addEventListener("change",a);this.on("dispose",function(){return b.removeEventListener("change",a)});var f=function h(){for(var a=0;a<c.length;a++){var f=c[a];"disabled"===f.track.mode&&f.track.mode!==f.storedMode&&
(f.track.mode=f.storedMode)}b.removeEventListener("change",h)};this.on("webkitbeginfullscreen",function(){b.removeEventListener("change",a);b.removeEventListener("change",f);b.addEventListener("change",f)});this.on("webkitendfullscreen",function(){b.removeEventListener("change",a);b.addEventListener("change",a);b.removeEventListener("change",f)})},f.overrideNative_=function(c,b){var a=this;if(b===this["featuresNative"+c+"Tracks"]){var f=c.toLowerCase();this[f+"TracksListeners_"]&&Object.keys(this[f+
"TracksListeners_"]).forEach(function(b){a.el()[f+"Tracks"].removeEventListener(b,a[f+"TracksListeners_"][b])});this["featuresNative"+c+"Tracks"]=!b;this[f+"TracksListeners_"]=null;this.proxyNativeTracksForType_(f)}},f.overrideNativeAudioTracks=function(c){this.overrideNative_("Audio",c)},f.overrideNativeVideoTracks=function(c){this.overrideNative_("Video",c)},f.proxyNativeTracksForType_=function(c){var b=this;c=za[c];var a=this.el()[c.getterName],f=this[c.getterName]();if(this["featuresNative"+c.capitalName+
"Tracks"]&&a&&a.addEventListener){var d={change:function(b){f.trigger({type:"change",target:f,currentTarget:f,srcElement:f})},addtrack:function(b){f.addTrack(b.track)},removetrack:function(b){f.removeTrack(b.track)}},g=function(){for(var b=[],c=0;c<f.length;c++){for(var d=!1,e=0;e<a.length;e++)if(a[e]===f[c]){d=!0;break}d||b.push(f[c])}for(;b.length;)f.removeTrack(b.shift())};this[c.getterName+"Listeners_"]=d;Object.keys(d).forEach(function(c){var f=d[c];a.addEventListener(c,f);b.on("dispose",function(b){return a.removeEventListener(c,
f)})});this.on("loadstart",g);this.on("dispose",function(c){return b.off("loadstart",g)})}},f.proxyNativeTracks_=function(){var c=this;za.names.forEach(function(b){c.proxyNativeTracksForType_(b)})},f.createEl=function(){var c=this.options_.tag;if(!c||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(c){var b=c.cloneNode(!0);c.parentNode&&c.parentNode.insertBefore(b,c);g.disposeMediaElement(c);c=b}else c=q.createElement("video"),b=Q({},this.options_.tag&&ba(this.options_.tag)),Tb&&!0===
this.options_.nativeControlsForTouch||delete b.controls,qc(c,B(b,{id:this.options_.techId,class:"vjs-tech"}));c.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&c.setAttribute("preload",this.options_.preload);b=["loop","muted","playsinline","autoplay"];for(var a=0;a<b.length;a++){var f=b[a],d=this.options_[f];"undefined"!=typeof d&&(d?c.setAttribute(f,f):c.removeAttribute(f),c[f]=d)}return c},f.handleLateInit_=function(c){if(0!==c.networkState&&3!==c.networkState){if(0===
c.readyState){var b=!1,a=function(){b=!0};this.on("loadstart",a);var f=function(){b||this.trigger("loadstart")};return this.on("loadedmetadata",f),void this.ready(function(){this.off("loadstart",a);this.off("loadedmetadata",f);b||this.trigger("loadstart")})}var d=["loadstart"];d.push("loadedmetadata");2<=c.readyState&&d.push("loadeddata");3<=c.readyState&&d.push("canplay");4<=c.readyState&&d.push("canplaythrough");this.ready(function(){d.forEach(function(b){this.trigger(b)},this)})}},f.setCurrentTime=
function(c){try{this.el_.currentTime=c}catch(b){K(b,"Video is not ready. (Video.js)")}},f.duration=function(){var c=this;return this.el_.duration===1/0&&mb&&ab&&0===this.el_.currentTime?(this.on("timeupdate",function a(){0<c.el_.currentTime&&(c.el_.duration===1/0&&c.trigger("durationchange"),c.off("timeupdate",a))}),NaN):this.el_.duration||NaN},f.width=function(){return this.el_.offsetWidth},f.height=function(){return this.el_.offsetHeight},f.proxyWebkitFullscreen_=function(){var c=this;if("webkitDisplayingFullscreen"in
this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},a=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",a);this.on("dispose",function(){c.off("webkitbeginfullscreen",a);c.off("webkitendfullscreen",b)})}},f.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var c=m.navigator&&
m.navigator.userAgent||"";if(/Android/.test(c)||!/Chrome|Mac OS X 10.5/.test(c))return!0}return!1},f.enterFullScreen=function(){var c=this.el_;c.paused&&c.networkState<=c.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){c.pause();c.webkitEnterFullScreen()},0)):c.webkitEnterFullScreen()},f.exitFullScreen=function(){this.el_.webkitExitFullScreen()},f.src=function(c){if(void 0===c)return this.el_.src;this.setSrc(c)},f.reset=function(){g.resetMediaElement(this.el_)},f.currentSrc=function(){return this.currentSource_?
this.currentSource_.src:this.el_.currentSrc},f.setControls=function(c){this.el_.controls=!!c},f.addTextTrack=function(c,b,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(c,b,a):k.prototype.addTextTrack.call(this,c,b,a)},f.createRemoteTextTrack=function(c){if(!this.featuresNativeTextTracks)return k.prototype.createRemoteTextTrack.call(this,c);var b=q.createElement("track");return c.kind&&(b.kind=c.kind),c.label&&(b.label=c.label),(c.language||c.srclang)&&(b.srclang=c.language||c.srclang),
c.default&&(b.default=c.default),c.id&&(b.id=c.id),c.src&&(b.src=c.src),b},f.addRemoteTextTrack=function(c,b){c=k.prototype.addRemoteTextTrack.call(this,c,b);return this.featuresNativeTextTracks&&this.el().appendChild(c),c},f.removeRemoteTextTrack=function(c){if(k.prototype.removeRemoteTextTrack.call(this,c),this.featuresNativeTextTracks)for(var b=this.$$("track"),a=b.length;a--;)c!==b[a]&&c!==b[a].track||this.el().removeChild(b[a])},f.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();
var c={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(c.droppedVideoFrames=this.el().webkitDroppedFrameCount,c.totalVideoFrames=this.el().webkitDecodedFrameCount),m.performance&&"function"==typeof m.performance.now?c.creationTime=m.performance.now():m.performance&&m.performance.timing&&"number"==typeof m.performance.timing.navigationStart&&(c.creationTime=m.Date.now()-m.performance.timing.navigationStart),c},g}(R);if(Ga()){A.TEST_VID=
q.createElement("video");var Cc=q.createElement("track");Cc.kind="captions";Cc.srclang="en";Cc.label="English";A.TEST_VID.appendChild(Cc)}A.isSupported=function(){try{A.TEST_VID.volume=.5}catch(k){return!1}return!(!A.TEST_VID||!A.TEST_VID.canPlayType)};A.canPlayType=function(k){return A.TEST_VID.canPlayType(k)};A.canPlaySource=function(k,g){return A.canPlayType(k.type)};A.canControlVolume=function(){try{var k=A.TEST_VID.volume;return A.TEST_VID.volume=k/2+.1,k!==A.TEST_VID.volume}catch(g){return!1}};
A.canMuteVolume=function(){try{var k=A.TEST_VID.muted;A.TEST_VID.muted=!k;A.TEST_VID.muted?A.TEST_VID.setAttribute("muted","muted"):A.TEST_VID.removeAttribute("muted");return k!==A.TEST_VID.muted}catch(g){return!1}};A.canControlPlaybackRate=function(){if(mb&&ab&&58>Bf)return!1;try{var k=A.TEST_VID.playbackRate;return A.TEST_VID.playbackRate=k/2+.1,k!==A.TEST_VID.playbackRate}catch(g){return!1}};A.canOverrideAttributes=function(){try{var k=function(){};Object.defineProperty(q.createElement("video"),
"src",{get:k,set:k});Object.defineProperty(q.createElement("audio"),"src",{get:k,set:k});Object.defineProperty(q.createElement("video"),"innerHTML",{get:k,set:k});Object.defineProperty(q.createElement("audio"),"innerHTML",{get:k,set:k})}catch(g){return!1}return!0};A.supportsNativeTextTracks=function(){return Ef||Ya&&ab};A.supportsNativeVideoTracks=function(){return!(!A.TEST_VID||!A.TEST_VID.videoTracks)};A.supportsNativeAudioTracks=function(){return!(!A.TEST_VID||!A.TEST_VID.audioTracks)};A.Events=
"loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");A.prototype.featuresVolumeControl=A.canControlVolume();A.prototype.featuresMuteControl=A.canMuteVolume();A.prototype.featuresPlaybackRate=A.canControlPlaybackRate();A.prototype.featuresSourceset=A.canOverrideAttributes();A.prototype.movingMediaElementInDOM=!Ya;A.prototype.featuresFullscreenResize=
!0;A.prototype.featuresProgressEvents=!0;A.prototype.featuresTimeupdateEvents=!0;A.prototype.featuresNativeTextTracks=A.supportsNativeTextTracks();A.prototype.featuresNativeVideoTracks=A.supportsNativeVideoTracks();A.prototype.featuresNativeAudioTracks=A.supportsNativeAudioTracks();var xg=A.TEST_VID&&A.TEST_VID.constructor.prototype.canPlayType,oj=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;A.patchCanPlayType=function(){4<=zd&&!Af&&!ab&&(A.TEST_VID.constructor.prototype.canPlayType=function(k){return k&&
oj.test(k)?"maybe":xg.call(this,k)})};A.unpatchCanPlayType=function(){var k=A.TEST_VID.constructor.prototype.canPlayType;return A.TEST_VID.constructor.prototype.canPlayType=xg,k};A.patchCanPlayType();A.disposeMediaElement=function(k){if(k){for(k.parentNode&&k.parentNode.removeChild(k);k.hasChildNodes();)k.removeChild(k.firstChild);k.removeAttribute("src");if("function"==typeof k.load)try{k.load()}catch(g){}}};A.resetMediaElement=function(k){if(k){for(var g=k.querySelectorAll("source"),f=g.length;f--;)k.removeChild(g[f]);
k.removeAttribute("src");if("function"==typeof k.load)try{k.load()}catch(c){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(k){A.prototype[k]=function(){return this.el_[k]||this.el_.hasAttribute(k)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(k){A.prototype["set"+U(k)]=function(g){(this.el_[k]=g)?this.el_.setAttribute(k,k):this.el_.removeAttribute(k)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight".split(" ").forEach(function(k){A.prototype[k]=
function(){return this.el_[k]}});"volume src poster preload playbackRate defaultPlaybackRate".split(" ").forEach(function(k){A.prototype["set"+U(k)]=function(g){this.el_[k]=g}});["pause","load","play"].forEach(function(k){A.prototype[k]=function(){return this.el_[k]()}});R.withSourceHandlers(A);A.nativeSourceHandler={};A.nativeSourceHandler.canPlayType=function(k){try{return A.TEST_VID.canPlayType(k)}catch(g){return""}};A.nativeSourceHandler.canHandleSource=function(k,g){return k.type?A.nativeSourceHandler.canPlayType(k.type):
k.src?(k=Gd(k.src),A.nativeSourceHandler.canPlayType("video/"+k)):""};A.nativeSourceHandler.handleSource=function(k,g,f){g.setSrc(k.src)};A.nativeSourceHandler.dispose=function(){};A.registerSourceHandler(A.nativeSourceHandler);R.registerTech("Html5",A);var yg="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),$d={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ae="tiny xsmall small medium large xlarge huge".split(" "),
Dc={};ae.forEach(function(k){var g="x"===k.charAt(0)?"x-"+k.substring(1):k;Dc[k]="vjs-layout-"+g});var pj={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ea=function(k){function g(c,b,a){var f;if(c.id=c.id||b.id||"vjs_video_"+ib++,(b=B(g.getTagSettings(c),b)).initChildren=!1,b.createEl=!1,b.evented=!1,b.reportTouchActivity=!1,!b.language)if("function"==typeof c.closest){var d=c.closest("[lang]");d&&d.getAttribute&&(b.language=d.getAttribute("lang"))}else for(d=c;d&&1===
d.nodeType;){if(ba(d).hasOwnProperty("lang")){b.language=d.getAttribute("lang");break}d=d.parentNode}if((f=k.call(this,null,b,a)||this).log=of(f.id_),f.isPosterFromTech_=!1,f.queuedCallbacks_=[],f.isReady_=!1,f.hasStarted_=!1,f.userActive_=!1,!f.options_||!f.options_.techOrder||!f.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(f.tag=c,f.tagAttributes=c&&ba(c),f.language(f.options_.language),
b.languages){var h={};Object.getOwnPropertyNames(b.languages).forEach(function(c){h[c.toLowerCase()]=b.languages[c]});f.languages_=h}else f.languages_=g.prototype.options_.languages;f.resetCache_();f.poster_=b.poster||"";f.controls_=!!b.controls;c.controls=!1;c.removeAttribute("controls");c.hasAttribute("autoplay")?f.options_.autoplay=!0:f.autoplay(f.options_.autoplay);f.scrubbing_=!1;f.el_=f.createEl();ed(z(z(f)),{eventBusKey:"el_"});f.fluid_&&f.on("playerreset",f.updateStyleEl_);a=Q(f.options_);
if(b.plugins){var l=b.plugins;Object.keys(l).forEach(function(b){if("function"!=typeof this[b])throw Error('plugin "'+b+'" does not exist');this[b](l[b])},z(z(f)))}f.options_.playerOptions=a;f.middleware_=[];f.initChildren();f.isAudio("audio"===c.nodeName.toLowerCase());f.controls()?f.addClass("vjs-controls-enabled"):f.addClass("vjs-controls-disabled");f.el_.setAttribute("role","region");f.isAudio()?f.el_.setAttribute("aria-label",f.localize("Audio Player")):f.el_.setAttribute("aria-label",f.localize("Video Player"));
f.isAudio()&&f.addClass("vjs-audio");f.flexNotSupported_()&&f.addClass("vjs-no-flex");Tb&&f.addClass("vjs-touch-enabled");Ya||f.addClass("vjs-workinghover");g.players[f.id_]=z(z(f));return f.addClass("vjs-v7"),f.userActive(!0),f.reportUserActivity(),f.one("play",f.listenForUserActivity_),f.on("focus",f.handleFocus),f.on("blur",f.handleBlur),f.on("stageclick",f.handleStageClick_),f.breakpoints(f.options_.breakpoints),f.responsive(f.options_.responsive),f.changingSrc_=!1,f.playWaitingForReady_=!1,f.playOnLoadstart_=
null,f}v(g,k);var f=g.prototype;return f.dispose=function(){this.trigger("dispose");this.off("dispose");this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);g.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);md[this.id()]=
null;k.prototype.dispose.call(this)},f.createEl=function(){var c,b=this.tag,a=this.playerElIngest_=b.parentNode&&b.parentNode.hasAttribute&&b.parentNode.hasAttribute("data-vjs-player"),f="video-js"===this.tag.tagName.toLowerCase();a?c=this.el_=b.parentNode:f||(c=this.el_=k.prototype.createEl.call(this,"div"));var d=ba(b);if(f){c=this.el_=b;for(b=this.tag=q.createElement("video");c.children.length;)b.appendChild(c.firstChild);Ia(c,"video-js")||Z(c,"video-js");c.appendChild(b);a=this.playerElIngest_=
c;Object.keys(c).forEach(function(a){b[a]=c[a]})}if(b.setAttribute("tabindex","-1"),d.tabindex="-1",Cf&&(b.setAttribute("role","application"),d.role="application"),b.removeAttribute("width"),b.removeAttribute("height"),"width"in d&&delete d.width,"height"in d&&delete d.height,Object.getOwnPropertyNames(d).forEach(function(a){f&&"class"===a||c.setAttribute(a,d[a]);f&&b.setAttribute(a,d[a])}),b.playerId=b.id,b.id+="_html5_api",b.className="vjs-tech",b.player=c.player=this,this.addClass("vjs-paused"),
!0!==m.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=rf("vjs-styles-dimensions");var g=Xa(".vjs-styles-defaults"),l=Xa("head");l.insertBefore(this.styleEl_,g?g.nextSibling:l.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);g=b.getElementsByTagName("a");for(l=0;l<g.length;l++){var p=g.item(l);Z(p,"vjs-hidden");p.setAttribute("hidden","hidden")}return b.initNetworkState_=
b.networkState,b.parentNode&&!a&&b.parentNode.insertBefore(c,b),pb(b,c),this.children_.unshift(b),this.el_.setAttribute("lang",this.language_),this.el_=c},f.width=function(c){return this.dimension("width",c)},f.height=function(c){return this.dimension("height",c)},f.dimension=function(c,b){var a=c+"_";if(void 0===b)return this[a]||0;if(""===b)return this[a]=void 0,void this.updateStyleEl_();var f=parseFloat(b);isNaN(f)?K.error('Improper value "'+b+'" supplied for for '+c):(this[a]=f,this.updateStyleEl_())},
f.fluid=function(c){if(void 0===c)return!!this.fluid_;var b;this.fluid_=!!c;jb(this)&&this.off("playerreset",this.updateStyleEl_);c?(this.addClass("vjs-fluid"),this.fill(!1),jb(b=function(){this.on("playerreset",this.updateStyleEl_)})?(void 0)():(b.eventedCallbacks||(b.eventedCallbacks=[]),b.eventedCallbacks.push(void 0))):this.removeClass("vjs-fluid");this.updateStyleEl_()},f.fill=function(c){if(void 0===c)return!!this.fill_;this.fill_=!!c;c?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},
f.aspectRatio=function(c){if(void 0===c)return this.aspectRatio_;if(!/^\d+:\d+$/.test(c))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=c;this.fluid(!0);this.updateStyleEl_()},f.updateStyleEl_=function(){if(!0!==m.VIDEOJS_NO_DYNAMIC_STYLE){var c=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var b=c[1]/c[0];c=void 0!==
this.width_?this.width_:void 0!==this.height_?this.height_/b:this.videoWidth()||300;var a=void 0!==this.height_?this.height_:c*b;var f=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(f);sf(this.styleEl_,"\n      ."+f+" {\n        width: "+c+"px;\n        height: "+a+"px;\n      }\n\n      ."+f+".vjs-fluid {\n        padding-top: "+100*b+"%;\n      }\n    ")}else c="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?
this.height_:this.options_.height,(f=this.tech_&&this.tech_.el())&&(0<=c&&(f.width=c),0<=a&&(f.height=a))},f.loadTech_=function(c,b){var a=this;this.tech_&&this.unloadTech_();var f=U(c),d=c.charAt(0).toLowerCase()+c.slice(1);"Html5"!==f&&this.tag&&(R.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null);this.techName_=f;this.isReady_=!1;var g={source:b,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,
playerId:this.id(),techId:this.id()+"_"+d+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Aa.names.forEach(function(b){b=Aa[b];g[b.getterName]=a[b.privateName]});B(g,this.options_[f]);B(g,this.options_[d]);
B(g,this.options_[c.toLowerCase()]);this.tag&&(g.tag=this.tag);b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&(g.startTime=this.cache_.currentTime);c=R.getTech(c);if(!c)throw Error("No Tech named '"+f+"' exists! '"+f+"' should be registered using videojs.registerTech()'");this.tech_=new c(g);this.tech_.ready(G(this,this.handleTechReady_),!0);Ci(this.textTracksJson_||[],this.tech_);yg.forEach(function(b){a.on(a.tech_,b,a["handleTech"+U(b)+"_"])});Object.keys($d).forEach(function(b){a.on(a.tech_,
b,function(c){0===a.tech_.playbackRate()&&a.tech_.seeking()?a.queuedCallbacks_.push({callback:a["handleTech"+$d[b]+"_"].bind(a),event:c}):a["handleTech"+$d[b]+"_"](c)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,
"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);
this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===f&&this.tag||pb(this.tech_.el(),this.el());this.tag&&(this.tag.player=null,this.tag=null)},f.unloadTech_=function(){var c=this;Aa.names.forEach(function(b){b=Aa[b];c[b.privateName]=c[b.getterName]()});this.textTracksJson_=Bi(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_=
"",this.trigger("posterchange"));this.isPosterFromTech_=!1},f.tech=function(c){return void 0===c&&K.warn(Yc(hf())),this.tech_},f.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,
"tap",this.handleTechTap_)},f.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},f.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",
this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()},f.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())},f.manualAutoplay_=function(c){var b=this;if(this.tech_&&"string"==typeof c){var a,f=function(){var c=b.muted();b.muted(!0);
var a=b.play();if(a&&a.then&&a.catch)return a.catch(function(a){b.muted(c)})};if("any"===c?(a=this.play())&&a.then&&a.catch&&a.catch(function(){return f()}):a="muted"===c?f():this.play(),a&&a.then&&a.catch)return a.then(function(){b.trigger({type:"autoplay-success",autoplay:c})}).catch(function(a){b.trigger({type:"autoplay-failure",autoplay:c})})}},f.updateSourceCaches_=function(c){void 0===c&&(c="");var b=c,a="";"string"!=typeof b&&(b=c.src,a=c.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=
this.cache_.sources||[];b&&!a&&(a=function(b,c){if(!c)return"";if(b.cache_.source.src===c&&b.cache_.source.type)return b.cache_.source.type;var a=b.cache_.sources.filter(function(b){return b.src===c});if(a.length)return a[0].type;b=b.$$("source");for(a=0;a<b.length;a++){var d=b[a];if(d.type&&d.src&&d.src===c)return d.type}return uc(c)}(this,b));this.cache_.source=Q({},c,{src:b,type:a});c=this.cache_.sources.filter(function(c){return c.src&&c.src===b});a=[];for(var f=this.$$("source"),d=[],g=0;g<f.length;g++){var l=
ba(f[g]);a.push(l);l.src&&l.src===b&&d.push(l.src)}d.length&&!c.length?this.cache_.sources=a:c.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=b},f.handleTechSourceset_=function(c){var b=this;if(!this.changingSrc_){var a=function(c){return b.updateSourceCaches_(c)},f=this.currentSource().src,d=c.src;if(f&&!/^blob:/.test(f)&&/^blob:/.test(d)&&(!this.lastSource_||this.lastSource_.tech!==d&&this.lastSource_.player!==f)&&(a=function(){}),a(d),!c.src)this.tech_.one(["sourceset","loadstart"],
function p(c){"sourceset"!==c.type&&(c=b.techGet("currentSrc"),b.lastSource_.tech=c,b.updateSourceCaches_(c));b.tech_.off(["sourceset","loadstart"],p)})}this.lastSource_={player:this.currentSource().src,tech:c.src};this.trigger({src:c.src,type:"sourceset"})},f.hasStarted=function(c){if(void 0===c)return this.hasStarted_;c!==this.hasStarted_&&(this.hasStarted_=c,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},f.handleTechPlay_=function(){this.removeClass("vjs-ended");
this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")},f.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(c){return c.callback(c.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")},f.handleTechWaiting_=function(){var c=this;this.addClass("vjs-waiting");this.trigger("waiting");var b=this.currentTime();
this.on("timeupdate",function e(){b!==c.currentTime()&&(c.removeClass("vjs-waiting"),c.off("timeupdate",e))})},f.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")},f.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")},f.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")},f.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")},f.handleTechSeeked_=function(){this.removeClass("vjs-seeking");
this.removeClass("vjs-ended");this.trigger("seeked")},f.handleTechFirstPlay_=function(){this.options_.starttime&&(K.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")},f.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")},f.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),
this.play()):this.paused()||this.pause();this.trigger("ended")},f.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},f.handleTechClick_=function(c){qb(c)&&this.controls_&&(this.paused()?Lb(this.play()):this.pause())},f.handleTechDoubleClick_=function(c){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(c.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&
!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,c):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},f.handleTechTap_=function(){this.userActive(!this.userActive())},f.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},f.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},
f.handleTechTouchEnd_=function(c){c.preventDefault()},f.handleStageClick_=function(){this.reportUserActivity()},f.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},f.documentFullscreenChange_=function(c){this.isFullscreen(q[ya.fullscreenElement]);!1===this.isFullscreen()&&ma(q,ya.fullscreenchange,G(this,this.documentFullscreenChange_));Gf||this.trigger("fullscreenchange")},f.handleTechFullscreenChange_=function(c,b){b&&this.isFullscreen(b.isFullscreen);
this.trigger("fullscreenchange")},f.handleTechError_=function(){var c=this.tech_.error();this.error(c)},f.handleTechTextData_=function(){var c=null;1<arguments.length&&(c=arguments[1]);this.trigger("textdata",c)},f.getCache=function(){return this.cache_},f.resetCache_=function(){this.cache_={currentTime:0,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},f.techCall_=function(c,b){this.ready(function(){if(c in Ui)return a=this.middleware_,
f=this.tech_,g=b,f[d=c](a.reduce(ld(d),g));if(c in Tf)return df(this.middleware_,this.tech_,c,b);var a,f,d,g;try{this.tech_&&this.tech_[c](b)}catch(l){throw K(l),l;}},!0)},f.techGet_=function(c){if(this.tech_&&this.tech_.isReady_){if(c in Ti)return b=this.middleware_,a=this.tech_,f=c,b.reduceRight(ld(f),a[f]());if(c in Tf)return df(this.middleware_,this.tech_,c);var b,a,f;try{return this.tech_[c]()}catch(d){if(void 0===this.tech_[c])throw K("Video.js: "+c+" method not defined for "+this.techName_+
" playback technology.",d),d;if("TypeError"===d.name)throw K("Video.js: "+c+" unavailable on "+this.techName_+" playback technology element.",d),this.tech_.isReady_=!1,d;throw K(d),d;}}},f.play=function(){var c=this,b=this.options_.Promise||m.Promise;return b?new b(function(b){c.play_(b)}):this.play_()},f.play_=function(c){var b=this;if(void 0===c&&(c=Lb),this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void c(this.techGet_("play"));
this.playOnLoadstart_=function(){b.playOnLoadstart_=null;c(b.play())};this.one("loadstart",this.playOnLoadstart_)}else this.playWaitingForReady_||(this.playWaitingForReady_=!0,this.ready(function(){b.playWaitingForReady_=!1;c(b.play())}))},f.pause=function(){this.techCall_("pause")},f.paused=function(){return!1!==this.techGet_("paused")},f.played=function(){return this.techGet_("played")||kb(0,0)},f.scrubbing=function(c){if("undefined"==typeof c)return this.scrubbing_;this.scrubbing_=!!c;c?this.addClass("vjs-scrubbing"):
this.removeClass("vjs-scrubbing")},f.currentTime=function(c){return"undefined"!=typeof c?(0>c&&(c=0),void this.techCall_("setCurrentTime",c)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},f.duration=function(c){if(void 0===c)return void 0!==this.cache_.duration?this.cache_.duration:NaN;0>(c=parseFloat(c))&&(c=1/0);c!==this.cache_.duration&&((this.cache_.duration=c)===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):
(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(c)||this.trigger("durationchange"))},f.remainingTime=function(){return this.duration()-this.currentTime()},f.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},f.buffered=function(){var c=this.techGet_("buffered");return c&&c.length||(c=kb(0,0)),c},f.bufferedPercent=function(){return Xe(this.buffered(),this.duration())},f.bufferedEnd=function(){var c=this.buffered(),b=this.duration();
c=c.end(c.length-1);return b<c&&(c=b),c},f.volume=function(c){var b;return void 0!==c?(b=Math.max(0,Math.min(1,parseFloat(c))),this.cache_.volume=b,this.techCall_("setVolume",b),void(0<b&&this.lastVolume_(b))):(b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b)},f.muted=function(c){if(void 0===c)return this.techGet_("muted")||!1;this.techCall_("setMuted",c)},f.defaultMuted=function(c){return void 0!==c?this.techCall_("setDefaultMuted",c):this.techGet_("defaultMuted")||!1},f.lastVolume_=function(c){if(void 0===
c||0===c)return this.cache_.lastVolume;this.cache_.lastVolume=c},f.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},f.isFullscreen=function(c){return void 0!==c?(this.isFullscreen_=!!c,void this.toggleFullscreenClass_()):!!this.isFullscreen_},f.requestFullscreen=function(){this.isFullscreen(!0);ya.requestFullscreen?(Ja(q,ya.fullscreenchange,G(this,this.documentFullscreenChange_)),this.el_[ya.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):
(this.enterFullWindow(),this.trigger("fullscreenchange"))},f.exitFullscreen=function(){this.isFullscreen(!1);ya.requestFullscreen?q[ya.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},f.enterFullWindow=function(){this.isFullWindow=!0;this.docOrigOverflow=q.documentElement.style.overflow;Ja(q,"keydown",G(this,this.fullWindowOnEscKey));q.documentElement.style.overflow="hidden";Z(q.body,"vjs-full-window");this.trigger("enterFullWindow")},
f.fullWindowOnEscKey=function(c){H.isEventKey(c,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},f.exitFullWindow=function(){this.isFullWindow=!1;ma(q,"keydown",this.fullWindowOnEscKey);q.documentElement.style.overflow=this.docOrigOverflow;F(q.body,"vjs-full-window");this.trigger("exitFullWindow")},f.handleFocus=function(c){ma(q,"keydown",G(this,this.handleKeyPress));Ja(q,"keydown",G(this,this.handleKeyPress))},f.handleBlur=function(c){ma(q,"keydown",G(this,this.handleKeyPress))},
f.handleKeyPress=function(c){this.options_.userActions&&this.options_.userActions.hotkeys&&!1!==this.options_.userActions.hotkeys&&("function"==typeof this.options_.userActions.hotkeys?this.options_.userActions.hotkeys.call(this,c):this.handleHotkeys(c))},f.handleHotkeys=function(c){var b=this.options_.userActions?this.options_.userActions.hotkeys:{},a=b.fullscreenKey,f=b.muteKey;f=void 0===f?function(b){return H.isEventKey(b,"m")}:f;b=b.playPauseKey;b=void 0===b?function(b){return H.isEventKey(b,
"k")||H.isEventKey(b,"Space")}:b;(void 0===a?function(b){return H.isEventKey(b,"f")}:a).call(this,c)?(c.preventDefault(),c=x.getComponent("FullscreenToggle"),!1!==q[ya.fullscreenEnabled]&&c.prototype.handleClick.call(this)):f.call(this,c)?(c.preventDefault(),x.getComponent("MuteToggle").prototype.handleClick.call(this)):b.call(this,c)&&(c.preventDefault(),x.getComponent("PlayToggle").prototype.handleClick.call(this))},f.canPlayType=function(c){for(var b,a=0,f=this.options_.techOrder;a<f.length;a++){var d=
f[a],g=R.getTech(d);if(g||(g=x.getComponent(d)),g){if(g.isSupported()&&(b=g.canPlayType(c)))return b}else K.error('The "'+d+'" tech is undefined. Skipped browser support check for that tech.')}return""},f.selectSource=function(c){var b=this,a=this.options_.techOrder.map(function(b){return[b,R.getTech(b)]}).filter(function(b){var c=b[0];return(b=b[1])?b.isSupported():(K.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),f=function(b,c,a){var d;return b.some(function(b){return c.some(function(c){if(d=
a(b,c))return!0})}),d},d=function(c,a){var d=c[0];if(c[1].canPlaySource(a,b.options_[d.toLowerCase()]))return{source:a,tech:d}};return(this.options_.sourceOrder?f(c,a,function(b,c){return d(c,b)}):f(a,c,d))||!1},f.src=function(c){var b=this;if("undefined"==typeof c)return this.cache_.src||"";var a=function h(b){if(Array.isArray(b)){var c=[];b.forEach(function(b){b=h(b);Array.isArray(b)?c=c.concat(b):Y(b)&&c.push(b)});b=c}else b="string"==typeof b&&b.trim()?[ef({src:b})]:Y(b)&&"string"==typeof b.src&&
b.src&&b.src.trim()?[ef(b)]:[];return b}(c);a.length?(this.changingSrc_=!0,this.cache_.sources=a,this.updateSourceCaches_(a[0]),ti(this,a[0],function(c,f){if(b.middleware_=f,b.cache_.sources=a,b.updateSourceCaches_(c),b.src_(c))return 1<a.length?b.src(a.slice(1)):(b.changingSrc_=!1,b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void b.triggerReady());var d=b.tech_;f.forEach(function(b){return b.setTech&&b.setTech(d)})})):this.setTimeout(function(){this.error({code:4,
message:this.localize(this.options_.notSupportedMessage)})},0)},f.src_=function(c){var b,a,f=this,d=this.selectSource([c]);return!d||(b=d.tech,a=this.techName_,U(b)!==U(a)?(this.changingSrc_=!0,this.loadTech_(d.tech,d.source),this.tech_.ready(function(){f.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",c):this.techCall_("src",c.src);this.changingSrc_=!1},!0),!1)},f.load=function(){this.techCall_("load")},f.reset=function(){this.tech_&&
this.tech_.clearTracks("text");this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();jb(this)&&this.trigger("playerreset")},f.resetControlBarUI_=function(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()},f.resetProgressBar_=function(){this.currentTime(0);this.controlBar.durationDisplay.updateContent();this.controlBar.remainingTimeDisplay.updateContent()},f.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate());
this.handleTechRateChange_()},f.resetVolumeBar_=function(){this.volume(1);this.trigger("volumechange")},f.currentSources=function(){var c=this.currentSource(),b=[];return 0!==Object.keys(c).length&&b.push(c),this.cache_.sources||b},f.currentSource=function(){return this.cache_.source||{}},f.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},f.currentType=function(){return this.currentSource()&&this.currentSource().type||""},f.preload=function(c){return void 0!==c?(this.techCall_("setPreload",
c),void(this.options_.preload=c)):this.techGet_("preload")},f.autoplay=function(c){if(void 0===c)return this.options_.autoplay||!1;var b;"string"==typeof c&&/(any|play|muted)/.test(c)?(this.options_.autoplay=c,this.manualAutoplay_(c),b=!1):this.options_.autoplay=!!c;b=b||this.options_.autoplay;this.tech_&&this.techCall_("setAutoplay",b)},f.playsinline=function(c){return void 0!==c?(this.techCall_("setPlaysinline",c),this.options_.playsinline=c,this):this.techGet_("playsinline")},f.loop=function(c){return void 0!==
c?(this.techCall_("setLoop",c),void(this.options_.loop=c)):this.techGet_("loop")},f.poster=function(c){if(void 0===c)return this.poster_;c||(c="");c!==this.poster_&&(this.poster_=c,this.techCall_("setPoster",c),this.isPosterFromTech_=!1,this.trigger("posterchange"))},f.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var c=this.tech_.poster()||"";c!==this.poster_&&(this.poster_=c,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},
f.controls=function(c){if(void 0===c)return!!this.controls_;c=!!c;this.controls_!==c&&(this.controls_=c,this.usingNativeControls()&&this.techCall_("setControls",c),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},
f.usingNativeControls=function(c){if(void 0===c)return!!this.usingNativeControls_;c=!!c;this.usingNativeControls_!==c&&(this.usingNativeControls_=c,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},f.error=function(c){return void 0===c?this.error_||null:null===c?(this.error_=c,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):
(this.error_=new na(c),this.addClass("vjs-error"),K.error("(CODE:"+this.error_.code+" "+na.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},f.reportUserActivity=function(c){this.userActivity_=!0},f.userActive=function(c){if(void 0===c)return this.userActive_;if((c=!!c)!==this.userActive_){if(this.userActive_=c,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");
this.tech_&&this.tech_.one("mousemove",function(b){b.stopPropagation();b.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}},f.listenForUserActivity_=function(){var c,b,a,f=G(this,this.reportUserActivity);this.on("mousedown",function(){f();this.clearInterval(c);c=this.setInterval(f,250)});this.on("mousemove",function(c){c.screenX===b&&c.screenY===a||(b=c.screenX,a=c.screenY,f())});this.on("mouseup",function(b){f();
this.clearInterval(c)});var d,g=this.getChild("controlBar");g&&(g.on("mouseenter",function(b){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}),g.on("mouseleave",function(b){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",f);this.on("keyup",f);this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(d);var b=this.options_.inactivityTimeout;
0>=b||(d=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},b))}},250)},f.playbackRate=function(c){if(void 0===c)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",c)},f.defaultPlaybackRate=function(c){return void 0!==c?this.techCall_("setDefaultPlaybackRate",c):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},f.isAudio=function(c){if(void 0===c)return!!this.isAudio_;
this.isAudio_=!!c},f.addTextTrack=function(c,b,a){if(this.tech_)return this.tech_.addTextTrack(c,b,a)},f.addRemoteTextTrack=function(c,b){if(this.tech_)return this.tech_.addRemoteTextTrack(c,b)},f.removeRemoteTextTrack=function(c){void 0===c&&(c={});var b=c.track;if(b||(b=c),this.tech_)return this.tech_.removeRemoteTextTrack(b)},f.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},f.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||
0},f.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},f.language=function(c){if(void 0===c)return this.language_;this.language_=String(c).toLowerCase()},f.languages=function(){return Q(g.prototype.options_.languages,this.languages_)},f.toJSON=function(){var c=Q(this.options_),b=c.tracks;c.tracks=[];for(var a=0;a<b.length;a++){var f=b[a];(f=Q(f)).player=void 0;c.tracks[a]=f}return c},f.createModal=function(c,b){var a=this;(b=b||{}).content=c||"";var f=
new yb(this,b);return this.addChild(f),f.on("dispose",function(){a.removeChild(f)}),f.open(),f},f.updateCurrentBreakpoint_=function(){if(this.responsive())for(var c=this.currentBreakpoint(),b=this.currentWidth(),a=0;a<ae.length;a++){var f=ae[a];if(b<=this.breakpoints_[f]){if(c===f)break;c&&this.removeClass(Dc[c]);this.addClass(Dc[f]);this.breakpoint_=f;break}}},f.removeCurrentBreakpoint_=function(){var c=this.currentBreakpointClass();this.breakpoint_="";c&&this.removeClass(c)},f.breakpoints=function(c){return void 0===
c||(this.breakpoint_="",this.breakpoints_=B({},pj,c),this.updateCurrentBreakpoint_()),B(this.breakpoints_)},f.responsive=function(c){return void 0===c?this.responsive_:(c=!!c)!==this.responsive_?((this.responsive_=c)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),c):void 0},f.currentBreakpoint=function(){return this.breakpoint_},f.currentBreakpointClass=function(){return Dc[this.breakpoint_]||
""},f.loadMedia=function(c,b){var a=this;if(c&&"object"==typeof c){this.reset();this.cache_.media=Q(c);c=this.cache_.media;var f=c.poster,d=c.src,g=c.textTracks;!c.artwork&&f&&(this.cache_.media.artwork=[{src:f,type:uc(f)}]);d&&this.src(d);f&&this.poster(f);Array.isArray(g)&&g.forEach(function(b){return a.addRemoteTextTrack(b,!1)});this.ready(b)}},f.getMedia=function(){if(this.cache_.media)return Q(this.cache_.media);var c=this.poster(),b={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),
function(b){return{kind:b.kind,label:b.label,language:b.language,src:b.src}})};return c&&(b.poster=c,b.artwork=[{src:b.poster,type:uc(b.poster)}]),b},g.getTagSettings=function(c){var b={sources:[],tracks:[]},a=ba(c),f=a["data-setup"];if(Ia(c,"vjs-fill")&&(a.fill=!0),Ia(c,"vjs-fluid")&&(a.fluid=!0),null!==f){var d=null;try{var g=JSON.parse(f||"{}",void 0)}catch(l){d=l}g=[d,g];f=g[0];g=g[1];f&&K.error(f);B(a,g)}if(B(b,a),c.hasChildNodes())for(c=c.childNodes,a=0,f=c.length;a<f;a++)g=c[a],d=g.nodeName.toLowerCase(),
"source"===d?b.sources.push(ba(g)):"track"===d&&b.tracks.push(ba(g));return b},f.flexNotSupported_=function(){var c=q.createElement("i");return!("flexBasis"in c.style||"webkitFlexBasis"in c.style||"mozFlexBasis"in c.style||"msFlexBasis"in c.style||"msFlexOrder"in c.style)},g}(x);Aa.names.forEach(function(k){var g=Aa[k];ea.prototype[g.getterName]=function(){return this.tech_?this.tech_[g.getterName]():(this[g.privateName]=this[g.privateName]||new g.ListClass,this[g.privateName])}});ea.players={};var $b=
m.navigator;ea.prototype.options_={techOrder:R.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:$b&&($b.languages&&$b.languages[0]||$b.userLanguage||$b.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1};["ended","seeking",
"seekable","networkState","readyState"].forEach(function(k){ea.prototype[k]=function(){return this.techGet_(k)}});yg.forEach(function(k){ea.prototype["handleTech"+U(k)+"_"]=function(){return this.trigger(k)}});x.registerComponent("Player",ea);var $a={},Ec=function(k){return $a.hasOwnProperty(k)?$a[k]:void 0},Fc=function(k,g,f){f=(f?"before":"")+"pluginsetup";k.trigger(f,g);k.trigger(f+":"+g.name,g)},zg=function(k,g){return g.prototype.name=k,function(){Fc(this,{name:k,plugin:g,instance:null},!0);
for(var f=arguments.length,c=Array(f),b=0;b<f;b++)c[b]=arguments[b];var a=O(g,[this].concat(c));return this[k]=function(){return a},Fc(this,a.getEventHash()),a}},Ba=function(){function k(f){if(this.constructor===k)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=f;ed(this);delete this.trigger;Ve(this,this.constructor.defaultState);var c=this.name;f.activePlugins_=f.activePlugins_||{};f.activePlugins_[c]=!0;this.dispose=G(this,this.dispose);f.on("dispose",this.dispose)}
var g=k.prototype;return g.version=function(){return this.constructor.VERSION},g.getEventHash=function(f){return void 0===f&&(f={}),f.name=this.name,f.plugin=this.constructor,f.instance=this,f},g.trigger=function(f,c){return void 0===c&&(c={}),rb(this.eventBusEl_,f,this.getEventHash(c))},g.handleStateChanged=function(f){},g.dispose=function(){var f=this.name,c=this.player;this.trigger("dispose");this.off();c.off("dispose",this.dispose);c.activePlugins_[f]=!1;this.player=this.state=null;c[f]=zg(f,
$a[f])},k.isBasic=function(f){f="string"==typeof f?Ec(f):f;return"function"==typeof f&&!k.prototype.isPrototypeOf(f.prototype)},k.registerPlugin=function(f,c){if("string"!=typeof f)throw Error('Illegal plugin name, "'+f+'", must be a string, was '+typeof f+".");if($a.hasOwnProperty(f))K.warn('A plugin named "'+f+'" already exists. You may want to avoid re-registering plugins!');else if(ea.prototype.hasOwnProperty(f))throw Error('Illegal plugin name, "'+f+'", cannot share a name with an existing player method!');
if("function"!=typeof c)throw Error('Illegal plugin for "'+f+'", must be a function, was '+typeof c+".");var b;return $a[f]=c,"plugin"!==f&&(k.isBasic(c)?ea.prototype[f]=(b=function(){Fc(this,{name:f,plugin:c,instance:null},!0);var b=c.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[f]=!0;return Fc(this,{name:f,plugin:c,instance:b}),b},Object.keys(c).forEach(function(a){b[a]=c[a]}),b):ea.prototype[f]=zg(f,c)),c},k.deregisterPlugin=function(f){if("plugin"===f)throw Error("Cannot de-register base plugin.");
$a.hasOwnProperty(f)&&(delete $a[f],delete ea.prototype[f])},k.getPlugins=function(f){var c;return void 0===f&&(f=Object.keys($a)),f.forEach(function(b){var a=Ec(b);a&&((c=c||{})[b]=a)}),c},k.getPluginVersion=function(f){return(f=Ec(f))&&f.VERSION||""},k}();Ba.getPlugin=Ec;Ba.BASE_PLUGIN_NAME="plugin";Ba.registerPlugin("plugin",Ba);ea.prototype.usingPlugin=function(k){return!!this.activePlugins_&&!0===this.activePlugins_[k]};ea.prototype.hasPlugin=function(k){return!!$a.hasOwnProperty(k)};var jf=
function(k){return 0===k.indexOf("#")?k.slice(1):k};if(t.hooks_={},t.hooks=function(k,g){return t.hooks_[k]=t.hooks_[k]||[],g&&(t.hooks_[k]=t.hooks_[k].concat(g)),t.hooks_[k]},t.hook=function(k,g){t.hooks(k,g)},t.hookOnce=function(k,g){t.hooks(k,[].concat(g).map(function(f){return function b(){return t.removeHook(k,b),f.apply(void 0,arguments)}}))},t.removeHook=function(k,g){g=t.hooks(k).indexOf(g);return!(-1>=g)&&(t.hooks_[k]=t.hooks_[k].slice(),t.hooks_[k].splice(g,1),!0)},!0!==m.VIDEOJS_NO_DYNAMIC_STYLE&&
Ga()){var Gc=Xa(".vjs-styles-defaults");if(!Gc){Gc=rf("vjs-styles-defaults");var be=Xa("head");be&&be.insertBefore(Gc,be.firstChild);sf(Gc,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}cd(1,t);t.VERSION="7.5.0";t.options=ea.prototype.options_;t.getPlayers=function(){return ea.players};t.getPlayer=function(k){var g=ea.players;if("string"==typeof k){k=jf(k);var f=g[k];if(f)return f;k=Xa("#"+k)}if(Pa(k)&&
(f=k,k=f.player,f=f.playerId,k||g[f]))return k||g[f]};t.getAllPlayers=function(){return Object.keys(ea.players).map(function(k){return ea.players[k]}).filter(Boolean)};t.players=ea.players;t.getComponent=x.getComponent;t.registerComponent=function(k,g){R.isTech(g)&&K.warn("The "+k+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");x.registerComponent.call(x,k,g)};t.getTech=R.getTech;t.registerTech=R.registerTech;t.use=function(k,g){lb[k]=
lb[k]||[];lb[k].push(g)};Object.defineProperty(t,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(t.middleware,"TERMINATOR",{value:tc,writeable:!1,enumerable:!0});t.browser=Ai;t.TOUCH_ENABLED=Tb;t.extend=function(k,g){void 0===g&&(g={});var f=function(){k.apply(this,arguments)},c={},b;for(b in"object"==typeof g?(g.constructor!==Object.prototype.constructor&&(f=g.constructor),c=g):"function"==typeof g&&(f=g),function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(b.super_=c)}(f,k),c)c.hasOwnProperty(b)&&(f.prototype[b]=c[b]);return f};t.mergeOptions=Q;t.bind=G;t.registerPlugin=Ba.registerPlugin;t.deregisterPlugin=Ba.deregisterPlugin;t.plugin=function(k,g){return K.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ba.registerPlugin(k,g)};t.getPlugins=Ba.getPlugins;t.getPlugin=Ba.getPlugin;t.getPluginVersion=Ba.getPluginVersion;
t.addLanguage=function(k,g){var f;return k=(""+k).toLowerCase(),t.options.languages=Q(t.options.languages,((f={})[k]=g,f)),t.options.languages[k]};t.log=K;t.createLogger=of;t.createTimeRange=t.createTimeRanges=kb;t.formatTime=tb;t.setFormatTime=function(k){od=k};t.resetFormatTime=function(){od=Wf};t.parseUrl=Fd;t.isCrossOrigin=zc;t.EventTarget=sa;t.on=Ja;t.one=Kb;t.off=ma;t.trigger=rb;t.xhr=Qa;t.TextTrack=Vb;t.AudioTrack=Rf;t.VideoTrack=Sf;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(k){t[k]=
function(){return K.warn("videojs."+k+"() is deprecated; use videojs.dom."+k+"() instead"),qf[k].apply(null,arguments)}});t.computedStyle=bb;t.dom=qf;t.url=Ji;var Ag=sc(function(k,g){var f=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var c=/^([^\/?#]*)(.*)$/;var b=/(?:\/|^)\.(?=\/)/g;var a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var e={buildAbsoluteURL:function(b,a,f){if(f=f||{},b=b.trim(),!(a=a.trim())){if(!f.alwaysNormalize)return b;f=e.parseURL(b);if(!f)throw Error("Error trying to parse base URL.");
return f.path=e.normalizePath(f.path),e.buildURLFromParts(f)}var d=e.parseURL(a);if(!d)throw Error("Error trying to parse relative URL.");if(d.scheme)return f.alwaysNormalize?(d.path=e.normalizePath(d.path),e.buildURLFromParts(d)):a;a=e.parseURL(b);if(!a)throw Error("Error trying to parse base URL.");!a.netLoc&&a.path&&"/"!==a.path[0]&&(b=c.exec(a.path),a.netLoc=b[1],a.path=b[2]);a.netLoc&&!a.path&&(a.path="/");b={scheme:a.scheme,netLoc:d.netLoc,path:null,params:d.params,query:d.query,fragment:d.fragment};
d.netLoc||(b.netLoc=a.netLoc,"/"===d.path[0])||(d.path?(a=a.path,a=a.substring(0,a.lastIndexOf("/")+1)+d.path,b.path=e.normalizePath(a)):(b.path=a.path,d.params||(b.params=a.params,d.query||(b.query=a.query))));return null===b.path&&(b.path=f.alwaysNormalize?e.normalizePath(d.path):d.path),e.buildURLFromParts(b)},parseURL:function(b){return(b=f.exec(b))?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(b,
"");c.length!==(c=c.replace(a,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(b){return b.scheme+b.netLoc+b.path+b.params+b.query+b.fragment}};k.exports=e}),ce=function(){function k(){this.listeners={}}var g=k.prototype;return g.on=function(f,c){this.listeners[f]||(this.listeners[f]=[]);this.listeners[f].push(c)},g.off=function(f,c){if(!this.listeners[f])return!1;c=this.listeners[f].indexOf(c);return this.listeners[f].splice(c,1),-1<c},g.trigger=function(f){var c,b=
this.listeners[f];if(b)if(2===arguments.length){var a=b.length;for(c=0;c<a;++c)b[c].call(this,arguments[1])}else{var g=Array.prototype.slice.call(arguments,1);a=b.length;for(c=0;c<a;++c)b[c].apply(this,g)}},g.dispose=function(){this.listeners={}},g.pipe=function(f){this.on("data",function(c){f.push(c)})},k}(),qj=function(k){function g(){var f;return(f=k.call(this)||this).buffer="",f}return pd(g,k),g.prototype.push=function(f){this.buffer+=f;for(f=this.buffer.indexOf("\n");-1<f;f=this.buffer.indexOf("\n"))this.trigger("data",
this.buffer.substring(0,f)),this.buffer=this.buffer.substring(f+1)},g}(ce),ac=function(k){var g;k=k.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var f={},c=k.length;c--;)""!==k[c]&&((g=/([^=]*)=(.*)/.exec(k[c]).slice(1))[0]=g[0].replace(/^\s+|\s+$/g,""),g[1]=g[1].replace(/^\s+|\s+$/g,""),g[1]=g[1].replace(/^['"](.*)['"]$/g,"$1"),f[g[0]]=g[1]);return f},rj=function(k){function g(){var c;return(c=k.call(this)||this).customParsers=[],c.tagMappers=[],c}pd(g,k);var f=g.prototype;return f.push=function(c){var b,
a,f=this;0!==(c=c.trim()).length&&("#"===c[0]?this.tagMappers.reduce(function(b,a){a=a(c);return a===c?b:b.concat([a])},[c]).forEach(function(c){for(var d=0;d<f.customParsers.length;d++)if(f.customParsers[d].call(f,c))return;if(0===c.indexOf("#EXT"))if(c=c.replace("\r",""),b=/^#EXTM3U/.exec(c))f.trigger("data",{type:"tag",tagType:"m3u"});else{if(b=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(c))return a={type:"tag",tagType:"inf"},b[1]&&(a.duration=parseFloat(b[1])),b[2]&&(a.title=b[2]),void f.trigger("data",
a);if(b=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(c))return a={type:"tag",tagType:"targetduration"},b[1]&&(a.duration=parseInt(b[1],10)),void f.trigger("data",a);if(b=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(c))return a={type:"tag",tagType:"totalduration"},b[1]&&(a.duration=parseInt(b[1],10)),void f.trigger("data",a);if(b=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(c))return a={type:"tag",tagType:"version"},b[1]&&(a.version=parseInt(b[1],10)),void f.trigger("data",a);if(b=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(c))return a=
{type:"tag",tagType:"media-sequence"},b[1]&&(a.number=parseInt(b[1],10)),void f.trigger("data",a);if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(c))return a={type:"tag",tagType:"discontinuity-sequence"},b[1]&&(a.number=parseInt(b[1],10)),void f.trigger("data",a);if(b=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(c))return a={type:"tag",tagType:"playlist-type"},b[1]&&(a.playlistType=b[1]),void f.trigger("data",a);if(b=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(c))return a={type:"tag",tagType:"byterange"},
b[1]&&(a.length=parseInt(b[1],10)),b[2]&&(a.offset=parseInt(b[2],10)),void f.trigger("data",a);if(b=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(c))return a={type:"tag",tagType:"allow-cache"},b[1]&&(a.allowed=!/NO/.test(b[1])),void f.trigger("data",a);if(b=/^#EXT-X-MAP:?(.*)$/.exec(c)){if(a={type:"tag",tagType:"map"},b[1])if(c=ac(b[1]),c.URI&&(a.uri=c.URI),c.BYTERANGE)d=c.BYTERANGE.split("@"),c=d[0],d=d[1],a.byterange={},c&&(a.byterange.length=parseInt(c,10)),d&&(a.byterange.offset=parseInt(d,10));f.trigger("data",
a)}else if(b=/^#EXT-X-STREAM-INF:?(.*)$/.exec(c)){if(a={type:"tag",tagType:"stream-inf"},b[1]){if(a.attributes=ac(b[1]),a.attributes.RESOLUTION)c=a.attributes.RESOLUTION.split("x"),d={},c[0]&&(d.width=parseInt(c[0],10)),c[1]&&(d.height=parseInt(c[1],10)),a.attributes.RESOLUTION=d;a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10));a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],10))}f.trigger("data",a)}else{if(b=/^#EXT-X-MEDIA:?(.*)$/.exec(c))return a=
{type:"tag",tagType:"media"},b[1]&&(a.attributes=ac(b[1])),void f.trigger("data",a);if(b=/^#EXT-X-ENDLIST/.exec(c))f.trigger("data",{type:"tag",tagType:"endlist"});else if(b=/^#EXT-X-DISCONTINUITY/.exec(c))f.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(b=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(c))return a={type:"tag",tagType:"program-date-time"},b[1]&&(a.dateTimeString=b[1],a.dateTimeObject=new Date(b[1])),void f.trigger("data",a);if(b=/^#EXT-X-KEY:?(.*)$/.exec(c))return a={type:"tag",
tagType:"key"},b[1]&&(a.attributes=ac(b[1]),a.attributes.IV&&("0x"===a.attributes.IV.substring(0,2).toLowerCase()&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),void f.trigger("data",a);if(b=/^#EXT-X-START:?(.*)$/.exec(c))return a=
{type:"tag",tagType:"start"},b[1]&&(a.attributes=ac(b[1]),a.attributes["TIME-OFFSET"]=parseFloat(a.attributes["TIME-OFFSET"]),a.attributes.PRECISE=/YES/.test(a.attributes.PRECISE)),void f.trigger("data",a);if(b=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(c))return a={type:"tag",tagType:"cue-out-cont"},b[1]?a.data=b[1]:a.data="",void f.trigger("data",a);if(b=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(c))return a={type:"tag",tagType:"cue-out"},b[1]?a.data=b[1]:a.data="",void f.trigger("data",a);if(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(c))return a=
{type:"tag",tagType:"cue-in"},b[1]?a.data=b[1]:a.data="",void f.trigger("data",a);f.trigger("data",{type:"tag",data:c.slice(4)})}}}else f.trigger("data",{type:"comment",text:c.slice(1)})}):this.trigger("data",{type:"uri",uri:c}))},f.addParser=function(c){var b=this,a=c.expression,f=c.customType,d=c.dataParser,g=c.segment;"function"!=typeof d&&(d=function(b){return b});this.customParsers.push(function(c){if(a.exec(c))return b.trigger("data",{type:"custom",data:d(c),customType:f,segment:g}),!0})},f.addTagMapper=
function(c){var b=c.expression,a=c.map;this.tagMappers.push(function(c){return b.test(c)?a(c):c})},g}(ce),Bg=function(k){function g(){var c;(c=k.call(this)||this).lineStream=new qj;c.parseStream=new rj;c.lineStream.pipe(c.parseStream);var b,a,f=lf(lf(c)),d=[],g={},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p=0;return c.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},c.parseStream.on("data",function(c){var e,k;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=
c.allowed;"allowed"in c||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var b={};"length"in c&&((g.byterange=b).length=c.length,"offset"in c||(this.trigger("info",{message:"defaulting offset to zero"}),c.offset=0));"offset"in c&&((g.byterange=b).offset=c.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));
"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<c.duration&&(g.duration=c.duration);0===c.duration&&(g.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=d},key:function(){c.attributes?"NONE"!==c.attributes.METHOD?c.attributes.URI?(c.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:c.attributes.METHOD||
"AES-128",uri:c.attributes.URI},"undefined"!=typeof c.attributes.IV&&(a.iv=c.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):a=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(c.number)?this.manifest.mediaSequence=c.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+c.number})},"discontinuity-sequence":function(){isFinite(c.number)?(this.manifest.discontinuitySequence=
c.number,p=c.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+c.number})},"playlist-type":function(){/VOD|EVENT/.test(c.playlistType)?this.manifest.playlistType=c.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+c.playlist})},map:function(){b={};c.uri&&(b.uri=c.uri);c.byterange&&(b.byterange=c.byterange)},"stream-inf":function(){this.manifest.playlists=d;this.manifest.mediaGroups=this.manifest.mediaGroups||l;c.attributes?(g.attributes||(g.attributes=
{}),kf(g.attributes,c.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,c.attributes&&c.attributes.TYPE&&c.attributes["GROUP-ID"]&&c.attributes.NAME){var b=this.manifest.mediaGroups[c.attributes.TYPE];b[c.attributes["GROUP-ID"]]=b[c.attributes["GROUP-ID"]]||{};e=b[c.attributes["GROUP-ID"]];(k={default:/yes/i.test(c.attributes.DEFAULT)}).default?k.autoselect=!0:k.autoselect=/yes/i.test(c.attributes.AUTOSELECT);
c.attributes.LANGUAGE&&(k.language=c.attributes.LANGUAGE);c.attributes.URI&&(k.uri=c.attributes.URI);c.attributes["INSTREAM-ID"]&&(k.instreamId=c.attributes["INSTREAM-ID"]);c.attributes.CHARACTERISTICS&&(k.characteristics=c.attributes.CHARACTERISTICS);c.attributes.FORCED&&(k.forced=/yes/i.test(c.attributes.FORCED));e[c.attributes.NAME]=k}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){p+=1;g.discontinuity=!0;this.manifest.discontinuityStarts.push(d.length)},
"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=c.dateTimeString,this.manifest.dateTimeObject=c.dateTimeObject);g.dateTimeString=c.dateTimeString;g.dateTimeObject=c.dateTimeObject},targetduration:function(){!isFinite(c.duration)||0>c.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+c.duration}):this.manifest.targetDuration=c.duration},totalduration:function(){!isFinite(c.duration)||0>c.duration?this.trigger("warn",
{message:"ignoring invalid total duration: "+c.duration}):this.manifest.totalDuration=c.duration},start:function(){c.attributes&&!isNaN(c.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:c.attributes["TIME-OFFSET"],precise:c.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){g.cueOut=c.data},"cue-out-cont":function(){g.cueOutCont=c.data},"cue-in":function(){g.cueIn=c.data}}[c.tagType]||function(){}).call(f)},
uri:function(){g.uri=c.uri;d.push(g);!this.manifest.targetDuration||"duration"in g||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),g.duration=this.manifest.targetDuration);a&&(g.key=a);g.timeline=p;b&&(g.map=b);g={}},comment:function(){},custom:function(){c.segment?(g.custom=g.custom||{},g.custom[c.customType]=c.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[c.customType]=c.data)}})[c.type].call(f)}),c}pd(g,k);var f=g.prototype;return f.push=
function(c){this.lineStream.push(c)},f.end=function(){this.lineStream.push("\n")},f.addParser=function(c){this.parseStream.addParser(c)},f.addTagMapper=function(c){this.parseStream.addTagMapper(c)},g}(ce),Cg=function(k){return!!k&&"object"==typeof k},Ca=function g(){for(var f=arguments.length,c=Array(f),b=0;b<f;b++)c[b]=arguments[b];return c.reduce(function(b,c){return Object.keys(c).forEach(function(a){Array.isArray(b[a])&&Array.isArray(c[a])?b[a]=b[a].concat(c[a]):Cg(b[a])&&Cg(c[a])?b[a]=g(b[a],
c[a]):b[a]=c[a]}),b},{})},Hc=function(g){return g.reduce(function(f,c){return f.concat(c)},[])},Dg=function(g){if(!g.length)return[];for(var f=[],c=0;c<g.length;c++)f.push(g[c]);return f},Eg=function(g){var f;return(f=g.reduce(function(c,b){var a,f=b.attributes.id+(b.attributes.lang||"");c[f]?(b.segments[0].discontinuity=!0,(a=c[f].segments).push.apply(a,b.segments),b.attributes.contentProtection&&(c[f].attributes.contentProtection=b.attributes.contentProtection)):c[f]=b;return c},{}),Object.keys(f).map(function(c){return f[c]})).map(function(c){var b;
return c.discontinuityStarts=(b=c.segments,b.reduce(function(b,c,f){return c.discontinuity&&b.push(f),b},[])),c})},sj=function(g){var f,c=g.attributes;g=g.segments;g={attributes:(f={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},f["PROGRAM-ID"]=1,f),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:g,mediaSequence:g.length?g[0].number:1};return c.contentProtection&&
(g.contentProtection=c.contentProtection),g};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var de,Fg=(function(g,f){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var b=/^([^\/?#]*)(.*)$/;var a=/(?:\/|^)\.(?=\/)/g;var e=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var d={buildAbsoluteURL:function(c,a,f){if(f=f||{},c=c.trim(),!(a=a.trim())){if(!f.alwaysNormalize)return c;f=d.parseURL(c);if(!f)throw Error("Error trying to parse base URL.");
return f.path=d.normalizePath(f.path),d.buildURLFromParts(f)}var g=d.parseURL(a);if(!g)throw Error("Error trying to parse relative URL.");if(g.scheme)return f.alwaysNormalize?(g.path=d.normalizePath(g.path),d.buildURLFromParts(g)):a;a=d.parseURL(c);if(!a)throw Error("Error trying to parse base URL.");!a.netLoc&&a.path&&"/"!==a.path[0]&&(c=b.exec(a.path),a.netLoc=c[1],a.path=c[2]);a.netLoc&&!a.path&&(a.path="/");c={scheme:a.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};
g.netLoc||(c.netLoc=a.netLoc,"/"===g.path[0])||(g.path?(a=a.path,a=a.substring(0,a.lastIndexOf("/")+1)+g.path,c.path=d.normalizePath(a)):(c.path=a.path,g.params||(c.params=a.params,g.query||(c.query=a.query))));return null===c.path&&(c.path=f.alwaysNormalize?d.normalizePath(g.path):g.path),d.buildURLFromParts(c)},parseURL:function(b){return(b=c.exec(b))?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(b){for(b=b.split("").reverse().join("").replace(a,
"");b.length!==(b=b.replace(e,"")).length;);return b.split("").reverse().join("")},buildURLFromParts:function(b){return b.scheme+b.netLoc+b.path+b.params+b.query+b.fragment}};g.exports=d}(de={exports:{}},de.exports),de.exports),ee=function(g,f){return/^[a-z]+:/i.test(f)?f:(/\/\//i.test(g)||(g=Fg.buildAbsoluteURL(m.location.href,g)),Fg.buildAbsoluteURL(g,f))},bc=function(g){var f=g.baseUrl,c=g.source;c=void 0===c?"":c;g=g.range;g=void 0===g?"":g;f={uri:c,resolvedUri:ee((void 0===f?"":f)||"",c)};g&&
(g=g.split("-"),c=parseInt(g[0],10),g=parseInt(g[1],10),f.byterange={length:g-c,offset:c});return f},Gg=function(g,f){var c,b,a,e,d,h,l,p,r,w,u,m,C=g.type;C=void 0===C?"static":C;var D=g.minimumUpdatePeriod;D=void 0===D?0:D;var ja=g.media;ja=void 0===ja?"":ja;var fa=g.sourceDuration,t=g.timescale;t=void 0===t?1:t;var q=g.startNumber;q=void 0===q?1:q;for(var B=g.periodIndex,x=[],v=-1,E=0;E<f.length;E++){var y=f[E],z=y.d,A=y.r||0;y=y.t||0;0>v&&(v=y);y&&v<y&&(v=y);0>A?(A=E+1,A=A===f.length?"dynamic"===
C&&0<D&&0<ja.indexOf("$Number$")?(b=v,a=z,void 0,e=(c=g).NOW,d=c.clientOffset,h=c.availabilityStartTime,l=c.timescale,p=void 0===l?1:l,r=c.start,w=void 0===r?0:r,u=c.minimumUpdatePeriod,m=(e+d)/1E3+(void 0===u?0:u)-(h+w),Math.ceil((m*p-b)/a)):(fa*t-v)/z:(f[A].t-v)/z):A+=1;A=q+x.length+A;for(y=q+x.length;y<A;)x.push({number:y,duration:z/t,time:v,timeline:B}),v+=z,y++}return x},vj={static:function(g){var f=g.timescale;return{start:0,end:Math.ceil(g.sourceDuration/(g.duration/(void 0===f?1:f)))}},dynamic:function(g){var f=
g.timescale;f=void 0===f?1:f;var c=g.duration,b=g.start,a=g.minimumUpdatePeriod,e=g.timeShiftBufferDepth,d=(g.NOW+g.clientOffset)/1E3;g=g.availabilityStartTime+(void 0===b?0:b);return{start:Math.max(0,Math.floor((d-g-(void 0===e?1/0:e))*f/c)),end:Math.min(Math.ceil((d+(void 0===a?0:a)-g)*f/c),Math.floor((d-g)*f/c))}}},fe=function(g){var f=g.type,c=void 0===f?"static":f;f=g.duration;var b=g.timescale;b=void 0===b?1:b;var a=g.sourceDuration,e=vj[c](g);e=function(b,c){for(var a=[];b<c;b++)a.push(b);
return a}(e.start,e.end).map(function(b,c){var a=g.duration,f=g.timescale,d=g.startNumber;return{number:(void 0===d?1:d)+b,duration:a/(void 0===f?1:f),timeline:g.periodIndex,time:c*a}});"static"===c&&(c=e.length-1,e[c].duration=a-f/b*c);return e},wj=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Hg=function(g,f){return g.replace(wj,(c=f,function(b,a,f,d){if("$$"===b)return"$";if("undefined"==typeof c[a])return b;b=""+c[a];return"RepresentationID"===a?b:(d=f?parseInt(d,10):1)<=b.length?b:""+Array(d-b.length+1).join("0")+
b}));var c},xj=function(g,f){var c={RepresentationID:g.id,Bandwidth:g.bandwidth||0},b=g.initialization;b=void 0===b?{sourceURL:"",range:""}:b;var a=bc({baseUrl:g.baseUrl,source:Hg(b.sourceURL,c),range:b.range});return(g.duration||f?g.duration?fe(g):Gg(g,f):[{number:g.startNumber||1,duration:g.sourceDuration,time:0,timeline:g.periodIndex}]).map(function(b){c.Number=b.number;c.Time=b.time;var f=Hg(g.media||"",c);return{uri:f,timeline:b.timeline,duration:b.duration,resolvedUri:ee(g.baseUrl||"",f),map:a,
number:b.number}})},yj=function(g,f){var c=g.duration,b=g.segmentUrls;b=void 0===b?[]:b;if(!c&&!f||c&&f)throw Error("SEGMENT_TIME_UNSPECIFIED");var a,e=b.map(function(b){return a=b,f=(c=g).baseUrl,d=c.initialization,u=bc({baseUrl:f,source:(e=void 0===d?{}:d).sourceURL,range:e.range}),(m=bc({baseUrl:f,source:a.media,range:a.mediaRange})).map=u,m;var c,a,f,d,e,u,m});return c&&(a=fe(g)),f&&(a=Gg(g,f)),a.map(function(b,c){if(e[c])return c=e[c],c.timeline=b.timeline,c.duration=b.duration,c.number=b.number,
c}).filter(function(b){return b})},zj=function(g){var f=g.baseUrl,c=g.initialization,b=void 0===c?{}:c;c=g.sourceDuration;var a=g.timescale;a=void 0===a?1:a;var e=g.indexRange,d=void 0===e?"":e;e=g.duration;if(!f)throw Error("NO_BASE_URL");b=bc({baseUrl:f,source:b.sourceURL,range:b.range});f=bc({baseUrl:f,source:f,range:d});(f.map=b,e)?(g=fe(g),g.length&&(f.duration=g[0].duration,f.timeline=g[0].timeline)):c&&(f.duration=c/a,f.timeline=0);return f.number=0,[f]},Aj=function(g){var f,c,b=g.attributes;
g=g.segmentInfo;if(g.template?(c=xj,f=Ca(b,g.template)):g.base?(c=zj,f=Ca(b,g.base)):g.list&&(c=yj,f=Ca(b,g.list)),!c)return{attributes:b};c=c(f,g.timeline);f.duration?(b=f,g=b.timescale,f.duration=b.duration/(void 0===g?1:g)):c.length?f.duration=c.reduce(function(b,c){return Math.max(b,Math.ceil(c.duration))},0):f.duration=0;return{attributes:f,segments:c}},ha=function(g,f){return Dg(g.childNodes).filter(function(c){return c.tagName===f})},cc=function(g){g=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(g);
if(!g)return 0;g=g.slice(1);var f=g[1],c=g[2],b=g[3],a=g[4],e=g[5];return 31536E3*parseFloat(g[0]||0)+2592E3*parseFloat(f||0)+86400*parseFloat(c||0)+3600*parseFloat(b||0)+60*parseFloat(a||0)+parseFloat(e||0)},Ig={mediaPresentationDuration:function(g){return cc(g)},availabilityStartTime:function(g){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(f=g)&&(f+="Z"),Date.parse(f)/1E3;var f},minimumUpdatePeriod:function(g){return cc(g)},timeShiftBufferDepth:function(g){return cc(g)},start:function(g){return cc(g)},
width:function(g){return parseInt(g,10)},height:function(g){return parseInt(g,10)},bandwidth:function(g){return parseInt(g,10)},startNumber:function(g){return parseInt(g,10)},timescale:function(g){return parseInt(g,10)},duration:function(g){var f=parseInt(g,10);return isNaN(f)?cc(g):f},d:function(g){return parseInt(g,10)},t:function(g){return parseInt(g,10)},r:function(g){return parseInt(g,10)},DEFAULT:function(g){return g}},qa=function(g){return g&&g.attributes?Dg(g.attributes).reduce(function(f,
c){return f[c.name]=(Ig[c.name]||Ig.DEFAULT)(c.value),f},{}):{}},ta,ge,Bj={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ic=function(g,f){return f.length?Hc(g.map(function(c){return f.map(function(b){return ee(c,b.textContent.trim())})})):g},he=function(g){var f=ha(g,
"SegmentTemplate")[0],c=ha(g,"SegmentList")[0],b=c&&ha(c,"SegmentURL").map(function(b){return Ca({tag:"SegmentURL"},qa(b))});g=ha(g,"SegmentBase")[0];var a=c||f;a=a&&ha(a,"SegmentTimeline")[0];var e=c||g||f;e=e&&ha(e,"Initialization")[0];(f=f&&qa(f))&&e?f.initialization=e&&qa(e):f&&f.initialization&&(f.initialization={sourceURL:f.initialization});var d={template:f,timeline:a&&ha(a,"S").map(function(b){return qa(b)}),list:c&&Ca(qa(c),{segmentUrls:b,initialization:qa(e)}),base:g&&Ca(qa(g),{initialization:qa(e)})};
return Object.keys(d).forEach(function(b){d[b]||delete d[b]}),d},Cj=function(g){return g.reduce(function(f,c){var b=qa(c),a=Bj[b.schemeIdUri];if(a&&(f[a]={attributes:b},c=ha(c,"cenc:pssh")[0])){if(b=c=c.textContent.trim()){c=m.atob(c);b=new Uint8Array(c.length);for(var g=0;g<c.length;g++)b[g]=c.charCodeAt(g)}f[a].pssh=b}return f},{})},Dj=function(g,f,c){return function(b){var a=qa(b),e=Ic(f,ha(b,"BaseURL")),d=ha(b,"Role")[0];d={role:qa(d)};a=Ca(g,a,d);d=Cj(ha(b,"ContentProtection"));Object.keys(d).length&&
(a=Ca(a,{contentProtection:d}));var h;d=he(b);b=ha(b,"Representation");var l=Ca(c,d);return Hc(b.map((h=a,function(b){var c=ha(b,"BaseURL");c=Ic(e,c);var a=Ca(h,qa(b)),f=he(b);return c.map(function(b){return{segmentInfo:Ca(l,f),attributes:Ca(a,{baseUrl:b})}})})))}},Ej=function(g,f){void 0===f&&(f={});var c=f;f=c.manifestUri;f=void 0===f?"":f;var b=c.NOW;b=void 0===b?Date.now():b;c=c.clientOffset;c=void 0===c?0:c;var a=ha(g,"Period");if(!a.length)throw Error("INVALID_NUMBER_OF_PERIOD");var e=qa(g),
d=Ic([f],ha(g,"BaseURL"));return e.sourceDuration=e.mediaPresentationDuration||0,e.NOW=b,e.clientOffset=c,Hc(a.map(function(b,c){var a=Ic(d,ha(b,"BaseURL")),f=qa(b);f=parseInt(f.id,10);c=m.isNaN(f)?c:f;c=Ca(e,{periodIndex:c});f=ha(b,"AdaptationSet");b=he(b);return Hc(f.map(Dj(c,a,b)))}))},Jg=function(g){if(""===g)throw Error("DASH_EMPTY_MANIFEST");g=(g=(new m.DOMParser).parseFromString(g,"application/xml"))&&"MPD"===g.documentElement.tagName?g.documentElement:null;if(!g||g&&0<g.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");
return g},Fj=function(g,f){return function(c){var b;if(!c.length)return{};var a=c[0].attributes,f=a.sourceDuration;a=a.minimumUpdatePeriod;var d=void 0===a?0:a,g=Eg(c.filter(function(b){b=b.attributes;return"video/mp4"===b.mimeType||"video"===b.contentType})).map(sj);a=Eg(c.filter(function(b){b=b.attributes;return"audio/mp4"===b.mimeType||"audio"===b.contentType}));c=c.filter(function(b){b=b.attributes;return"text/vtt"===b.mimeType||"text"===b.contentType});f={allowCache:!0,discontinuityStarts:[],
segments:[],endList:!0,mediaGroups:(b={AUDIO:{},VIDEO:{}},b["CLOSED-CAPTIONS"]={},b.SUBTITLES={},b),uri:"",duration:f,playlists:g,minimumUpdatePeriod:1E3*d};return a.length&&(f.mediaGroups.AUDIO.audio=a.reduce(function(b,c){var a,f,d,g,e=c.attributes.role&&c.attributes.role.value||"main",h=c.attributes.lang||"",l="main";return h&&(l=c.attributes.lang+" ("+e+")"),b[l]&&b[l].playlists[0].attributes.BANDWIDTH>c.attributes.bandwidth||(b[l]={language:h,autoselect:!0,default:"main"===e,playlists:[(f=c.attributes,
d=c.segments,g={attributes:(a={NAME:f.id,BANDWIDTH:f.bandwidth,CODECS:f.codecs},a["PROGRAM-ID"]=1,a),uri:"",endList:"static"===(f.type||"static"),timeline:f.periodIndex,resolvedUri:"",targetDuration:f.duration,segments:d,mediaSequence:d.length?d[0].number:1},f.contentProtection&&(g.contentProtection=f.contentProtection),g)],uri:""}),b},{})),c.length&&(f.mediaGroups.SUBTITLES.subs=c.reduce(function(b,c){var a,f,d,g=c.attributes.lang||"text";return b[g]||(b[g]={language:g,default:!1,autoselect:!1,playlists:[(f=
c.attributes,d=c.segments,"undefined"==typeof d&&(d=[{uri:f.baseUrl,timeline:f.periodIndex,resolvedUri:f.baseUrl||"",duration:f.sourceDuration,number:0}],f.duration=f.sourceDuration),{attributes:(a={NAME:f.id,BANDWIDTH:f.bandwidth},a["PROGRAM-ID"]=1,a),uri:"",endList:"static"===(f.type||"static"),timeline:f.periodIndex,resolvedUri:f.baseUrl||"",targetDuration:f.duration,segments:d,mediaSequence:d.length?d[0].number:1})],uri:""}),b},{})),f}(Ej(Jg(g),f).map(Aj))},Gj=function(g){g=Jg(g);if(g=ha(g,"UTCTiming")[0])switch(g=
qa(g),g.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":g.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":g.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":g.method="DIRECT";g.value=Date.parse(g.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}else g=null;return g},
Kg,I,ie,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,je,Tg,Ug,Vg,Da={findBox:ta=function(g,f){var c,b,a=[];if(!f.length)return null;for(c=0;c<g.byteLength;){var e=(g[c]<<24|g[c+1]<<16|g[c+2]<<8|g[c+3])>>>0;var d=ge(g.subarray(c+4,c+8));e=1<e?c+e:g.byteLength;d===f[0]&&(1===f.length?a.push(g.subarray(c+8,e)):(b=ta(g.subarray(c+8,e),f.slice(1))).length&&(a=a.concat(b)));c=e}return a},parseType:ge=function(g){var f="";return f+=String.fromCharCode(g[0]),f+=String.fromCharCode(g[1]),f+=String.fromCharCode(g[2]),f+String.fromCharCode(g[3])},
timescale:function(g){return ta(g,["moov","trak"]).reduce(function(f,c){var b,a,g,d,h;return(b=ta(c,["tkhd"])[0])?(a=b[0],d=(b[g=0===a?12:20]<<24|b[g+1]<<16|b[g+2]<<8|b[g+3])>>>0,(h=ta(c,["mdia","mdhd"])[0])?(g=0===h[0]?12:20,f[d]=(h[g]<<24|h[g+1]<<16|h[g+2]<<8|h[g+3])>>>0,f):null):null},{})},startTime:function(g,f){var c,b,a;return c=ta(f,["moof","traf"]),b=[].concat.apply([],c.map(function(b){return ta(b,["tfhd"]).map(function(c){var a,f;return a=(c[4]<<24|c[5]<<16|c[6]<<8|c[7])>>>0,f=g[a]||9E4,
(ta(b,["tfdt"]).map(function(b){var c,a;return c=b[0],a=(b[4]<<24|b[5]<<16|b[6]<<8|b[7])>>>0,1===c&&(a*=Math.pow(2,32),a+=(b[8]<<24|b[9]<<16|b[10]<<8|b[11])>>>0),a})[0]||1/0)/f})})),a=Math.min.apply(null,b),isFinite(a)?a:0},videoTrackIds:function(g){var f=[];return ta(g,["moov","trak"]).forEach(function(c){var b=ta(c,["mdia","hdlr"]),a=ta(c,["tkhd"]);b.forEach(function(b,c){var d,g;b=ge(b.subarray(8,12));c=a[c];"vide"===b&&(g=0===(d=new DataView(c.buffer,c.byteOffset,c.byteLength)).getUint8(0)?d.getUint32(12):
d.getUint32(20),f.push(g))})}),f}},Wg=Math.pow(2,32)-1;!function(){var g;if(I={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(g in I)I.hasOwnProperty(g)&&(I[g]=[g.charCodeAt(0),g.charCodeAt(1),g.charCodeAt(2),g.charCodeAt(3)]);ie=new Uint8Array([105,
115,111,109]);Mg=new Uint8Array([97,118,99,49]);Lg=new Uint8Array([0,0,0,1]);Ng=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);Og=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Pg={video:Ng,audio:Og};Sg=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);Rg=new Uint8Array([0,0,0,0,0,0,0,0]);Tg=je=new Uint8Array([0,0,0,0,0,0,0,0]);Ug=new Uint8Array([0,
0,0,0,0,0,0,0,0,0,0,0]);Vg=je;Qg=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}();var L=function(g){var f,c=[],b=0;for(f=1;f<arguments.length;f++)c.push(arguments[f]);for(f=c.length;f--;)b+=c[f].byteLength;var a=new Uint8Array(b+8);(new DataView(a.buffer,a.byteOffset,a.byteLength)).setUint32(0,a.byteLength);a.set(g,4);f=0;for(b=8;f<c.length;f++)a.set(c[f],b),b+=c[f].byteLength;return a};var Hj=function(){return L(I.dinf,L(I.dref,Sg))};var Ij=function(g){return L(I.esds,new Uint8Array([0,0,0,0,3,25,0,
0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,g.audioobjecttype<<3|g.samplingfrequencyindex>>>1,g.samplingfrequencyindex<<7|g.channelcount<<3,6,1,2]))};var Jj=function(g){return L(I.hdlr,Pg[g])};var Kj=function(g){var f=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,g.duration>>>24&255,g.duration>>>16&255,g.duration>>>8&255,255&g.duration,85,196,0,0]);return g.samplerate&&(f[12]=g.samplerate>>>24&255,f[13]=g.samplerate>>>16&255,f[14]=g.samplerate>>>8&255,f[15]=255&g.samplerate),L(I.mdhd,f)};
var Mj=function(g){return L(I.mdia,Kj(g),Jj(g.type),Lj(g))};var Nj=function(g){return L(I.mfhd,new Uint8Array([0,0,0,0,(4278190080&g)>>24,(16711680&g)>>16,(65280&g)>>8,255&g]))};var Lj=function(g){return L(I.minf,"video"===g.type?L(I.vmhd,Qg):L(I.smhd,Rg),Hj(),Oj(g))};var Xg=function(g){for(var f=g.length,c=[];f--;)c[f]=Pj(g[f]);return L.apply(null,[I.moov,Qj(4294967295)].concat(c).concat(Rj(g)))};var Rj=function(g){for(var f=g.length,c=[];f--;)c[f]=Sj(g[f]);return L.apply(null,[I.mvex].concat(c))};
var Qj=function(g){g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&g)>>24,(16711680&g)>>16,(65280&g)>>8,255&g,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return L(I.mvhd,g)};var Tj=function(g){var f,c=g.samples||[],b=new Uint8Array(4+c.length);for(f=0;f<c.length;f++)g=c[f].flags,b[f+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return L(I.sdtp,b)};var Oj=
function(g){return L(I.stbl,Uj(g),L(I.stts,Vg),L(I.stsc,Tg),L(I.stsz,Ug),L(I.stco,je))};var Uj=function(g){return L(I.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===g.type?Vj(g):Wj(g))};var Vj=function(g){var f,c=g.sps||[],b=g.pps||[],a=[],e=[];for(f=0;f<c.length;f++)a.push((65280&c[f].byteLength)>>>8),a.push(255&c[f].byteLength),a=a.concat(Array.prototype.slice.call(c[f]));for(f=0;f<b.length;f++)e.push((65280&b[f].byteLength)>>>8),e.push(255&b[f].byteLength),e=e.concat(Array.prototype.slice.call(b[f]));
return L(I.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&g.width)>>8,255&g.width,(65280&g.height)>>8,255&g.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),L(I.avcC,new Uint8Array([1,g.profileIdc,g.profileCompatibility,g.levelIdc,255].concat([c.length]).concat(a).concat([b.length]).concat(e))),L(I.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var Wj=
function(g){return L(I.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&g.channelcount)>>8,255&g.channelcount,(65280&g.samplesize)>>8,255&g.samplesize,0,0,0,0,(65280&g.samplerate)>>8,255&g.samplerate,0,0]),Ij(g))};var Xj=function(g){g=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&g.id)>>24,(16711680&g.id)>>16,(65280&g.id)>>8,255&g.id,0,0,0,0,(4278190080&g.duration)>>24,(16711680&g.duration)>>16,(65280&g.duration)>>8,255&g.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&g.width)>>8,255&g.width,0,0,(65280&g.height)>>8,255&g.height,0,0]);return L(I.tkhd,g)};var Yj=function(g){var f,c,b,a,e,d;return f=L(I.tfhd,new Uint8Array([0,0,0,58,(4278190080&g.id)>>24,(16711680&g.id)>>16,(65280&g.id)>>8,255&g.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),e=Math.floor(g.baseMediaDecodeTime/(Wg+1)),d=Math.floor(g.baseMediaDecodeTime%(Wg+1)),c=L(I.tfdt,new Uint8Array([1,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,d>>>24&255,d>>>
16&255,d>>>8&255,255&d])),92,"audio"===g.type?(b=Yg(g,92),L(I.traf,f,c,b)):(a=Tj(g),b=Yg(g,a.length+92),L(I.traf,f,c,b,a))};var Pj=function(g){return g.duration=g.duration||4294967295,L(I.trak,Xj(g),Mj(g))};var Sj=function(g){var f=new Uint8Array([0,0,0,0,(4278190080&g.id)>>24,(16711680&g.id)>>16,(65280&g.id)>>8,255&g.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==g.type&&(f[f.length-1]=0),L(I.trex,f)};var Zg=function(g,f){var c=0,b=0,a=0,e=0;return g.length&&(void 0!==g[0].duration&&(c=1),
void 0!==g[0].size&&(b=2),void 0!==g[0].flags&&(a=4),void 0!==g[0].compositionTimeOffset&&(e=8)),[0,0,c|b|a|e,1,(4278190080&g.length)>>>24,(16711680&g.length)>>>16,(65280&g.length)>>>8,255&g.length,(4278190080&f)>>>24,(16711680&f)>>>16,(65280&f)>>>8,255&f]};var Zj=function(g,f){var c;f+=20+16*(g=g.samples||[]).length;f=Zg(g,f);for(c=0;c<g.length;c++){var b=g[c];f=f.concat([(4278190080&b.duration)>>>24,(16711680&b.duration)>>>16,(65280&b.duration)>>>8,255&b.duration,(4278190080&b.size)>>>24,(16711680&
b.size)>>>16,(65280&b.size)>>>8,255&b.size,b.flags.isLeading<<2|b.flags.dependsOn,b.flags.isDependedOn<<6|b.flags.hasRedundancy<<4|b.flags.paddingValue<<1|b.flags.isNonSyncSample,61440&b.flags.degradationPriority,15&b.flags.degradationPriority,(4278190080&b.compositionTimeOffset)>>>24,(16711680&b.compositionTimeOffset)>>>16,(65280&b.compositionTimeOffset)>>>8,255&b.compositionTimeOffset])}return L(I.trun,new Uint8Array(f))};var ak=function(g,f){var c;f+=20+8*(g=g.samples||[]).length;f=Zg(g,f);for(c=
0;c<g.length;c++){var b=g[c];f=f.concat([(4278190080&b.duration)>>>24,(16711680&b.duration)>>>16,(65280&b.duration)>>>8,255&b.duration,(4278190080&b.size)>>>24,(16711680&b.size)>>>16,(65280&b.size)>>>8,255&b.size])}return L(I.trun,new Uint8Array(f))};var Yg=function(g,f){return"audio"===g.type?ak(g,f):Zj(g,f)};var dc={ftyp:Kg=function(){return L(I.ftyp,ie,Lg,ie,Mg)},mdat:function(g){return L(I.mdat,g)},moof:function(g,f){for(var c=[],b=f.length;b--;)c[b]=Yj(f[b]);return L.apply(null,[I.moof,Nj(g)].concat(c))},
moov:Xg,initSegment:function(g){var f,c=Kg();g=Xg(g);return(f=new Uint8Array(c.byteLength+g.byteLength)).set(c),f.set(g,c.byteLength),f}},aa=function(){this.init=function(){var g={};this.on=function(f,c){g[f]||(g[f]=[]);g[f]=g[f].concat(c)};this.off=function(f,c){var b;return!!g[f]&&(b=g[f].indexOf(c),g[f]=g[f].slice(),g[f].splice(b,1),-1<b)};this.trigger=function(f){var c,b;if(c=g[f])if(2===arguments.length){var a=c.length;for(b=0;b<a;++b)c[b].call(this,arguments[1])}else{var e=[];for(b=1;b<arguments.length;++b)e.push(arguments[b]);
a=c.length;for(b=0;b<a;++b)c[b].apply(this,e)}};this.dispose=function(){g={}}}};aa.prototype.pipe=function(g){return this.on("data",function(f){g.push(f)}),this.on("done",function(f){g.flush(f)}),g};aa.prototype.push=function(g){this.trigger("data",g)};aa.prototype.flush=function(g){this.trigger("done",g)};var ke,bk=function(g){var f,c,b=[],a=[];for(f=b.byteLength=0;f<g.length;f++)"access_unit_delimiter_rbsp"===(c=g[f]).nalUnitType?(b.length&&(b.duration=c.dts-b.dts,a.push(b)),(b=[c]).byteLength=
c.data.byteLength,b.pts=c.pts,b.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(b.keyFrame=!0),b.duration=c.dts-b.dts,b.byteLength+=c.data.byteLength,b.push(c));return a.length&&(!b.duration||0>=b.duration)&&(b.duration=a[a.length-1].duration),a.push(b),a},ck=function(g){var f,c,b=[],a=[];b.byteLength=0;b.nalCount=0;b.duration=0;b.pts=g[0].pts;b.dts=g[0].dts;a.byteLength=0;a.nalCount=0;a.duration=0;a.pts=g[0].pts;a.dts=g[0].dts;for(f=0;f<g.length;f++)(c=g[f]).keyFrame?(b.length&&
(a.push(b),a.byteLength+=b.byteLength,a.nalCount+=b.nalCount,a.duration+=b.duration),(b=[c]).nalCount=c.length,b.byteLength=c.byteLength,b.pts=c.pts,b.dts=c.dts,b.duration=c.duration):(b.duration+=c.duration,b.nalCount+=c.length,b.byteLength+=c.byteLength,b.push(c));return a.length&&0>=b.duration&&(b.duration=a[a.length-1].duration),a.byteLength+=b.byteLength,a.nalCount+=b.nalCount,a.duration+=b.duration,a.push(b),a},dk=function(g){var f;return!g[0][0].keyFrame&&1<g.length&&(f=g.shift(),g.byteLength-=
f.byteLength,g.nalCount-=f.nalCount,g[0][0].dts=f.dts,g[0][0].pts=f.pts,g[0][0].duration+=f.duration),g},ek=function(g,f){var c,b,a=f||0,e=[];for(f=0;f<g.length;f++){var d=g[f];for(c=0;c<d.length;c++){var h=d[c];(b={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=a;b.compositionTimeOffset=h.pts-h.dts;b.duration=h.duration;b.size=4*h.length;b.size+=h.byteLength;h.keyFrame&&(b.flags.dependsOn=2,b.flags.isNonSyncSample=0);a+=
(h=b).size;e.push(h)}}return e},fk=function(g){var f,c,b,a=0,e=new Uint8Array(g.byteLength+4*g.nalCount),d=new DataView(e.buffer);for(f=0;f<g.length;f++){var h=g[f];for(c=0;c<h.length;c++){var l=h[c];for(b=0;b<l.length;b++){var p=l[b];d.setUint32(a,p.data.byteLength);a+=4;e.set(p.data,a);a+=p.data.byteLength}}}return e},db=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],P=function(g){for(var f=[];g--;)f.push(0);return f},gk=(ke={96E3:[db,[227,64],P(154),[56]],88200:[db,[231],P(170),
[56]],64E3:[db,[248,192],P(240),[56]],48E3:[db,[255,192],P(268),[55,148,128],P(54),[112]],44100:[db,[255,192],P(268),[55,163,128],P(84),[112]],32E3:[db,[255,192],P(268),[55,234],P(226),[112]],24E3:[db,[255,192],P(268),[55,255,128],P(268),[111,112],P(126),[224]],16E3:[db,[255,192],P(268),[55,255,128],P(268),[111,255],P(269),[223,108],P(195),[1,192]],12E3:[le,P(268),[3,127,248],P(268),[6,255,240],P(268),[13,255,224],P(268),[27,253,128],P(259),[56]],11025:[le,P(268),[3,127,248],P(268),[6,255,240],P(268),
[13,255,224],P(268),[27,255,192],P(268),[55,175,128],P(108),[112]],8E3:[le,P(268),[3,121,16],P(47),[7]]},Object.keys(ke).reduce(function(g,f){return g[f]=new Uint8Array(ke[f].reduce(function(c,b){return c.concat(b)},[])),g},{}));var jk=function(g,f){return hk(ik(g,f))};var mk=function(g,f){return kk(lk(g),f)};var hk=function(g){return 9E4*g};var kk=function(g,f){return g*f};var lk=function(g){return g/9E4};var ik=function(g,f){return g/f};var nk=function(g,f,c){return f.minSegmentDts>=c?g:(f.minSegmentDts=
1/0,g.filter(function(b){return b.dts>=c&&(f.minSegmentDts=Math.min(f.minSegmentDts,b.dts),f.minSegmentPts=f.minSegmentDts,!0)}))},ok=function(g){var f,c=0;var b=Uint8Array;var a=0;for(f=0;f<g.length;f++)a+=g[f].data.byteLength;a=new b(a);for(b=0;b<g.length;b++)f=g[b],a.set(f.data,c),c+=f.data.byteLength;return a},ec=function(g){delete g.minSegmentDts;delete g.maxSegmentDts;delete g.minSegmentPts;delete g.maxSegmentPts},$g=function(g,f){var c,b=g.minSegmentDts;return f||(b-=g.timelineStartInfo.dts),
c=g.timelineStartInfo.baseMediaDecodeTime,c+=b,c=Math.max(0,c),"audio"===g.type&&(c*=g.samplerate/9E4,c=Math.floor(c)),c},me=function(g,f){"number"==typeof f.pts&&(void 0===g.timelineStartInfo.pts&&(g.timelineStartInfo.pts=f.pts),void 0===g.minSegmentPts?g.minSegmentPts=f.pts:g.minSegmentPts=Math.min(g.minSegmentPts,f.pts),void 0===g.maxSegmentPts?g.maxSegmentPts=f.pts:g.maxSegmentPts=Math.max(g.maxSegmentPts,f.pts));"number"==typeof f.dts&&(void 0===g.timelineStartInfo.dts&&(g.timelineStartInfo.dts=
f.dts),void 0===g.minSegmentDts?g.minSegmentDts=f.dts:g.minSegmentDts=Math.min(g.minSegmentDts,f.dts),void 0===g.maxSegmentDts?g.maxSegmentDts=f.dts:g.maxSegmentDts=Math.max(g.maxSegmentDts,f.dts))},eb=function f(){f.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new T(0,0),new T(0,1),new T(1,0),new T(1,1)];this.reset();this.ccStreams_.forEach(function(c){c.on("data",this.trigger.bind(this,"data"));c.on("done",this.trigger.bind(this,"done"))},this)};(eb.prototype=new aa).push=
function(f){var c;if(c="sei_rbsp"===f.nalUnitType){var b=f.escapedRBSP;c=0;for(var a={payloadType:-1,payloadSize:0},e=0,d=0;c<b.byteLength&&128!==b[c];){for(;255===b[c];)e+=255,c++;for(e+=b[c++];255===b[c];)d+=255,c++;if(d+=b[c++],!a.payload&&4===e){a.payloadType=e;a.payloadSize=d;a.payload=b.subarray(c,c+d);break}c+=d;d=e=0}c=4===(b=a).payloadType}if(c){var h=b;c=h=181!==h.payload[0]?null:49!=(h.payload[1]<<8|h.payload[2])?null:"GA94"!==String.fromCharCode(h.payload[3],h.payload[4],h.payload[5],
h.payload[6])?null:3!==h.payload[7]?null:h.payload.subarray(8,h.payload.length-1)}if(c)if(f.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(f.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));b=f.pts;var l=[];if(64&h[0])for(a=31&h[0],c=0;c<a;c++)d={type:3&h[2+(e=3*c)],pts:b},4&h[e+2]&&(d.ccData=h[e+3]<<8|h[e+4],l.push(d));this.captionPackets_=this.captionPackets_.concat(l);this.latestDts_!==f.dts&&(this.numSameDts_=
0);this.numSameDts_++;this.latestDts_=f.dts}};eb.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(f,c){f.presortIndex=c}),this.captionPackets_.sort(function(f,c){return f.pts===c.pts?f.presortIndex-c.presortIndex:f.pts-c.pts}),this.captionPackets_.forEach(function(f){2>f.type&&this.dispatchCea608Packet(f)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(f){f.flush()},this)):this.ccStreams_.forEach(function(f){f.flush()},this)};eb.prototype.reset=
function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(f){f.reset()})};eb.prototype.dispatchCea608Packet=function(f){this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1);null!==this.activeCea608Channel_[f.type]&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)};eb.prototype.setsChannel1Active=function(f){return 4096==
(30720&f.ccData)};eb.prototype.setsChannel2Active=function(f){return 6144==(30720&f.ccData)};var pk={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,
568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Jc=function(f){return null===f?"":(f=pk[f]||f,String.fromCharCode(f))},qk=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],nb=function(){for(var f=[],
c=15;c--;)f.push("");return f},T=function a(c,b){a.prototype.init.call(this);this.field_=c||0;this.dataChannel_=b||0;this.name_="CC"+(1+(this.field_<<1|this.dataChannel_));this.setConstants();this.reset();this.push=function(b){var c,a,e;if((c=32639&b.ccData)!==this.lastControlCode_){if(4096==(61440&c)?this.lastControlCode_=c:c!==this.PADDING_&&(this.lastControlCode_=null),a=c>>>8,e=255&c,c!==this.PADDING_)if(c===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(c===this.END_OF_CAPTION_)this.mode_=
"popOn",this.clearFormatting(b.pts),this.flushDisplayed(b.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=b.pts;else if(c===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(b.pts);else if(c===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(b.pts);else if(c===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(b.pts);else if(c===this.CARRIAGE_RETURN_)this.clearFormatting(b.pts),this.flushDisplayed(b.pts),this.shiftRowsUp_(),this.startPts_=
b.pts;else if(c===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(c===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(b.pts),this.displayed_=nb();else if(c===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=nb();else if(c===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(b.pts),this.displayed_=nb()),this.mode_="paintOn",this.startPts_=
b.pts;else if(this.isSpecialCharacter(a,e)){var p=Jc((3&a)<<8|e);this[this.mode_](b.pts,p);this.column_++}else this.isExtCharacter(a,e)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),p=Jc((3&a)<<8|e),this[this.mode_](b.pts,p),this.column_++):this.isMidRowCode(a,e)?(this.clearFormatting(b.pts),this[this.mode_](b.pts," "),this.column_++,14==(14&e)&&this.addFormatting(b.pts,["i"]),1==(1&e)&&
this.addFormatting(b.pts,["u"])):this.isOffsetControlCode(a,e)?this.column_+=3&e:this.isPAC(a,e)?(a=qk.indexOf(7968&c),"rollUp"===this.mode_&&(0>a-this.rollUpRows_+1&&(a=this.rollUpRows_-1),this.setRollUp(b.pts,a)),a!==this.row_&&(this.clearFormatting(b.pts),this.row_=a),1&e&&-1===this.formatting_.indexOf("u")&&this.addFormatting(b.pts,["u"]),16==(16&c)&&(this.column_=4*((14&c)>>1)),this.isColorPAC(e)&&14==(14&e)&&this.addFormatting(b.pts,["i"])):this.isNormalChar(a)&&(0===e&&(e=null),p=Jc(a),p+=
Jc(e),this[this.mode_](b.pts,p),this.column_+=p.length)}else this.lastControlCode_=null}};T.prototype=new aa;T.prototype.flushDisplayed=function(c){var b=this.displayed_.map(function(b){try{return b.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:c,text:b,stream:this.name_})};T.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=nb();this.nonDisplayed_=nb();this.lastControlCode_=null;
this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};T.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=32|this.CONTROL_;this.END_OF_CAPTION_=47|this.CONTROL_;this.ROLL_UP_2_ROWS_=37|this.CONTROL_;this.ROLL_UP_3_ROWS_=38|this.CONTROL_;this.ROLL_UP_4_ROWS_=
39|this.CONTROL_;this.CARRIAGE_RETURN_=45|this.CONTROL_;this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_;this.BACKSPACE_=33|this.CONTROL_;this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_;this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_};T.prototype.isSpecialCharacter=function(c,b){return c===this.EXT_&&48<=b&&63>=b};T.prototype.isExtCharacter=function(c,b){return(c===this.EXT_+1||c===this.EXT_+2)&&32<=b&&63>=b};T.prototype.isMidRowCode=function(c,b){return c===this.EXT_&&32<=b&&47>=b};T.prototype.isOffsetControlCode=
function(c,b){return c===this.OFFSET_&&33<=b&&35>=b};T.prototype.isPAC=function(c,b){return c>=this.BASE_&&c<this.BASE_+8&&64<=b&&127>=b};T.prototype.isColorPAC=function(c){return 64<=c&&79>=c||96<=c&&127>=c};T.prototype.isNormalChar=function(c){return 32<=c&&127>=c};T.prototype.setRollUp=function(c,b){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(c),this.nonDisplayed_=nb(),this.displayed_=nb()),void 0!==b&&b!==this.row_)for(c=0;c<this.rollUpRows_;c++)this.displayed_[b-
c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};T.prototype.addFormatting=function(c,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(b,c){return b+"\x3c"+c+"\x3e"},"");this[this.mode_](c,b)};T.prototype.clearFormatting=function(c){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(b,c){return b+"\x3c/"+c+"\x3e"},"");this.formatting_=[];this[this.mode_](c,b)}};T.prototype.popOn=
function(c,b){c=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=c+b};T.prototype.rollUp=function(c,b){c=this.displayed_[this.row_];this.displayed_[this.row_]=c+b};T.prototype.shiftRowsUp_=function(){var c;for(c=0;c<this.topRow_;c++)this.displayed_[c]="";for(c=this.row_+1;15>c;c++)this.displayed_[c]="";for(c=this.topRow_;c<this.row_;c++)this.displayed_[c]=this.displayed_[c+1];this.displayed_[this.row_]=""};T.prototype.paintOn=function(c,b){c=this.displayed_[this.row_];this.displayed_[this.row_]=
c+b};var rk=T,V={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},fb=function(c,b){var a=1;for(b<c&&(a=-1);4294967296<Math.abs(b-c);)c+=8589934592*a;return c},ah=function a(b){var e,d;a.prototype.init.call(this);this.type_=b;this.push=function(b){b.type===this.type_&&(void 0===d&&(d=b.dts),b.dts=fb(b.dts,d),b.pts=fb(b.pts,d),e=b.dts,this.trigger("data",b))};this.flush=function(){d=e;this.trigger("done")};this.discontinuity=function(){e=d=void 0}};ah.prototype=new aa;var ne,fc=function(b,
a,e){for(var d="";a<e;a++)d+="%"+("00"+b[a].toString(16)).slice(-2);return d},Kc=function(b){return b[0]<<21|b[1]<<14|b[2]<<7|b[3]},bh={TXXX:function(b){var a;if(3===b.data[0]){for(a=1;a<b.data.length;a++)if(0===b.data[a]){b.description=decodeURIComponent(fc(b.data,1,a));b.value=decodeURIComponent(fc(b.data,a+1,b.data.length)).replace(/\0*$/,"");break}b.data=b.value}},WXXX:function(b){var a;if(3===b.data[0])for(a=1;a<b.data.length;a++)if(0===b.data[a]){b.description=decodeURIComponent(fc(b.data,1,
a));b.url=decodeURIComponent(fc(b.data,a+1,b.data.length));break}},PRIV:function(b){var a,e;for(a=0;a<b.data.length;a++)if(0===b.data[a]){b.owner=(e=b.data,unescape(fc(e,0,a)));break}b.privateData=b.data.subarray(a+1);b.data=b.privateData}};(ne=function(b){var a=!(!b||!b.debug),e=b&&b.descriptor,d=0,h=[],l=0;if(ne.prototype.init.call(this),this.dispatchType=V.METADATA_STREAM_TYPE.toString(16),e)for(b=0;b<e.length;b++)this.dispatchType+=("00"+e[b].toString(16)).slice(-2);this.push=function(b){var e,
p,u;if("timed-metadata"===b.type)if(b.dataAlignmentIndicator&&(l=0,h.length=0),0===h.length&&(10>b.data.length||73!==b.data[0]||68!==b.data[1]||51!==b.data[2]))a;else if(h.push(b),l+=b.data.byteLength,1===h.length&&(d=Kc(b.data.subarray(6,10)),d+=10),!(l<d)){b={data:new Uint8Array(d),frames:[],pts:h[0].pts,dts:h[0].dts};for(e=0;e<d;)b.data.set(h[0].data.subarray(0,d-e),e),e+=h[0].data.byteLength,l-=h[0].data.byteLength,h.shift();e=10;64&b.data[5]&&(e+=4,e+=Kc(b.data.subarray(10,14)),d-=Kc(b.data.subarray(16,
20)));do{if(1>(p=Kc(b.data.subarray(e+4,e+8))))return;if((u={id:String.fromCharCode(b.data[e],b.data[e+1],b.data[e+2],b.data[e+3]),data:b.data.subarray(e+10,e+p+10)}).key=u.id,bh[u.id]&&(bh[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var m=u.data,C=(1&m[3])<<30|m[4]<<22|m[5]<<14|m[6]<<6|m[7]>>>2;C*=4;C+=3&m[7];u.timeStamp=C;void 0===b.pts&&void 0===b.dts&&(b.pts=u.timeStamp,b.dts=u.timeStamp);this.trigger("timestamp",u)}b.frames.push(u);e+=10;e+=p}while(e<d);this.trigger("data",
b)}}}).prototype=new aa;var oe,Lc,pe;(oe=function(){var b=new Uint8Array(188),a=0;oe.prototype.init.call(this);this.push=function(e){var d,h=0,l=188;for(a?((d=new Uint8Array(e.byteLength+a)).set(b.subarray(0,a)),d.set(e,a),a=0):d=e;l<d.byteLength;)71!==d[h]||71!==d[l]?(h++,l++):(this.trigger("data",d.subarray(h,l)),h+=188,l+=188);h<d.byteLength&&(b.set(d.subarray(h),0),a=d.byteLength-h)};this.flush=function(){188===a&&71===b[0]&&(this.trigger("data",b),a=0);this.trigger("done")}}).prototype=new aa;
(Lc=function(){var b;Lc.prototype.init.call(this);(b=this).packetsWaitingForPmt=[];this.programMapTable=void 0;var a=function(b,a){var l=0;a.payloadUnitStartIndicator&&(l+=b[l]+1);"pat"===a.type?e(b.subarray(l),a):d(b.subarray(l),a)};var e=function(a,d){d.section_number=a[7];d.last_section_number=a[8];b.pmtPid=(31&a[10])<<8|a[11];d.pmtPid=b.pmtPid};var d=function(a,d){var e;if(1&a[5]){b.programMapTable={video:null,audio:null,"timed-metadata":{}};var l=3+((15&a[1])<<8|a[2])-4;for(e=12+((15&a[10])<<
8|a[11]);e<l;){var h=a[e],u=(31&a[e+1])<<8|a[e+2];h===V.H264_STREAM_TYPE&&null===b.programMapTable.video?b.programMapTable.video=u:h===V.ADTS_STREAM_TYPE&&null===b.programMapTable.audio?b.programMapTable.audio=u:h===V.METADATA_STREAM_TYPE&&(b.programMapTable["timed-metadata"][u]=h);e+=5+((15&a[e+3])<<8|a[e+4])}d.programMapTable=b.programMapTable}};this.push=function(b){var d={},e=4;if(d.payloadUnitStartIndicator=!!(64&b[1]),d.pid=31&b[1],d.pid<<=8,d.pid|=b[2],1<(48&b[3])>>>4&&(e+=b[e]+1),0===d.pid)d.type=
"pat",a(b.subarray(e),d),this.trigger("data",d);else if(d.pid===this.pmtPid)for(d.type="pmt",a(b.subarray(e),d),this.trigger("data",d);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,e,d]):this.processPes_(b,e,d)};this.processPes_=function(b,a,d){d.pid===this.programMapTable.video?d.streamType=V.H264_STREAM_TYPE:d.pid===this.programMapTable.audio?d.streamType=V.ADTS_STREAM_TYPE:d.streamType=
this.programMapTable["timed-metadata"][d.pid];d.type="pes";d.data=b.subarray(a);this.trigger("data",d)}}).prototype=new aa;Lc.STREAM_TYPES={h264:27,adts:15};(pe=function(){var b=this,a={data:[],size:0},e={data:[],size:0},d={data:[],size:0},h=function(a,d,e){var l=new Uint8Array(a.size),h={type:d},p,r=0;if(a.data.length&&!(9>a.size)){h.trackId=a.data[0].pid;for(p=0;p<a.data.length;p++){var m=a.data[p];l.set(m.data,r);r+=m.data.byteLength}var ja;h.packetLength=6+(l[4]<<8|l[5]);h.dataAlignmentIndicator=
0!=(4&l[6]);192&(ja=l[7])&&(h.pts=(14&l[9])<<27|(255&l[10])<<20|(254&l[11])<<12|(255&l[12])<<5|(254&l[13])>>>3,h.pts*=4,h.pts+=(6&l[13])>>>1,h.dts=h.pts,64&ja&&(h.dts=(14&l[14])<<27|(255&l[15])<<20|(254&l[16])<<12|(255&l[17])<<5|(254&l[18])>>>3,h.dts*=4,h.dts+=(6&l[18])>>>1));h.data=l.subarray(9+l[8]);d="video"===d||h.packetLength<=a.size;(e||d)&&(a.size=0,a.data.length=0);d&&b.trigger("data",h)}};pe.prototype.init.call(this);this.push=function(l){({pat:function(){},pes:function(){switch(l.streamType){case V.H264_STREAM_TYPE:case V.H264_STREAM_TYPE:var b=
a;var r="video";break;case V.ADTS_STREAM_TYPE:b=e;r="audio";break;case V.METADATA_STREAM_TYPE:b=d;r="timed-metadata";break;default:return}l.payloadUnitStartIndicator&&h(b,r,!0);b.data.push(l);b.size+=l.data.byteLength},pmt:function(){var a={type:"metadata",tracks:[]},d=l.programMapTable;null!==d.video&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+d.video,codec:"avc",type:"video"});null!==d.audio&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+d.audio,codec:"adts",type:"audio"});
b.trigger("data",a)}})[l.type]()};this.flush=function(){h(a,"video");h(e,"audio");h(d,"timed-metadata");this.trigger("done")}}).prototype=new aa;var ua={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:oe,TransportParseStream:Lc,ElementaryStream:pe,TimestampRolloverStream:ah,CaptionStream:eb,Cea608Stream:rk,MetadataStream:ne},Mc;for(Mc in V)V.hasOwnProperty(Mc)&&(ua[Mc]=V[Mc]);var Nc,ch=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];(Nc=function(){var b;Nc.prototype.init.call(this);
this.push=function(a){var e,d,h,l,p,r=0,w=0;if("audio"===a.type)for(b?(d=b,(b=new Uint8Array(d.byteLength+a.data.byteLength)).set(d),b.set(a.data,d.byteLength)):b=a.data;r+5<b.length;)if(255===b[r]&&240==(246&b[r+1])){if(d=2*(1&~b[r+1]),e=(3&b[r+3])<<11|b[r+4]<<3|(224&b[r+5])>>5,p=9E4*(l=1024*(1+(3&b[r+6])))/ch[(60&b[r+2])>>>2],h=r+e,b.byteLength<h)break;if(this.trigger("data",{pts:a.pts+w*p,dts:a.dts+w*p,sampleCount:l,audioobjecttype:1+(b[r+2]>>>6&3),channelcount:(1&b[r+2])<<2|(192&b[r+3])>>>6,samplerate:ch[(60&
b[r+2])>>>2],samplingfrequencyindex:(60&b[r+2])>>>2,samplesize:16,data:b.subarray(r+7+d,h)}),b.byteLength===h)return void(b=void 0);w++;b=b.subarray(h)}else r++};this.flush=function(){this.trigger("done")}}).prototype=new aa;var qe,re,sk=function(b){var a=b.byteLength,e=0,d=0;this.length=function(){return 8*a};this.bitsAvailable=function(){return 8*a+d};this.loadWord=function(){var h=b.byteLength-a,l=new Uint8Array(4),p=Math.min(4,a);if(0===p)throw Error("no bytes available");l.set(b.subarray(h,h+
p));e=(new DataView(l.buffer)).getUint32(0);d=8*p;a-=p};this.skipBits=function(b){var l;b<d||(b-=d,b-=8*(l=Math.floor(b/8)),a-=l,this.loadWord());e<<=b;d-=b};this.readBits=function(b){var l=Math.min(d,b),h=e>>>32-l;return 0<(d-=l)?e<<=l:0<a&&this.loadWord(),0<(l=b-l)?h<<l|this.readBits(l):h};this.skipLeadingZeros=function(){var b;for(b=0;b<d;++b)if(0!=(e&2147483648>>>b))return e<<=b,d-=b,b;return this.loadWord(),b+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};
this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var b=this.skipLeadingZeros();return this.readBits(b+1)-1};this.readExpGolomb=function(){var b=this.readUnsignedExpGolomb();return 1&b?1+b>>>1:-1*(b>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};(re=function(){var b,a,e=0;re.prototype.init.call(this);this.push=function(d){var h;for(a=a?((h=new Uint8Array(a.byteLength+
d.data.byteLength)).set(a),h.set(d.data,a.byteLength),h):d.data;e<a.byteLength-3;e++)if(1===a[e+2]){b=e+5;break}for(;b<a.byteLength;)switch(a[b]){case 0:if(0!==a[b-1]){b+=2;break}if(0!==a[b-2]){b++;break}for(e+3!==b-2&&this.trigger("data",a.subarray(e+3,b-2));1!==a[++b]&&b<a.length;);e=b-2;b+=3;break;case 1:if(0!==a[b-1]||0!==a[b-2]){b+=3;break}this.trigger("data",a.subarray(e+3,b-2));e=b-2;b+=3;break;default:b+=3}a=a.subarray(e);b-=e;e=0};this.flush=function(){a&&3<a.byteLength&&this.trigger("data",
a.subarray(e+3));a=null;e=0;this.trigger("done")}}).prototype=new aa;var tk={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};(qe=function(){var b,a,e,d,h=new re;qe.prototype.init.call(this);(b=this).push=function(b){"video"===b.type&&(a=b.trackId,e=b.pts,d=b.dts,h.push(b))};h.on("data",function(l){var h={trackId:a,pts:e,dts:d,data:l};switch(31&l[0]){case 5:h.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:h.nalUnitType="sei_rbsp";h.escapedRBSP=
p(l.subarray(1));break;case 7:h.nalUnitType="seq_parameter_set_rbsp";h.escapedRBSP=p(l.subarray(1));h.config=r(h.escapedRBSP);break;case 8:h.nalUnitType="pic_parameter_set_rbsp";break;case 9:h.nalUnitType="access_unit_delimiter_rbsp"}b.trigger("data",h)});h.on("done",function(){b.trigger("done")});this.flush=function(){h.flush()};var l=function(b,a){var d,e=8,l=8;for(d=0;d<b;d++)0!==l&&(l=(e+a.readExpGolomb()+256)%256),e=0===l?e:l};var p=function(b){var a=b.byteLength;for(var d=[],e=1;e<a-2;)0===
b[e]&&0===b[e+1]&&3===b[e+2]?(d.push(e+2),e+=2):e++;if(0===d.length)return b;a-=d.length;var l=new Uint8Array(a);var h=0;for(e=0;e<a;h++,e++)h===d[0]&&(h++,d.shift()),l[e]=b[h];return l};var r=function(b){var a,d,e,h,p,r=0,w=0,m=0,t=0,q=1;if(d=(a=new sk(b)).readUnsignedByte(),e=a.readUnsignedByte(),b=a.readUnsignedByte(),a.skipUnsignedExpGolomb(),tk[d]&&(3===(h=a.readUnsignedExpGolomb())&&a.skipBits(1),a.skipUnsignedExpGolomb(),a.skipUnsignedExpGolomb(),a.skipBits(1),a.readBoolean())){var B=3!==h?
8:12;for(h=0;h<B;h++)a.readBoolean()&&l(6>h?16:64,a)}if(a.skipUnsignedExpGolomb(),0===(h=a.readUnsignedExpGolomb()))a.readUnsignedExpGolomb();else if(1===h)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),B=a.readUnsignedExpGolomb(),h=0;h<B;h++)a.skipExpGolomb();if(a.skipUnsignedExpGolomb(),a.skipBits(1),h=a.readUnsignedExpGolomb(),B=a.readUnsignedExpGolomb(),0===(p=a.readBits(1))&&a.skipBits(1),a.skipBits(1),a.readBoolean()&&(r=a.readUnsignedExpGolomb(),w=a.readUnsignedExpGolomb(),m=a.readUnsignedExpGolomb(),
t=a.readUnsignedExpGolomb()),a.readBoolean()&&a.readBoolean()){switch(a.readUnsignedByte()){case 1:var E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[a.readUnsignedByte()<<8|a.readUnsignedByte(),
a.readUnsignedByte()<<8|a.readUnsignedByte()]}E&&(q=E[0]/E[1])}return{profileIdc:d,levelIdc:b,profileCompatibility:e,width:Math.ceil((16*(h+1)-2*r-2*w)*q),height:(2-p)*(B+1)*16-2*m-2*t}}}).prototype=new aa;var se,uk=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],dh=function(b){return b[0]<<21|b[1]<<14|b[2]<<7|b[3]},Ra={isLikelyAacData:function(b){return 73===b[0]&&68===b[1]&&51===b[2]},parseId3TagSize:function(b,a){var e=b[a+6]<<21|b[a+7]<<14|b[a+8]<<7|b[a+9];return(16&b[a+
5])>>4?e+20:e+10},parseAdtsSize:function(b,a){return 6144&b[a+3]|b[a+4]<<3|(224&b[a+5])>>5},parseType:function(b,a){return 73===b[a]&&68===b[a+1]&&51===b[a+2]?"timed-metadata":1&b[a]&&240==(240&b[a+1])?"audio":null},parseSampleRate:function(b){for(var a=0;a+5<b.length;){if(255===b[a]&&240==(246&b[a+1]))return uk[(60&b[a+2])>>>2];a++}return null},parseAacTimestamp:function(b){var a;var e=10;64&b[5]&&(e+=4,e+=dh(b.subarray(10,14)));do{if(1>(a=dh(b.subarray(e+4,e+8))))break;if("PRIV"===String.fromCharCode(b[e],
b[e+1],b[e+2],b[e+3])){var d=b.subarray(e+10,e+a+10);for(var h=0;h<d.byteLength;h++)if(0===d[h]){var l=unescape,p,r=d,w=h,u="";for(p=0;p<w;p++)u+="%"+("00"+r[p].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"!==l(u))break;b=d.subarray(h+1);e=(1&b[3])<<30|b[4]<<22|b[5]<<14|b[6]<<6|b[7]>>>2;return e*=4,e+(3&b[7])}}e+=10;e+=a}while(e<b.byteLength);return null}};(se=function(){var b=new Uint8Array,a=0;se.prototype.init.call(this);this.setTimestamp=function(b){a=b};this.push=
function(e){var d,h=0;for(b.length?(d=b.length,(b=new Uint8Array(e.byteLength+d)).set(b.subarray(0,d)),b.set(e,d)):b=e;3<=b.length-h;)if(73!==b[h]||68!==b[h+1]||51!==b[h+2])if(255!=(255&b[h])||240!=(240&b[h+1]))h++;else{if(7>b.length-h)break;if(h+(e=Ra.parseAdtsSize(b,h))>b.length)break;d={type:"audio",data:b.subarray(h,h+e),pts:a,dts:a};this.trigger("data",d);h+=e}else{if(10>b.length-h)break;if(h+(e=Ra.parseId3TagSize(b,h))>b.length)break;d={type:"timed-metadata",data:b.subarray(h,h+e)};this.trigger("data",
d);h+=e}b=0<b.length-h?b.subarray(h):new Uint8Array}}).prototype=new aa;var te,Oc,eh,gc,vk=Ra.isLikelyAacData,fh=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],gh=["width","height","profileIdc","levelIdc","profileCompatibility"],hh=function(b,a){var e;if(b.length!==a.length)return!1;for(e=0;e<b.length;e++)if(b[e]!==a[e])return!1;return!0};(Oc=function(b,a){var e=[],d=0,h=0,l=0,p=1/0;a=a||{};Oc.prototype.init.call(this);this.push=function(a){me(b,a);b&&fh.forEach(function(d){b[d]=
a[d]});e.push(a)};this.setEarliestDts=function(a){h=a-b.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(b){p=b};this.setAudioAppendStart=function(b){l=b};this.flush=function(){var r;if(0!==e.length){var w=nk(e,b,h);b.baseMediaDecodeTime=$g(b,a.keepOriginalTimestamps);var u=l,m=p,C,D,ja=0;var t=r=0;if(w.length&&(C=jk(b.baseMediaDecodeTime,b.samplerate),D=Math.ceil(9E4/(b.samplerate/1024)),u&&m&&(ja=C-Math.max(u,m),t=(r=Math.floor(ja/D))*D),!(1>r||45E3<t))){(u=gk[b.samplerate])||
(u=w[0].data);for(m=0;m<r;m++)w.splice(m,0,{data:u});b.baseMediaDecodeTime-=Math.floor(mk(t,b.samplerate))}u=[];for(r=0;r<w.length;r++)t=w[r],u.push({size:t.data.byteLength,duration:1024});b.samples=u;r=dc.mdat(ok(w));e=[];w=dc.moof(d,[b]);t=new Uint8Array(w.byteLength+r.byteLength);d++;t.set(w);t.set(r,w.byteLength);ec(b);this.trigger("data",{track:b,boxes:t})}this.trigger("done","AudioSegmentStream")}}).prototype=new aa;(te=function(b,a){var e,d,h=0,l=[],p=[];a=a||{};te.prototype.init.call(this);
delete b.minPTS;this.gopCache_=[];this.push=function(a){me(b,a);"seq_parameter_set_rbsp"!==a.nalUnitType||e||(e=a.config,b.sps=[a.data],gh.forEach(function(a){b[a]=e[a]},this));"pic_parameter_set_rbsp"!==a.nalUnitType||d||(d=a.data,b.pps=[a.data]);l.push(a)};this.flush=function(){for(var d,e,u;l.length&&"access_unit_delimiter_rbsp"!==l[0].nalUnitType;)l.shift();if(0===l.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(d=bk(l),(u=ck(d))[0][0].keyFrame||((e=this.getGopForFusion_(l[0],
b))?(u.unshift(e),u.byteLength+=e.byteLength,u.nalCount+=e.nalCount,u.pts=e.pts,u.dts=e.dts,u.duration+=e.duration):u=dk(u)),p.length){if(!(d=a.alignGopsAtEnd?this.alignGopsAtEnd_(u):this.alignGopsAtStart_(u)))return this.gopCache_.unshift({gop:u.pop(),pps:b.pps,sps:b.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),l=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ec(b);u=d}me(b,u);b.samples=ek(u);d=dc.mdat(fk(u));b.baseMediaDecodeTime=$g(b,a.keepOriginalTimestamps);
this.trigger("processedGopsInfo",u.map(function(b){return{pts:b.pts,dts:b.dts,byteLength:b.byteLength}}));this.gopCache_.unshift({gop:u.pop(),pps:b.pps,sps:b.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);l=[];this.trigger("baseMediaDecodeTime",b.baseMediaDecodeTime);this.trigger("timelineStartInfo",b.timelineStartInfo);u=dc.moof(h,[b]);e=new Uint8Array(u.byteLength+d.byteLength);h++;e.set(u);e.set(d,u.byteLength);this.trigger("data",{track:b,boxes:e});this.resetStream_();this.trigger("done",
"VideoSegmentStream")};this.resetStream_=function(){ec(b);d=e=void 0};this.getGopForFusion_=function(a){var d,e,l,h,p=1/0;for(h=0;h<this.gopCache_.length;h++){var r=(l=this.gopCache_[h]).gop;b.pps&&hh(b.pps[0],l.pps[0])&&b.sps&&hh(b.sps[0],l.sps[0])&&(r.dts<b.timelineStartInfo.dts||-1E4<=(d=a.dts-r.dts-r.duration)&&45E3>=d&&(!e||d<p)&&(e=l,p=d))}return e?e.gop:null};this.alignGopsAtStart_=function(b){var a,d,e,l,h;var r=b.byteLength;var m=b.nalCount;var t=b.duration;for(a=d=0;a<p.length&&d<b.length&&
(e=p[a],l=b[d],e.pts!==l.pts);)l.pts>e.pts?a++:(d++,r-=l.byteLength,m-=l.nalCount,t-=l.duration);return 0===d?b:d===b.length?null:((h=b.slice(d)).byteLength=r,h.duration=t,h.nalCount=m,h.pts=h[0].pts,h.dts=h[0].dts,h)};this.alignGopsAtEnd_=function(b){var a,d,e;var l=p.length-1;var h=b.length-1;var r=null;for(e=!1;0<=l&&0<=h;){if(a=p[l],d=b[h],a.pts===d.pts){e=!0;break}a.pts>d.pts?l--:(l===p.length-1&&(r=h),h--)}if(!e&&null===r)return null;if(0===(l=e?h:r))return b;b=b.slice(l);l=b.reduce(function(b,
a){return b.byteLength+=a.byteLength,b.duration+=a.duration,b.nalCount+=a.nalCount,b},{byteLength:0,duration:0,nalCount:0});return b.byteLength=l.byteLength,b.duration=l.duration,b.nalCount=l.nalCount,b.pts=b[0].pts,b.dts=b[0].dts,b};this.alignGopsWith=function(b){p=b}}).prototype=new aa;(gc=function(b,a){this.numberOfTracks=0;this.metadataStream=a;"undefined"!=typeof(b=b||{}).remux?this.remuxTracks=!!b.remux:this.remuxTracks=!0;"boolean"==typeof b.keepOriginalTimestamps&&(this.keepOriginalTimestamps=
b.keepOriginalTimestamps);this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;gc.prototype.init.call(this);this.push=function(b){return b.text?this.pendingCaptions.push(b):b.frames?this.pendingMetadata.push(b):(this.pendingTracks.push(b.track),this.pendingBoxes.push(b.boxes),this.pendingBytes+=b.boxes.byteLength,"video"===b.track.type&&(this.videoTrack=b.track),void("audio"===b.track.type&&(this.audioTrack=
b.track)))}}).prototype=new aa;gc.prototype.flush=function(b){var a,e,d=0,h={captions:[],captionStreams:{},metadata:[],info:{}},l=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==b&&"AudioSegmentStream"!==b||this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}this.videoTrack?(l=this.videoTrack.timelineStartInfo.pts,gh.forEach(function(b){h.info[b]=
this.videoTrack[b]},this)):this.audioTrack&&(l=this.audioTrack.timelineStartInfo.pts,fh.forEach(function(b){h.info[b]=this.audioTrack[b]},this));1===this.pendingTracks.length?h.type=this.pendingTracks[0].type:h.type="combined";this.emittedTracks+=this.pendingTracks.length;b=dc.initSegment(this.pendingTracks);h.initSegment=new Uint8Array(b.byteLength);h.initSegment.set(b);h.data=new Uint8Array(this.pendingBytes);for(b=0;b<this.pendingBoxes.length;b++)h.data.set(this.pendingBoxes[b],d),d+=this.pendingBoxes[b].byteLength;
for(b=0;b<this.pendingCaptions.length;b++)(a=this.pendingCaptions[b]).startTime=a.startPts,this.keepOriginalTimestamps||(a.startTime-=l),a.startTime/=9E4,a.endTime=a.endPts,this.keepOriginalTimestamps||(a.endTime-=l),a.endTime/=9E4,h.captionStreams[a.stream]=!0,h.captions.push(a);for(b=0;b<this.pendingMetadata.length;b++)(e=this.pendingMetadata[b]).cueTime=e.pts,this.keepOriginalTimestamps||(e.cueTime-=l),e.cueTime/=9E4,h.metadata.push(e);h.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=
0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",h);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};(eh=function(b){var a,e,d=this,h=!0;eh.prototype.init.call(this);b=b||{};this.baseMediaDecodeTime=b.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var a={};(this.transmuxPipeline_=a).type="aac";a.metadataStream=new ua.MetadataStream;
a.aacStream=new se;a.audioTimestampRolloverStream=new ua.TimestampRolloverStream("audio");a.timedMetadataTimestampRolloverStream=new ua.TimestampRolloverStream("timed-metadata");a.adtsStream=new Nc;a.coalesceStream=new gc(b,a.metadataStream);a.headOfPipeline=a.aacStream;a.aacStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream);a.aacStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream);a.metadataStream.on("timestamp",function(b){a.aacStream.setTimestamp(b.timeStamp)});
a.aacStream.on("data",function(h){"timed-metadata"!==h.type||a.audioSegmentStream||(e=e||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new Oc(e,b),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))});a.coalesceStream.on("data",this.trigger.bind(this,"data"));a.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var h={};(this.transmuxPipeline_=h).type=
"ts";h.metadataStream=new ua.MetadataStream;h.packetStream=new ua.TransportPacketStream;h.parseStream=new ua.TransportParseStream;h.elementaryStream=new ua.ElementaryStream;h.videoTimestampRolloverStream=new ua.TimestampRolloverStream("video");h.audioTimestampRolloverStream=new ua.TimestampRolloverStream("audio");h.timedMetadataTimestampRolloverStream=new ua.TimestampRolloverStream("timed-metadata");h.adtsStream=new Nc;h.h264Stream=new qe;h.captionStream=new ua.CaptionStream;h.coalesceStream=new gc(b,
h.metadataStream);h.headOfPipeline=h.packetStream;h.packetStream.pipe(h.parseStream).pipe(h.elementaryStream);h.elementaryStream.pipe(h.videoTimestampRolloverStream).pipe(h.h264Stream);h.elementaryStream.pipe(h.audioTimestampRolloverStream).pipe(h.adtsStream);h.elementaryStream.pipe(h.timedMetadataTimestampRolloverStream).pipe(h.metadataStream).pipe(h.coalesceStream);h.h264Stream.pipe(h.captionStream).pipe(h.coalesceStream);h.elementaryStream.on("data",function(l){var p;if("metadata"===l.type){for(p=
l.tracks.length;p--;)a||"video"!==l.tracks[p].type?e||"audio"!==l.tracks[p].type||((e=l.tracks[p]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime):(a=l.tracks[p]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime;a&&!h.videoSegmentStream&&(h.coalesceStream.numberOfTracks++,h.videoSegmentStream=new te(a,b),h.videoSegmentStream.on("timelineStartInfo",function(b){e&&(e.timelineStartInfo=b,h.audioSegmentStream.setEarliestDts(b.dts))}),h.videoSegmentStream.on("processedGopsInfo",
d.trigger.bind(d,"gopInfo")),h.videoSegmentStream.on("baseMediaDecodeTime",function(b){e&&h.audioSegmentStream.setVideoBaseMediaDecodeTime(b)}),h.h264Stream.pipe(h.videoSegmentStream).pipe(h.coalesceStream));e&&!h.audioSegmentStream&&(h.coalesceStream.numberOfTracks++,h.audioSegmentStream=new Oc(e,b),h.adtsStream.pipe(h.audioSegmentStream).pipe(h.coalesceStream))}});h.coalesceStream.on("data",this.trigger.bind(this,"data"));h.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=
function(d){var h=this.transmuxPipeline_;b.keepOriginalTimestamps||(this.baseMediaDecodeTime=d);e&&(e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,ec(e),b.keepOriginalTimestamps||(e.timelineStartInfo.baseMediaDecodeTime=d),h.audioTimestampRolloverStream&&h.audioTimestampRolloverStream.discontinuity());a&&(h.videoSegmentStream&&(h.videoSegmentStream.gopCache_=[],h.videoTimestampRolloverStream.discontinuity()),a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,ec(a),h.captionStream.reset(),
b.keepOriginalTimestamps||(a.timelineStartInfo.baseMediaDecodeTime=d));h.timedMetadataTimestampRolloverStream&&h.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(b){e&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(b)};this.alignGopsWith=function(b){a&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(b)};this.push=function(b){if(h){var a=vk(b);a&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():
a||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();h=!1}this.transmuxPipeline_.headOfPipeline.push(b)};this.flush=function(){h=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new aa;var va,ih,Pc=Da.parseType,La=function(b){return new Date(1E3*b-20828448E5)},jh=function(b){return{isLeading:(12&b[0])>>>2,dependsOn:3&b[0],isDependedOn:(192&b[1])>>>6,hasRedundancy:(48&
b[1])>>>4,paddingValue:(14&b[1])>>>1,isNonSyncSample:1&b[1],degradationPriority:b[2]<<8|b[3]}},Db={avc1:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength);return{dataReferenceIndex:a.getUint16(6),width:a.getUint16(24),height:a.getUint16(26),horizresolution:a.getUint16(28)+a.getUint16(30)/16,vertresolution:a.getUint16(32)+a.getUint16(34)/16,frameCount:a.getUint16(40),depth:a.getUint16(74),config:va(b.subarray(78,b.byteLength))}},avcC:function(b){var a,e=new DataView(b.buffer,b.byteOffset,
b.byteLength),d={configurationVersion:b[0],avcProfileIndication:b[1],profileCompatibility:b[2],avcLevelIndication:b[3],lengthSizeMinusOne:3&b[4],sps:[],pps:[]};var h=31&b[5];var l=6;for(a=0;a<h;a++){var p=e.getUint16(l);l+=2;d.sps.push(new Uint8Array(b.subarray(l,l+p)));l+=p}h=b[l];l++;for(a=0;a<h;a++)p=e.getUint16(l),l+=2,d.pps.push(new Uint8Array(b.subarray(l,l+p))),l+=p;return d},btrt:function(b){b=new DataView(b.buffer,b.byteOffset,b.byteLength);return{bufferSizeDB:b.getUint32(0),maxBitrate:b.getUint32(4),
avgBitrate:b.getUint32(8)}},esds:function(b){return{version:b[0],flags:new Uint8Array(b.subarray(1,4)),esId:b[6]<<8|b[7],streamPriority:31&b[8],decoderConfig:{objectProfileIndication:b[11],streamType:b[12]>>>2&63,bufferSize:b[13]<<16|b[14]<<8|b[15],maxBitrate:b[16]<<24|b[17]<<16|b[18]<<8|b[19],avgBitrate:b[20]<<24|b[21]<<16|b[22]<<8|b[23],decoderConfigDescriptor:{tag:b[24],length:b[25],audioObjectType:b[26]>>>3&31,samplingFrequencyIndex:(7&b[26])<<1|b[27]>>>7&1,channelConfiguration:b[27]>>>3&15}}}},
ftyp:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength);a={majorBrand:Pc(b.subarray(0,4)),minorVersion:a.getUint32(4),compatibleBrands:[]};for(var e=8;e<b.byteLength;)a.compatibleBrands.push(Pc(b.subarray(e,e+4))),e+=4;return a},dinf:function(b){return{boxes:va(b)}},dref:function(b){return{version:b[0],flags:new Uint8Array(b.subarray(1,4)),dataReferences:va(b.subarray(8))}},hdlr:function(b){var a={version:(new DataView(b.buffer,b.byteOffset,b.byteLength)).getUint8(0),flags:new Uint8Array(b.subarray(1,
4)),handlerType:Pc(b.subarray(8,12)),name:""},e;for(e=24;e<b.byteLength&&0!==b[e];e++)a.name+=String.fromCharCode(b[e]);return a.name=decodeURIComponent(escape(a.name)),a},mdat:function(b){var a=b.byteLength,e,d,h=new DataView(b.buffer,b.byteOffset,b.byteLength),l=[];for(e=0;e+4<b.length;e+=d)if(d=h.getUint32(e),e+=4,0>=d)l.push("\x3cspan style\x3d'color:red;'\x3eMALFORMED DATA\x3c/span\x3e");else switch(31&b[e]){case 1:l.push("slice_layer_without_partitioning_rbsp");break;case 5:l.push("slice_layer_without_partitioning_rbsp_idr");
break;case 6:l.push("sei_rbsp");break;case 7:l.push("seq_parameter_set_rbsp");break;case 8:l.push("pic_parameter_set_rbsp");break;case 9:l.push("access_unit_delimiter_rbsp");break;default:l.push("UNKNOWN NAL - "+b[e]&31)}return{byteLength:a,nals:l}},mdhd:function(b){var a,e=new DataView(b.buffer,b.byteOffset,b.byteLength),d=4;b={version:e.getUint8(0),flags:new Uint8Array(b.subarray(1,4)),language:""};return 1===b.version?(d+=4,b.creationTime=La(e.getUint32(d)),d+=8,b.modificationTime=La(e.getUint32(d)),
d+=4,b.timescale=e.getUint32(d),d+=8):(b.creationTime=La(e.getUint32(d)),d+=4,b.modificationTime=La(e.getUint32(d)),d+=4,b.timescale=e.getUint32(d),d+=4),b.duration=e.getUint32(d),d+=4,a=e.getUint16(d),b.language+=String.fromCharCode(96+(a>>10)),b.language+=String.fromCharCode(96+((992&a)>>5)),b.language+=String.fromCharCode(96+(31&a)),b},mdia:function(b){return{boxes:va(b)}},mfhd:function(b){return{version:b[0],flags:new Uint8Array(b.subarray(1,4)),sequenceNumber:b[4]<<24|b[5]<<16|b[6]<<8|b[7]}},
minf:function(b){return{boxes:va(b)}},mp4a:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength);a={dataReferenceIndex:a.getUint16(6),channelcount:a.getUint16(16),samplesize:a.getUint16(18),samplerate:a.getUint16(24)+a.getUint16(26)/65536};return 28<b.byteLength&&(a.streamDescriptor=va(b.subarray(28))[0]),a},moof:function(b){return{boxes:va(b)}},moov:function(b){return{boxes:va(b)}},mvex:function(b){return{boxes:va(b)}},mvhd:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength),
e=4,d={version:a.getUint8(0),flags:new Uint8Array(b.subarray(1,4))};return 1===d.version?(e+=4,d.creationTime=La(a.getUint32(e)),e+=8,d.modificationTime=La(a.getUint32(e)),e+=4,d.timescale=a.getUint32(e),e+=8):(d.creationTime=La(a.getUint32(e)),e+=4,d.modificationTime=La(a.getUint32(e)),e+=4,d.timescale=a.getUint32(e),e+=4),d.duration=a.getUint32(e),e+=4,d.rate=a.getUint16(e)+a.getUint16(e+2)/16,e+=4,d.volume=a.getUint8(e)+a.getUint8(e+1)/8,e+=2,e+=2,e+=8,d.matrix=new Uint32Array(b.subarray(e,e+36)),
e+=36,e+=24,d.nextTrackId=a.getUint32(e),d},pdin:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength);return{version:a.getUint8(0),flags:new Uint8Array(b.subarray(1,4)),rate:a.getUint32(4),initialDelay:a.getUint32(8)}},sdtp:function(b){var a,e={version:b[0],flags:new Uint8Array(b.subarray(1,4)),samples:[]};for(a=4;a<b.byteLength;a++)e.samples.push({dependsOn:(48&b[a])>>4,isDependedOn:(12&b[a])>>2,hasRedundancy:3&b[a]});return e},sidx:function(b){var a,e=new DataView(b.buffer,b.byteOffset,
b.byteLength),d={version:b[0],flags:new Uint8Array(b.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8),earliestPresentationTime:e.getUint32(12),firstOffset:e.getUint32(16)},h=e.getUint16(22);for(a=24;h;a+=12,h--)d.references.push({referenceType:(128&b[a])>>>7,referencedSize:2147483647&e.getUint32(a),subsegmentDuration:e.getUint32(a+4),startsWithSap:!!(128&b[a+8]),sapType:(112&b[a+8])>>>4,sapDeltaTime:268435455&e.getUint32(a+8)});return d},smhd:function(b){return{version:b[0],
flags:new Uint8Array(b.subarray(1,4)),balance:b[4]+b[5]/256}},stbl:function(b){return{boxes:va(b)}},stco:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength),e={version:b[0],flags:new Uint8Array(b.subarray(1,4)),chunkOffsets:[]},d=a.getUint32(4);for(b=8;d;b+=4,d--)e.chunkOffsets.push(a.getUint32(b));return e},stsc:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength),e=a.getUint32(4),d={version:b[0],flags:new Uint8Array(b.subarray(1,4)),sampleToChunks:[]};for(b=8;e;b+=12,
e--)d.sampleToChunks.push({firstChunk:a.getUint32(b),samplesPerChunk:a.getUint32(b+4),sampleDescriptionIndex:a.getUint32(b+8)});return d},stsd:function(b){return{version:b[0],flags:new Uint8Array(b.subarray(1,4)),sampleDescriptions:va(b.subarray(8))}},stsz:function(b){var a,e=new DataView(b.buffer,b.byteOffset,b.byteLength),d={version:b[0],flags:new Uint8Array(b.subarray(1,4)),sampleSize:e.getUint32(4),entries:[]};for(a=12;a<b.byteLength;a+=4)d.entries.push(e.getUint32(a));return d},stts:function(b){var a=
new DataView(b.buffer,b.byteOffset,b.byteLength),e={version:b[0],flags:new Uint8Array(b.subarray(1,4)),timeToSamples:[]},d=a.getUint32(4);for(b=8;d;b+=8,d--)e.timeToSamples.push({sampleCount:a.getUint32(b),sampleDelta:a.getUint32(b+4)});return e},styp:function(b){return Db.ftyp(b)},tfdt:function(b){var a={version:b[0],flags:new Uint8Array(b.subarray(1,4)),baseMediaDecodeTime:b[4]<<24|b[5]<<16|b[6]<<8|b[7]};return 1===a.version&&(a.baseMediaDecodeTime*=Math.pow(2,32),a.baseMediaDecodeTime+=b[8]<<24|
b[9]<<16|b[10]<<8|b[11]),a},tfhd:function(b){var a,e=new DataView(b.buffer,b.byteOffset,b.byteLength);b={version:b[0],flags:new Uint8Array(b.subarray(1,4)),trackId:e.getUint32(4)};var d=1&b.flags[2],h=2&b.flags[2],l=8&b.flags[2],p=16&b.flags[2],r=32&b.flags[2],w=65536&b.flags[0],u=131072&b.flags[0];return a=8,d&&(a+=4,b.baseDataOffset=e.getUint32(12),a+=4),h&&(b.sampleDescriptionIndex=e.getUint32(a),a+=4),l&&(b.defaultSampleDuration=e.getUint32(a),a+=4),p&&(b.defaultSampleSize=e.getUint32(a),a+=4),
r&&(b.defaultSampleFlags=e.getUint32(a)),w&&(b.durationIsEmpty=!0),!d&&u&&(b.baseDataOffsetIsMoof=!0),b},tkhd:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength),e=4,d={version:a.getUint8(0),flags:new Uint8Array(b.subarray(1,4))};return 1===d.version?(e+=4,d.creationTime=La(a.getUint32(e)),e+=8,d.modificationTime=La(a.getUint32(e)),e+=4,d.trackId=a.getUint32(e),e+=4,e+=8):(d.creationTime=La(a.getUint32(e)),e+=4,d.modificationTime=La(a.getUint32(e)),e+=4,d.trackId=a.getUint32(e),e+=
4,e+=4),d.duration=a.getUint32(e),e+=4,e+=8,d.layer=a.getUint16(e),e+=2,d.alternateGroup=a.getUint16(e),e+=2,d.volume=a.getUint8(e)+a.getUint8(e+1)/8,e+=2,e+=2,d.matrix=new Uint32Array(b.subarray(e,e+36)),e+=36,d.width=a.getUint16(e)+a.getUint16(e+2)/16,e+=4,d.height=a.getUint16(e)+a.getUint16(e+2)/16,d},traf:function(b){return{boxes:va(b)}},trak:function(b){return{boxes:va(b)}},trex:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength);return{version:b[0],flags:new Uint8Array(b.subarray(1,
4)),trackId:a.getUint32(4),defaultSampleDescriptionIndex:a.getUint32(8),defaultSampleDuration:a.getUint32(12),defaultSampleSize:a.getUint32(16),sampleDependsOn:3&b[20],sampleIsDependedOn:(192&b[21])>>6,sampleHasRedundancy:(48&b[21])>>4,samplePaddingValue:(14&b[21])>>1,sampleIsDifferenceSample:!!(1&b[21]),sampleDegradationPriority:a.getUint16(22)}},trun:function(b){var a,e={version:b[0],flags:new Uint8Array(b.subarray(1,4)),samples:[]},d=new DataView(b.buffer,b.byteOffset,b.byteLength),h=1&e.flags[2],
l=4&e.flags[2],p=1&e.flags[1],r=2&e.flags[1],w=4&e.flags[1],u=8&e.flags[1],m=d.getUint32(4),C=8;h&&(e.dataOffset=d.getInt32(C),C+=4);for(l&&m&&(a={flags:jh(b.subarray(C,C+4))},C+=4,p&&(a.duration=d.getUint32(C),C+=4),r&&(a.size=d.getUint32(C),C+=4),u&&(a.compositionTimeOffset=d.getUint32(C),C+=4),e.samples.push(a),m--);m--;)a={},p&&(a.duration=d.getUint32(C),C+=4),r&&(a.size=d.getUint32(C),C+=4),w&&(a.flags=jh(b.subarray(C,C+4)),C+=4),u&&(a.compositionTimeOffset=d.getUint32(C),C+=4),e.samples.push(a);
return e},"url ":function(b){return{version:b[0],flags:new Uint8Array(b.subarray(1,4))}},vmhd:function(b){var a=new DataView(b.buffer,b.byteOffset,b.byteLength);return{version:b[0],flags:new Uint8Array(b.subarray(1,4)),graphicsmode:a.getUint16(4),opcolor:new Uint16Array([a.getUint16(6),a.getUint16(8),a.getUint16(10)])}}},ue={inspect:va=function(b){var a;var e=0;var d=[];var h=new ArrayBuffer(b.length);var l=new Uint8Array(h);for(a=0;a<b.length;++a)l[a]=b[a];for(h=new DataView(h);e<b.byteLength;){l=
h.getUint32(e);a=Pc(b.subarray(e+4,e+8));var p=1<l?e+l:b.byteLength;(e=(Db[a]||function(b){return{data:b}})(b.subarray(e+8,p))).size=l;e.type=a;d.push(e);e=p}return d},textify:ih=function(b,a){var e;return a=a||0,e=Array(2*a+1).join(" "),b.map(function(b,h){return e+b.type+"\n"+Object.keys(b).filter(function(b){return"type"!==b&&"boxes"!==b}).map(function(a){var d=e+"  "+a+": ";a=b[a];return a instanceof Uint8Array||a instanceof Uint32Array?(a=Array.prototype.slice.call(new Uint8Array(a.buffer,a.byteOffset,
a.byteLength)).map(function(b){return" "+("00"+b.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===a.length?d+"\x3c"+a.join("").slice(1)+"\x3e":d+"\x3c\n"+a.map(function(b){return e+"  "+b}).join("\n")+"\n"+e+"  \x3e":d+"\x3c\x3e":d+JSON.stringify(a,null,2).split("\n").map(function(b,a){return 0===a?b:e+"  "+b}).join("\n")}).join("\n")+(b.boxes?"\n"+ih(b.boxes,a+1):"")}).join("\n")},parseTfdt:Db.tfdt,parseHdlr:Db.hdlr,parseTfhd:Db.tfhd,parseTrun:Db.trun},wk=function(b,a){var e=Da.findBox(b,
["moof","traf"]),d={},h=[];return Da.findBox(b,["mdat"]).forEach(function(b,a){h.push({mdat:b,traf:e[a]})}),h.forEach(function(b){var e,h,l,u,m,C,D=b.mdat;b=b.traf;var t=Da.findBox(b,["tfhd"]);t=ue.parseTfhd(t[0]);var q=t.trackId,B=Da.findBox(b,["tfdt"]);B=0<B.length?ue.parseTfdt(B[0]).baseMediaDecodeTime:0;b=Da.findBox(b,["trun"]);a===q&&0<b.length&&(h=B,l=t.defaultSampleDuration||0,u=t.defaultSampleSize||0,m=t.trackId,C=[],b.forEach(function(b){b=ue.parseTrun(b).samples;b.forEach(function(b){void 0===
b.duration&&(b.duration=l);void 0===b.size&&(b.size=u);b.trackId=m;b.dts=h;void 0===b.compositionTimeOffset&&(b.compositionTimeOffset=0);b.pts=h+b.compositionTimeOffset;h+=b.duration});C=C.concat(b)}),e=function(b,a,d){var e,h,l,p,r=new DataView(b.buffer,b.byteOffset,b.byteLength),w=[];for(h=0;h+4<b.length;h+=l)if(l=r.getUint32(h),h+=4,!(0>=l))switch(31&b[h]){case 6:var u=b.subarray(h+1,h+1+l);a:{var m=h;for(e=0;e<a.length;e++){var C=a[e];if(m<C.size){m=C;break a}m-=C.size}m=null}e=l;C=u;var D=u.byteLength;
for(var t=[],q=1;q<D-2;)0===u[q]&&0===u[q+1]&&3===u[q+2]?(t.push(q+2),q+=2):q++;if(0!==t.length){var ja=D-t.length;D=new Uint8Array(ja);var sb=0;for(q=0;q<ja;sb++,q++)sb===t[0]&&(sb++,t.shift()),D[q]=u[sb];u=D}e={nalUnitType:"sei_rbsp",size:e,data:C,escapedRBSP:u,trackId:d};m?(e.pts=m.pts,e.dts=m.dts,p=m):(e.pts=p.pts,e.dts=p.dts);w.push(e)}return w}(D,C,q),d[q]||(d[q]=[]),d[q]=d[q].concat(e))}),d},xk=function(){var b,a,e,d,h,l=!1;this.isInitialized=function(){return l};this.init=function(){b=new eb;
l=!0;b.on("data",function(b){b.startTime=b.startPts/d;b.endTime=b.endPts/d;h.captions.push(b);h.captionStreams[b.stream]=!0})};this.isNewInit=function(b,a){return!(b&&0===b.length||a&&"object"==typeof a&&0===Object.keys(a).length||e===b[0]&&d===a[e])};this.parse=function(b,l,w){var p,r,m;if(!this.isInitialized()||!l||!w)return null;if(this.isNewInit(l,w))e=l[0],d=w[e];else if(!e||!d)return a.push(b),null;for(;0<a.length;){var D=a.shift();this.parse(D,l,w)}return m=d,null!==(p=(r=e)?{seiNals:wk(b,
r)[r],timescale:m}:null)&&p.seiNals?(this.pushNals(p.seiNals),this.flushStream(),h):null};this.pushNals=function(a){if(!this.isInitialized()||!a||0===a.length)return null;a.forEach(function(a){b.push(a)})};this.flushStream=function(){if(!this.isInitialized())return null;b.flush()};this.clearParsedCaptions=function(){h.captions=[];h.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;b.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};
this.reset=function(){a=[];d=e=null;h?this.clearParsedCaptions():h={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},kh=function(b){var a=31&b[1];return a<<=8,a|b[2]},Qc=function(b){return!!(64&b[1])},Rc=function(b){var a=0;return 1<(48&b[3])>>>4&&(a+=b[4]+1),a},ve=function(b){switch(b){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";
default:return null}};var W={parseType:function(b,a){b=kh(b);return 0===b?"pat":b===a?"pmt":a?"pes":null},parsePat:function(b){var a=Qc(b),e=4+Rc(b);return a&&(e+=b[e]+1),(31&b[e+10])<<8|b[e+11]},parsePmt:function(b){var a={},e=Qc(b),d=4+Rc(b);if(e&&(d+=b[d]+1),1&b[d+5]){e=3+((15&b[d+1])<<8|b[d+2])-4;for(var h=12+((15&b[d+10])<<8|b[d+11]);h<e;){var l=d+h;a[(31&b[l+1])<<8|b[l+2]]=b[l];h+=5+((15&b[l+3])<<8|b[l+4])}return a}},parsePayloadUnitStartIndicator:Qc,parsePesType:function(b,a){switch(a[kh(b)]){case V.H264_STREAM_TYPE:return"video";
case V.ADTS_STREAM_TYPE:return"audio";case V.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(b){if(!Qc(b))return null;var a=4+Rc(b);if(a>=b.byteLength)return null;var e,d=null;return 192&(e=b[a+7])&&((d={}).pts=(14&b[a+9])<<27|(255&b[a+10])<<20|(254&b[a+11])<<12|(255&b[a+12])<<5|(254&b[a+13])>>>3,d.pts*=4,d.pts+=(6&b[a+13])>>>1,d.dts=d.pts,64&e&&(d.dts=(14&b[a+14])<<27|(255&b[a+15])<<20|(254&b[a+16])<<12|(255&b[a+17])<<5|(254&b[a+18])>>>3,d.dts*=4,d.dts+=(6&
b[a+18])>>>1)),d},videoPacketContainsKeyFrame:function(b){var a=4+Rc(b);b=b.subarray(a);for(var e=a=0,d=!1;e<b.byteLength-3;e++)if(1===b[e+2]){a=e+5;break}for(;a<b.byteLength;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}for(e+3!==a-2&&"slice_layer_without_partitioning_rbsp_idr"===ve(31&b[e+3])&&(d=!0);1!==b[++a]&&a<b.length;);e=a-2;a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}"slice_layer_without_partitioning_rbsp_idr"===ve(31&b[e+3])&&(d=!0);e=a-2;a+=3;break;
default:a+=3}return b=b.subarray(e),e=0,b&&3<b.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===ve(31&b[e+3])&&(d=!0),d}};var yk=function(b,a,e){for(var d,h,l,p,r=0,w=188,u=!1;w<=b.byteLength;)if(71!==b[r]||71!==b[w]&&w!==b.byteLength)r++,w++;else{switch(d=b.subarray(r,w),W.parseType(d,a.pid)){case "pes":h=W.parsePesType(d,a.table),l=W.parsePayloadUnitStartIndicator(d),"audio"===h&&l&&(p=W.parsePesTime(d))&&(p.type="audio",e.audio.push(p),u=!0)}if(u)break;r+=188;w+=188}r=(w=b.byteLength)-
188;for(u=!1;0<=r;)if(71!==b[r]||71!==b[w]&&w!==b.byteLength)r--,w--;else{switch(d=b.subarray(r,w),W.parseType(d,a.pid)){case "pes":h=W.parsePesType(d,a.table),l=W.parsePayloadUnitStartIndicator(d),"audio"===h&&l&&(p=W.parsePesTime(d))&&(p.type="audio",e.audio.push(p),u=!0)}if(u)break;r-=188;w-=188}},zk=function(b,a,e){var d,h,l,p,r,w,u=0,m=188,C=!1,D=[];for(r=0;m<b.byteLength;)if(71!==b[u]||71!==b[m])u++,m++;else{switch(d=b.subarray(u,m),W.parseType(d,a.pid)){case "pes":if(h=W.parsePesType(d,a.table),
l=W.parsePayloadUnitStartIndicator(d),"video"===h&&(l&&!C&&(p=W.parsePesTime(d))&&(p.type="video",e.video.push(p),C=!0),!e.firstKeyFrame)){if(l&&0!==r){r=new Uint8Array(r);for(w=0;D.length;){var t=D.shift();r.set(t,w);w+=t.byteLength}W.videoPacketContainsKeyFrame(r)&&(e.firstKeyFrame=W.parsePesTime(r),e.firstKeyFrame.type="video");r=0}D.push(d);r+=d.byteLength}}if(C&&e.firstKeyFrame)break;u+=188;m+=188}u=(m=b.byteLength)-188;for(C=!1;0<=u;)if(71!==b[u]||71!==b[m])u--,m--;else{switch(d=b.subarray(u,
m),W.parseType(d,a.pid)){case "pes":h=W.parsePesType(d,a.table),l=W.parsePayloadUnitStartIndicator(d),"video"===h&&l&&(p=W.parsePesTime(d))&&(p.type="video",e.video.push(p),C=!0)}if(C)break;u-=188;m-=188}},Ak=function(b){var a={pid:null,table:null},e={},d;for(d in function(b,a){for(var d,e=0,h=188;h<b.byteLength;)if(71!==b[e]||71!==b[h])e++,h++;else{switch(d=b.subarray(e,h),W.parseType(d,a.pid)){case "pat":a.pid||(a.pid=W.parsePat(d));break;case "pmt":a.table||(a.table=W.parsePmt(d))}if(a.pid&&a.table)break;
e+=188;h+=188}}(b,a),a.table)if(a.table.hasOwnProperty(d))switch(a.table[d]){case V.H264_STREAM_TYPE:e.video=[];zk(b,a,e);0===e.video.length&&delete e.video;break;case V.ADTS_STREAM_TYPE:e.audio=[],yk(b,a,e),0===e.audio.length&&delete e.audio}return e};$jscomp.initSymbol();$jscomp.initSymbol();var Sc=function(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");},Bk=function(){function b(b,e){for(var a=0;a<e.length;a++){var h=e[a];h.enumerable=h.enumerable||!1;h.configurable=
!0;"value"in h&&(h.writable=!0);Object.defineProperty(b,h.key,h)}}return function(a,e,d){return e&&b(a.prototype,e),d&&b(a,d),a}}(),ra=null,Ck=function(){function b(a){Sc(this,b);if(!ra){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],d=e[0],h=e[1],l=d[4],p=h[4],r,w,u,m=[],C=[],t=void 0,q=void 0,fa=void 0;for(r=0;256>r;r++)C[(m[r]=r<<1^283*(r>>7))^r]=r;for(w=u=0;!l[w];w^=t||1,u=C[u]||1){fa=(fa=u^u<<1^u<<2^u<<3^u<<4)>>8^255&fa^99;var B=16843009*m[q=m[t=m[p[l[w]=fa]=w]]]^65537*q^257*t^16843008*w;var v=257*
m[fa]^16843008*fa;for(r=0;4>r;r++)d[r][w]=v=v<<24^v>>>8,h[r][fa]=B=B<<24^B>>>8}for(r=0;5>r;r++)d[r]=d[r].slice(0),h[r]=h[r].slice(0);ra=e}this._tables=[[ra[0][0].slice(),ra[0][1].slice(),ra[0][2].slice(),ra[0][3].slice(),ra[0][4].slice()],[ra[1][0].slice(),ra[1][1].slice(),ra[1][2].slice(),ra[1][3].slice(),ra[1][4].slice()]];e=this._tables[0][4];d=this._tables[1];r=a.length;w=1;if(4!==r&&6!==r&&8!==r)throw Error("Invalid aes key size");l=a.slice(0);p=[];this._key=[l,p];for(a=r;a<4*r+28;a++)h=l[a-
1],(0==a%r||8===r&&4==a%r)&&(h=e[h>>>24]<<24^e[h>>16&255]<<16^e[h>>8&255]<<8^e[255&h],0==a%r&&(h=h<<8^h>>>24^w<<24,w=w<<1^283*(w>>7))),l[a]=l[a-r]^h;for(r=0;a;r++,a--)h=l[3&r?a:a-4],p[r]=4>=a||4>r?h:d[0][e[h>>>24]]^d[1][e[h>>16&255]]^d[2][e[h>>8&255]]^d[3][e[255&h]]}return b.prototype.decrypt=function(b,e,d,h,l,p){var a=this._key[1];b^=a[0];h^=a[1];d^=a[2];e^=a[3];var w=a.length/4-2,m,t=4;var C=this._tables[1];var D=C[0],q=C[1],fa=C[2],B=C[3],v=C[4];for(m=0;m<w;m++){C=D[b>>>24]^q[h>>16&255]^fa[d>>
8&255]^B[255&e]^a[t];var x=D[h>>>24]^q[d>>16&255]^fa[e>>8&255]^B[255&b]^a[t+1];var y=D[d>>>24]^q[e>>16&255]^fa[b>>8&255]^B[255&h]^a[t+2];e=D[e>>>24]^q[b>>16&255]^fa[h>>8&255]^B[255&d]^a[t+3];t+=4;b=C;h=x;d=y}for(m=0;4>m;m++)l[(3&-m)+p]=v[b>>>24]<<24^v[h>>16&255]<<16^v[d>>8&255]<<8^v[255&e]^a[t++],C=b,b=h,h=d,d=e,e=C},b}(),lh=function(){function b(){Sc(this,b);this.listeners={}}return b.prototype.on=function(b,e){this.listeners[b]||(this.listeners[b]=[]);this.listeners[b].push(e)},b.prototype.off=
function(b,e){if(!this.listeners[b])return!1;e=this.listeners[b].indexOf(e);return this.listeners[b].splice(e,1),-1<e},b.prototype.trigger=function(b){var a=this.listeners[b];if(a)if(2===arguments.length)for(var d=a.length,h=0;h<d;++h)a[h].call(this,arguments[1]);else{d=Array.prototype.slice.call(arguments,1);h=a.length;for(var l=0;l<h;++l)a[l].apply(this,d)}},b.prototype.dispose=function(){this.listeners={}},b.prototype.pipe=function(b){this.on("data",function(a){b.push(a)})},b}(),mh=function(b){function a(){Sc(this,
a);var e=b.call(this,lh);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!=typeof e&&"function"!=typeof e?this:e;return e.jobs=[],e.delay=1,e.timeout_=null,e}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,
a):b.__proto__=a)}(a,b),a.prototype.processJob_=function(){this.jobs.shift()();this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},a.prototype.push=function(b){this.jobs.push(b);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},a}(lh),Ma=function(b){return b<<24|(65280&b)<<8|(16711680&b)>>8|b>>>24},nh=function(b,a,e){var d=new Int32Array(b.buffer,b.byteOffset,b.byteLength>>2);a=new Ck(Array.prototype.slice.call(a));
b=new Uint8Array(b.byteLength);var h=new Int32Array(b.buffer),l;var p=e[0];var r=e[1];var w=e[2];e=e[3];for(l=0;l<d.length;l+=4){var m=Ma(d[l]);var t=Ma(d[l+1]);var C=Ma(d[l+2]);var D=Ma(d[l+3]);a.decrypt(m,t,C,D,h,l);h[l]=Ma(h[l]^p);h[l+1]=Ma(h[l+1]^r);h[l+2]=Ma(h[l+2]^w);h[l+3]=Ma(h[l+3]^e);p=m;r=t;w=C;e=D}return b},Dk=function(){function b(a,e,d,h){Sc(this,b);var l=b.STEP,p=new Int32Array(a.buffer),r=new Uint8Array(a.byteLength);a=0;this.asyncStream_=new mh;this.asyncStream_.push(this.decryptChunk_(p.subarray(a,
a+l),e,d,r));for(a=l;a<p.length;a+=l)d=new Uint32Array([Ma(p[a-4]),Ma(p[a-3]),Ma(p[a-2]),Ma(p[a-1])]),this.asyncStream_.push(this.decryptChunk_(p.subarray(a,a+l),e,d,r));this.asyncStream_.push(function(){h(null,r.subarray(0,r.byteLength-r[r.byteLength-1]))})}return b.prototype.decryptChunk_=function(b,e,d,h){return function(){var a=nh(b,e,d);h.set(a,b.byteOffset)}},Bk(b,null,[{key:"STEP",get:function(){return 32E3}}]),b}(),Sa=function(b,a){return/^[a-z]+:/i.test(a)?a:(/\/\//i.test(b)||(b=Ag.buildAbsoluteURL(m.location.href,
b)),Ag.buildAbsoluteURL(b,a))},ia=function(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");},Na=function(){function b(b,e){for(var a=0;a<e.length;a++){var h=e[a];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(b,h.key,h)}}return function(a,e,d){return e&&b(a.prototype,e),d&&b(a,d),a}}(),Oa=function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+
typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)},Ta=function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?b:a},we=t.mergeOptions,Ek=t.EventTarget,Fk=t.log,xe=function(b,a){["AUDIO","SUBTITLES"].forEach(function(e){for(var d in b.mediaGroups[e])for(var h in b.mediaGroups[e][d])a(b.mediaGroups[e][d][h],
e,d,h)})},ye=function(b,a){b=we(b,{});var e=b.playlists[a.uri];if(!e||e.segments&&a.segments&&e.segments.length===a.segments.length&&e.mediaSequence===a.mediaSequence)return null;var d=we(e,a);e.segments&&(d.segments=function(b,a,d){var e=a.slice();d=d||0;a=Math.min(b.length,a.length+d);for(var h=d;h<a;h++)e[h-d]=we(b[h],e[h-d]);return e}(e.segments,a.segments,a.mediaSequence-e.mediaSequence));d.segments.forEach(function(b){var a=d.resolvedUri;b.resolvedUri||(b.resolvedUri=Sa(a,b.uri));b.key&&!b.key.resolvedUri&&
(b.key.resolvedUri=Sa(a,b.key.uri));b.map&&!b.map.resolvedUri&&(b.map.resolvedUri=Sa(a,b.map.uri))});for(e=0;e<b.playlists.length;e++)b.playlists[e].uri===a.uri&&(b.playlists[e]=d);return b.playlists[a.uri]=d,b},oh=function(b){for(var a=b.playlists.length;a--;){var e=b.playlists[a];(b.playlists[e.uri]=e).resolvedUri=Sa(b.uri,e.uri);e.id=a;e.attributes||(e.attributes={},Fk.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},ph=function(b){xe(b,function(a){a.uri&&(a.resolvedUri=
Sa(b.uri,a.uri))})},qh=function(b,a){var e=b.segments[b.segments.length-1];return a&&e&&e.duration?1E3*e.duration:500*(b.targetDuration||10)},Tc=function(b){function a(b,d,h){ia(this,a);var e=Ta(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));e.srcUrl=b;e.hls_=d;e.withCredentials=h;b=d.options_;if(e.customTagParsers=b&&b.customTagParsers||[],e.customTagMappers=b&&b.customTagMappers||[],!e.srcUrl)throw Error("A non-empty playlist URL is required");return e.state="HAVE_NOTHING",e.on("mediaupdatetimeout",
function(){"HAVE_METADATA"===e.state&&(e.state="HAVE_CURRENT_METADATA",e.request=e.hls_.xhr({uri:Sa(e.master.uri,e.media().uri),withCredentials:e.withCredentials},function(b,a){if(e.request)return b?e.playlistRequestError(e.request,e.media().uri,"HAVE_METADATA"):void e.haveMetadata(e.request,e.media().uri)}))}),e}return Oa(a,Ek),Na(a,[{key:"playlistRequestError",value:function(b,a,h){this.request=null;h&&(this.state=h);this.error={playlist:this.master.playlists[a],status:b.status,message:"HLS playlist request error at URL: "+
a,responseText:b.responseText,code:500<=b.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(b,a){var d=this;this.request=null;this.state="HAVE_METADATA";var e=new Bg;this.customTagParsers.forEach(function(b){return e.addParser(b)});this.customTagMappers.forEach(function(b){return e.addTagMapper(b)});e.push(b.responseText);e.end();e.manifest.uri=a;e.manifest.attributes=e.manifest.attributes||{};b=ye(this.master,e.manifest);this.targetDuration=e.manifest.targetDuration;b?(this.master=
b,this.media_=this.master.playlists[e.manifest.uri]):this.trigger("playlistunchanged");this.media().endList||(m.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=m.setTimeout(function(){d.trigger("mediaupdatetimeout")},qh(this.media(),!!b)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();m.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var b=this.request;this.request=null;b.onreadystatechange=null;b.abort()}}},
{key:"media",value:function(b){var a=this;if(!b)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var e=this.state;if("string"==typeof b){if(!this.master.playlists[b])throw Error("Unknown playlist URI: "+b);b=this.master.playlists[b]}var l=!this.media_||b.uri!==this.media_.uri;if(this.master.playlists[b.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",
this.media_=b,void(l&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(l){if(this.state="SWITCHING_MEDIA",this.request){if(Sa(this.master.uri,b.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:Sa(this.master.uri,b.uri),withCredentials:this.withCredentials},function(d,h){if(a.request){if(d)return a.playlistRequestError(a.request,b.uri,e);a.haveMetadata(h,
b.uri);"HAVE_MASTER"===e?a.trigger("loadedmetadata"):a.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();m.clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(b){var a=this;m.clearTimeout(this.mediaUpdateTimeout);var e=this.media();b?this.mediaUpdateTimeout=
m.setTimeout(function(){return a.load()},e?e.targetDuration/2*1E3:5E3):this.started?e&&!e.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var b=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(a,e){if(b.request){if(b.request=null,a)return b.error={status:e.status,message:"HLS playlist request error at URL: "+b.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===
b.state&&(b.started=!1),b.trigger("error");var d=new Bg;return b.customTagParsers.forEach(function(b){return d.addParser(b)}),b.customTagMappers.forEach(function(b){return d.addTagMapper(b)}),d.push(e.responseText),d.end(),b.state="HAVE_MASTER",d.manifest.uri=b.srcUrl,d.manifest.playlists?(b.master=d.manifest,oh(b.master),ph(b.master),b.trigger("loadedplaylist"),void(b.request||b.media(d.manifest.playlists[0]))):(b.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:m.location.href,
playlists:[{uri:b.srcUrl,id:0}]},b.master.playlists[b.srcUrl]=b.master.playlists[0],b.master.playlists[0].resolvedUri=b.srcUrl,b.master.playlists[0].attributes=b.master.playlists[0].attributes||{},b.haveMetadata(e,b.srcUrl),b.trigger("loadedmetadata"))}})}}]),a}(),rh=t.createTimeRange,sh=function(b,a,e){var d,h;return"undefined"==typeof a&&(a=b.mediaSequence+b.segments.length),a<b.mediaSequence?0:(d=function(b,a){var d=0;a-=b.mediaSequence;var e=b.segments[a];if(e){if("undefined"!=typeof e.start)return{result:e.start,
precise:!0};if("undefined"!=typeof e.end)return{result:e.end-e.duration,precise:!0}}for(;a--;){if("undefined"!=typeof(e=b.segments[a]).end)return{result:d+e.end,precise:!0};if(d+=e.duration,"undefined"!=typeof e.start)return{result:d+e.start,precise:!0}}return{result:d,precise:!1}}(b,a)).precise?d.result:(h=function(b,a){for(var d=0,e=a-b.mediaSequence;e<b.segments.length;e++){if("undefined"!=typeof(a=b.segments[e]).start)return{result:a.start-d,precise:!0};if(d+=a.duration,"undefined"!=typeof a.end)return{result:a.end-
d,precise:!0}}return{result:-1,precise:!1}}(b,a)).precise?h.result:d.result+e},th=function(b,a,e){if(!b)return 0;if("number"!=typeof e&&(e=0),"undefined"==typeof a){if(b.totalDuration)return b.totalDuration;if(!b.endList)return m.Infinity}return sh(b,a,e)},hc=function(b,a,e){var d=0;e<a&&(e=[e,a],a=e[0],e=e[1]);if(0>a){for(;a<Math.min(0,e);a++)d+=b.targetDuration;a=0}for(;a<e;a++)d+=b.segments[a].duration;return d},uh=function(b){if(!b.segments.length)return 0;for(var a=b.segments.length-1,e=b.segments[a].duration||
b.targetDuration,d=e+2*b.targetDuration;a--&&!(d<=(e+=b.segments[a].duration)););return Math.max(0,a)},vh=function(b,a,e){if(!b||!b.segments)return null;if(b.endList)return th(b);if(null===a)return null;a=a||0;e=e?uh(b):b.segments.length;return sh(b,b.mediaSequence+e,a)},wh=function(b,a){if(0==a-Math.floor(a))return a+.1*b;for(var e=a.toString().split(".")[1].length,d=1;d<=e;d++){var h=Math.pow(10,d),l=a*h;if(0==l-Math.floor(l)||d===e)return(l+b)/h}},Gk=wh.bind(null,1),Hk=wh.bind(null,-1),xh=function(b){return b.excludeUntil&&
b.excludeUntil>Date.now()},ze=function(b){return b.excludeUntil&&b.excludeUntil===1/0},Uc=function(b){var a=xh(b);return!b.disabled&&!a},yh=function(b,a){return a.attributes&&a.attributes[b]},Ae=function(b,a){if(1===b.playlists.length)return!0;var e=a.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===b.playlists.filter(function(b){return!!Uc(b)&&(b.attributes.BANDWIDTH||0)<e}).length},Ea={duration:th,seekable:function(b,a){var e=a||0;b=vh(b,a,!0);return null===b?rh():rh(e,b)},safeLiveIndex:uh,getMediaInfoForTime:function(b,
a,e,d){var h,l=void 0,p=b.segments.length,r=a-d;if(0>r){if(0<e)for(h=e-1;0<=h;h--)if(l=b.segments[h],0<(r+=Hk(l.duration)))return{mediaIndex:h,startTime:d-hc(b,e,h)};return{mediaIndex:0,startTime:a}}if(0>e){for(h=e;0>h;h++)if(0>(r-=b.targetDuration))return{mediaIndex:0,startTime:a};e=0}for(h=e;h<p;h++)if(l=b.segments[h],0>(r-=Gk(l.duration)))return{mediaIndex:h,startTime:d+hc(b,e,h)};return{mediaIndex:p-1,startTime:a}},isEnabled:Uc,isDisabled:function(b){return b.disabled},isBlacklisted:xh,isIncompatible:ze,
playlistEnd:vh,isAes:function(b){for(var a=0;a<b.segments.length;a++)if(b.segments[a].key)return!0;return!1},isFmp4:function(b){for(var a=0;a<b.segments.length;a++)if(b.segments[a].map)return!0;return!1},hasAttribute:yh,estimateSegmentRequestTime:function(b,a,e){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return yh("BANDWIDTH",e)?(b*e.attributes.BANDWIDTH-8*d)/a:NaN},isLowestEnabledRendition:Ae},Ik=t.xhr,Jk=t.mergeOptions,zh=function(){return function d(a,e){a=Jk({timeout:45E3},
a);var h=d.beforeRequest||t.Hls.xhr.beforeRequest;h&&"function"==typeof h&&(h=h(a))&&(a=h);var l=Ik(a,function(a,d){var h=l.response;!a&&h&&(l.responseTime=Date.now(),l.roundTripTime=l.responseTime-l.requestTime,l.bytesReceived=h.byteLength||h.length,l.bandwidth||(l.bandwidth=Math.floor(l.bytesReceived/l.roundTripTime*8E3)));d.headers&&(l.responseHeaders=d.headers);a&&"ETIMEDOUT"===a.code&&(l.timedout=!0);a||l.aborted||200===d.statusCode||206===d.statusCode||0===d.statusCode||(a=Error("XHR Failed with a response of: "+
(l&&(h||l.responseText))));e(a,l)}),p=l.abort;return l.abort=function(){return l.aborted=!0,p.apply(l,arguments)},l.uri=a.uri,l.requestTime=Date.now(),l}},Kk=function(b,a){b=b.toString(16);return"00".substring(0,2-b.length)+b+(a%2?" ":"")},Lk=function(b){return 32<=b&&126>b?String.fromCharCode(b):"."},Ah=function(b){var a={};return Object.keys(b).forEach(function(e){var d=b[e];ArrayBuffer.isView(d)?a[e]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:a[e]=d}),a},Vc=function(b){var a=
b.byterange||{length:1/0,offset:0};return[a.length,a.offset,b.resolvedUri].join()},Bh=function(b){b=Array.prototype.slice.call(b);for(var a="",e=0;e<b.length/16;e++)a+=b.slice(16*e,16*e+16).map(Kk).join("")+" "+b.slice(16*e,16*e+16).map(Lk).join("")+"\n";return a},Mk=Object.freeze({createTransferableMessage:Ah,initSegmentId:Vc,hexDump:Bh,tagDump:function(b){return Bh(b.bytes)},textRanges:function(b){var a,e,d="",h;for(h=0;h<b.length;h++)d+=(e=h,(a=b).start(e)+"-"+a.end(e)+" ");return d}}),Ch=function(b,
a,e,d){var h=void 0;if("stream"===a)return h=new Date(1E3*d+e.getTime()),b=b.toISOString(),e=e.toISOString(),h=h.toISOString(),e<=b&&b<=h;if("player"===a)return h=d+e,e<=b&&b<=h},Dh=function(b,a,e){if(!e.segments||0===e.segments.length||"player"!==a&&"stream"!==a)return null;for(var d=0,h=0;h<e.segments.length;h++){var l=e.segments[h],p=d+l.duration,r=void 0;d="player"===a?(r=l.start,d):(r=l.dateTimeObject,l.dateTimeObject);r="undefined"!=typeof l.start&&"undefined"!=typeof l.end&&Ch(b,a,r,l.end-
l.start);var m=Ch(b,a,d,l.duration);if(r)return{segment:l,estimatedStart:d,type:"accurate"};if(m)return{segment:l,estimatedStart:d,type:"estimate"};d=p}return null},Nk=function(b){var a=b.playlist,e=b.time;e=void 0===e?void 0:e;b=b.callback;if(!b)throw Error("getStreamTime: callback must be provided");if(!a||void 0===e)return b({message:"getStreamTime: playlist and time must be provided"});a=Dh(e,"player",a);if(!a)return b({message:"valid streamTime was not found"});if("estimate"===a.type)return b({message:"Accurate streamTime could not be determined. Please seek to e.seekTime and try again",
seekTime:a.estimatedStart});e={mediaSeconds:e};return a.segment.dateTimeObject&&(e.programDateTime=a.segment.dateTimeObject.toISOString()),b(null,e)},Ok=function e(a){var d=a.streamTime,h=a.playlist,l=a.retryCount,p=void 0===l?2:l;l=a.seekTo;var r=a.pauseAfterSeek;r=void 0===r||r;var m=a.tech,u=a.callback;if(!u)throw Error("seekToStreamTime: callback must be provided");if("undefined"==typeof d||!h||!l)return u({message:"seekToStreamTime: streamTime, seekTo and playlist must be provided"});if(!h.endList&&
!m.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!function(a){if(!a.segments||0===a.segments.length)return!1;for(var d=0;d<a.segments.length;d++)if(!a.segments[d].dateTimeObject)return!1;return!0}(h))return u({message:"programDateTime tags must be provided in the manifest "+h.resolvedUri});a=function(a,d){var e=void 0;try{e=new Date(a)}catch(ja){return null}return Dh(e,"stream",d)}(d,h);if(!a)return u({message:d+" was not found in the stream"});if("estimate"===
a.type)return 0===p?u({message:d+" is not buffered yet. Try again"}):e({streamTime:d,playlist:h,retryCount:p-1,seekTo:l,pauseAfterSeek:r,tech:m,callback:u});h=a.segment;d=function(a,d){var e=void 0,h=void 0;try{e=new Date(a),h=new Date(d)}catch(fa){}a=e.getTime();return(h.getTime()-a)/1E3}(h.dateTimeObject,d);d=h.start+d;m.one("seeked",function(){return u(null,m.currentTime())});r&&m.pause();l(d)},ic=1/30,Eh=function(a,e){var d=[],h;if(a&&a.length)for(h=0;h<a.length;h++)e(a.start(h),a.end(h))&&d.push([a.start(h),
a.end(h)]);return t.createTimeRanges(d)},Fh=function(a,e){return Eh(a,function(a,h){return a-ic<=e&&e<=h+ic})},Gh=function(a,e){return Eh(a,function(a){return e<=a-ic})},Be=function(a){var e=[];if(!a||!a.length)return"";for(var d=0;d<a.length;d++)e.push(a.start(d)+" \x3d\x3e "+a.end(d));return e.join(", ")},Hh=function(a){for(var e=[],d=0;d<a.length;d++)e.push({start:a.start(d),end:a.end(d)});return e},Eb=function(a,e,d){var h,l=void 0;if(d&&d.cues)for(h=d.cues.length;h--;)(l=d.cues[h]).startTime<=
e&&l.endTime>=a&&d.removeCue(l)},Ih=function(a){return isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a},Pk=function(a,e,d){var h=m.WebKitDataCue||m.VTTCue;if(e&&e.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new h(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a),d){var l=Ih(a.mediaSource_.duration);if(d.forEach(function(a){var d=a.cueTime+this.timestampOffset;a.frames.forEach(function(a){var e=new h(d,d,a.value||a.url||a.data||"");e.frame=a;e.value=a;Object.defineProperties(e.frame,
{id:{get:function(){return t.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return t.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return t.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}});this.metadataTrack_.addCue(e)},this)},a),a.metadataTrack_&&a.metadataTrack_.cues&&a.metadataTrack_.cues.length){a=a.metadataTrack_.cues;e=[];for(d=
0;d<a.length;d++)a[d]&&e.push(a[d]);var p=e.reduce(function(a,d){var e=a[d.startTime]||[];return e.push(d),a[d.startTime]=e,a},{}),r=Object.keys(p).sort(function(a,d){return Number(a)-Number(d)});r.forEach(function(a,d){var e=Number(r[d+1])||l;p[a].forEach(function(a){a.endTime=e})})}}},ob="undefined"!=typeof window?window:{},qd="undefined"==typeof Symbol?"__target":Symbol(),vi=ob.BlobBuilder||ob.WebKitBlobBuilder||ob.MozBlobBuilder||ob.MSBlobBuilder,vb=ob.URL||ob.webkitURL||vb&&vb.msURL,ub=ob.Worker;
if(ub){var Ce,Jh=nf("self.onmessage \x3d function () {}"),Kh=new Uint8Array(1);try{(Ce=new ub(Jh)).postMessage(Kh,[Kh.buffer])}catch(a){ub=null}finally{vb.revokeObjectURL(Jh),Ce&&Ce.terminate()}}var Rk=new mf("./transmuxer-worker.worker.js",function(a,e){var d=this;!function(){var a,e,p,r,m,u,t,C,q,ja,B,v,x,y,z,A=Math.pow(2,32)-1;!function(){var a;if(e={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],
smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(a in e)e.hasOwnProperty(a)&&(e[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);p=new Uint8Array([105,115,111,109]);m=new Uint8Array([97,118,99,49]);r=new Uint8Array([0,0,0,1]);u=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);t=new Uint8Array([0,
0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);C={video:u,audio:t};B=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);ja=new Uint8Array([0,0,0,0,0,0,0,0]);x=v=new Uint8Array([0,0,0,0,0,0,0,0]);y=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);z=v;q=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}();var E=function(a){var d,e=[],h=0;for(d=1;d<arguments.length;d++)e.push(arguments[d]);for(d=e.length;d--;)h+=e[d].byteLength;var l=new Uint8Array(h+
8);(new DataView(l.buffer,l.byteOffset,l.byteLength)).setUint32(0,l.byteLength);l.set(a,4);d=0;for(h=8;d<e.length;d++)l.set(e[d],h),h+=e[d].byteLength;return l};var F=function(){return E(e.dinf,E(e.dref,B))};var Y=function(a){return E(e.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var G=function(a){return E(e.hdlr,C[a])};var H=function(a){var d=new Uint8Array([0,
0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(d[12]=a.samplerate>>>24&255,d[13]=a.samplerate>>>16&255,d[14]=a.samplerate>>>8&255,d[15]=255&a.samplerate),E(e.mdhd,d)};var I=function(a){return E(e.mdia,H(a),G(a.type),L(a))};var pc=function(a){return E(e.mfhd,new Uint8Array([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))};var L=function(a){return E(e.minf,"video"===a.type?E(e.vmhd,q):E(e.smhd,
ja),F(),P(a))};var K=function(a){for(var d=a.length,h=[];d--;)h[d]=U(a[d]);return E.apply(null,[e.moov,O(4294967295)].concat(h).concat(M(a)))};var M=function(a){for(var d=a.length,h=[];d--;)h[d]=W(a[d]);return E.apply(null,[e.mvex].concat(h))};var O=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return E(e.mvhd,a)};var J=function(a){var d,h=a.samples||[],l=new Uint8Array(4+h.length);for(d=0;d<h.length;d++)a=h[d].flags,l[d+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return E(e.sdtp,l)};var P=function(a){return E(e.stbl,Wa(a),E(e.stts,z),E(e.stsc,x),E(e.stsz,y),E(e.stco,v))};var Wa=function(a){return E(e.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===a.type?Q(a):R(a))};var Q=function(a){var d,h=a.sps||[],l=a.pps||[],p=[],r=[];for(d=0;d<h.length;d++)p.push((65280&
h[d].byteLength)>>>8),p.push(255&h[d].byteLength),p=p.concat(Array.prototype.slice.call(h[d]));for(d=0;d<l.length;d++)r.push((65280&l[d].byteLength)>>>8),r.push(255&l[d].byteLength),r=r.concat(Array.prototype.slice.call(l[d]));return E(e.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,
24,17,17]),E(e.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([h.length]).concat(p).concat([l.length]).concat(r))),E(e.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var R=function(a){return E(e.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),Y(a))};var S=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,
0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return E(e.tkhd,a)};var T=function(a){var d,h,l,p,r,m;return d=E(e.tfhd,new Uint8Array([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>
8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),r=Math.floor(a.baseMediaDecodeTime/(A+1)),m=Math.floor(a.baseMediaDecodeTime%(A+1)),h=E(e.tfdt,new Uint8Array([1,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,m>>>24&255,m>>>16&255,m>>>8&255,255&m])),92,"audio"===a.type?(l=aa(a,92),E(e.traf,d,h,l)):(p=J(a),l=aa(a,p.length+92),E(e.traf,d,h,l,p))};var U=function(a){return a.duration=a.duration||4294967295,E(e.trak,S(a),I(a))};var W=function(a){var d=new Uint8Array([0,0,0,0,(4278190080&a.id)>>24,(16711680&
a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(d[d.length-1]=0),E(e.trex,d)};var ba=function(a,d){var e=0,h=0,l=0,p=0;return a.length&&(void 0!==a[0].duration&&(e=1),void 0!==a[0].size&&(h=2),void 0!==a[0].flags&&(l=4),void 0!==a[0].compositionTimeOffset&&(p=8)),[0,0,e|h|l|p,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&d)>>>24,(16711680&d)>>>16,(65280&d)>>>8,255&d]};var ea=function(a,d){var h;d+=
20+16*(a=a.samples||[]).length;d=ba(a,d);for(h=0;h<a.length;h++){var l=a[h];d=d.concat([(4278190080&l.duration)>>>24,(16711680&l.duration)>>>16,(65280&l.duration)>>>8,255&l.duration,(4278190080&l.size)>>>24,(16711680&l.size)>>>16,(65280&l.size)>>>8,255&l.size,l.flags.isLeading<<2|l.flags.dependsOn,l.flags.isDependedOn<<6|l.flags.hasRedundancy<<4|l.flags.paddingValue<<1|l.flags.isNonSyncSample,61440&l.flags.degradationPriority,15&l.flags.degradationPriority,(4278190080&l.compositionTimeOffset)>>>24,
(16711680&l.compositionTimeOffset)>>>16,(65280&l.compositionTimeOffset)>>>8,255&l.compositionTimeOffset])}return E(e.trun,new Uint8Array(d))};var ha=function(a,d){var h;d+=20+8*(a=a.samples||[]).length;d=ba(a,d);for(h=0;h<a.length;h++){var l=a[h];d=d.concat([(4278190080&l.duration)>>>24,(16711680&l.duration)>>>16,(65280&l.duration)>>>8,255&l.duration,(4278190080&l.size)>>>24,(16711680&l.size)>>>16,(65280&l.size)>>>8,255&l.size])}return E(e.trun,new Uint8Array(d))};var aa=function(a,d){return"audio"===
a.type?ha(a,d):ea(a,d)};var V={ftyp:a=function(){return E(e.ftyp,p,r,p,m)},mdat:function(a){return E(e.mdat,a)},moof:function(a,d){for(var h=[],l=d.length;l--;)h[l]=T(d[l]);return E.apply(null,[e.moof,pc(a)].concat(h))},moov:K,initSegment:function(d){var e,h=a();d=K(d);return(e=new Uint8Array(h.byteLength+d.byteLength)).set(h),e.set(d,h.byteLength),e}},la=function(){this.init=function(){var a={};this.on=function(d,e){a[d]||(a[d]=[]);a[d]=a[d].concat(e)};this.off=function(d,e){var h;return!!a[d]&&
(h=a[d].indexOf(e),a[d]=a[d].slice(),a[d].splice(h,1),-1<h)};this.trigger=function(d){var e,h;if(e=a[d])if(2===arguments.length){var l=e.length;for(h=0;h<l;++h)e[h].call(this,arguments[1])}else{var p=[];for(h=1;h<arguments.length;++h)p.push(arguments[h]);l=e.length;for(h=0;h<l;++h)e[h].apply(this,p)}};this.dispose=function(){a={}}}};la.prototype.pipe=function(a){return this.on("data",function(d){a.push(d)}),this.on("done",function(d){a.flush(d)}),a};la.prototype.push=function(a){this.trigger("data",
a)};la.prototype.flush=function(a){this.trigger("done",a)};var da,ma=function(a){var d,e,h=[],l=[];for(d=h.byteLength=0;d<a.length;d++)"access_unit_delimiter_rbsp"===(e=a[d]).nalUnitType?(h.length&&(h.duration=e.dts-h.dts,l.push(h)),(h=[e]).byteLength=e.data.byteLength,h.pts=e.pts,h.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(h.keyFrame=!0),h.duration=e.dts-h.dts,h.byteLength+=e.data.byteLength,h.push(e));return l.length&&(!h.duration||0>=h.duration)&&(h.duration=l[l.length-
1].duration),l.push(h),l},na=function(a){var d,e,h=[],l=[];h.byteLength=0;h.nalCount=0;h.duration=0;h.pts=a[0].pts;h.dts=a[0].dts;l.byteLength=0;l.nalCount=0;l.duration=0;l.pts=a[0].pts;l.dts=a[0].dts;for(d=0;d<a.length;d++)(e=a[d]).keyFrame?(h.length&&(l.push(h),l.byteLength+=h.byteLength,l.nalCount+=h.nalCount,l.duration+=h.duration),(h=[e]).nalCount=e.length,h.byteLength=e.byteLength,h.pts=e.pts,h.dts=e.dts,h.duration=e.duration):(h.duration+=e.duration,h.nalCount+=e.length,h.byteLength+=e.byteLength,
h.push(e));return l.length&&0>=h.duration&&(h.duration=l[l.length-1].duration),l.byteLength+=h.byteLength,l.nalCount+=h.nalCount,l.duration+=h.duration,l.push(h),l},pa=function(a){var d;return!a[0][0].keyFrame&&1<a.length&&(d=a.shift(),a.byteLength-=d.byteLength,a.nalCount-=d.nalCount,a[0][0].dts=d.dts,a[0][0].pts=d.pts,a[0][0].duration+=d.duration),a},qa=function(a,d){var e,h,l=d||0,p=[];for(d=0;d<a.length;d++){var r=a[d];for(e=0;e<r.length;e++){var m=r[e];(h={size:0,flags:{isLeading:0,dependsOn:1,
isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=l;h.compositionTimeOffset=m.pts-m.dts;h.duration=m.duration;h.size=4*m.length;h.size+=m.byteLength;m.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0);l+=(m=h).size;p.push(m)}}return p},bb=function(a){var d,e,h,l=0,p=new Uint8Array(a.byteLength+4*a.nalCount),r=new DataView(p.buffer);for(d=0;d<a.length;d++){var m=a[d];for(e=0;e<m.length;e++){var u=m[e];for(h=0;h<u.length;h++){var w=u[h];r.setUint32(l,w.data.byteLength);
l+=4;p.set(w.data,l);l+=w.data.byteLength}}}return p},wa=[33,16,5,32,164,27],ca=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],N=function(a){for(var d=[];a--;)d.push(0);return d},sa=(da={96E3:[wa,[227,64],N(154),[56]],88200:[wa,[231],N(170),[56]],64E3:[wa,[248,192],N(240),[56]],48E3:[wa,[255,192],N(268),[55,148,128],N(54),[112]],44100:[wa,[255,192],N(268),[55,163,128],N(84),[112]],32E3:[wa,[255,192],N(268),[55,234],N(226),[112]],24E3:[wa,[255,192],N(268),[55,255,128],N(268),[111,112],N(126),[224]],16E3:[wa,
[255,192],N(268),[55,255,128],N(268),[111,255],N(269),[223,108],N(195),[1,192]],12E3:[ca,N(268),[3,127,248],N(268),[6,255,240],N(268),[13,255,224],N(268),[27,253,128],N(259),[56]],11025:[ca,N(268),[3,127,248],N(268),[6,255,240],N(268),[13,255,224],N(268),[27,255,192],N(268),[55,175,128],N(108),[112]],8E3:[ca,N(268),[3,121,16],N(47),[7]]},Object.keys(da).reduce(function(a,d){return a[d]=new Uint8Array(da[d].reduce(function(a,d){return a.concat(d)},[])),a},{}));var va=function(a,d){return Aa(Fa(a,d))};
var xa=function(a,d){return Ca(Ea(a),d)};var Aa=function(a){return 9E4*a};var Ca=function(a,d){return a*d};var Ea=function(a){return a/9E4};var Fa=function(a,d){return a/d};var qc=function(a,d,e){return d.minSegmentDts>=e?a:(d.minSegmentDts=1/0,a.filter(function(a){return a.dts>=e&&(d.minSegmentDts=Math.min(d.minSegmentDts,a.dts),d.minSegmentPts=d.minSegmentDts,!0)}))},Ja=function(a){var d,e=0;var h=Uint8Array;var l=0;for(d=0;d<a.length;d++)l+=a[d].data.byteLength;l=new h(l);for(h=0;h<a.length;h++)d=
a[h],l.set(d.data,e),e+=d.data.byteLength;return l},ka=function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},za=function(a,d){var e,h=a.minSegmentDts;return d||(h-=a.timelineStartInfo.dts),e=a.timelineStartInfo.baseMediaDecodeTime,e+=h,e=Math.max(0,e),"audio"===a.type&&(e*=a.samplerate/9E4,e=Math.floor(e)),e},ua=function(a,d){"number"==typeof d.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=d.pts),void 0===a.minSegmentPts?a.minSegmentPts=
d.pts:a.minSegmentPts=Math.min(a.minSegmentPts,d.pts),void 0===a.maxSegmentPts?a.maxSegmentPts=d.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,d.pts));"number"==typeof d.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=d.dts),void 0===a.minSegmentDts?a.minSegmentDts=d.dts:a.minSegmentDts=Math.min(a.minSegmentDts,d.dts),void 0===a.maxSegmentDts?a.maxSegmentDts=d.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,d.dts))};wa=function Qk(){Qk.prototype.init.call(this);this.captionPackets_=[];
this.ccStreams_=[new X(0,0),new X(0,1),new X(1,0),new X(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};(wa.prototype=new la).push=function(a){var d;if(d="sei_rbsp"===a.nalUnitType){var e=a.escapedRBSP;d=0;for(var h={payloadType:-1,payloadSize:0},l=0,p=0;d<e.byteLength&&128!==e[d];){for(;255===e[d];)l+=255,d++;for(l+=e[d++];255===e[d];)p+=255,d++;if(p+=e[d++],!h.payload&&4===l){h.payloadType=l;h.payloadSize=
p;h.payload=e.subarray(d,d+p);break}d+=p;p=l=0}d=4===(e=h).payloadType}if(d){var r=e;d=r=181!==r.payload[0]?null:49!=(r.payload[1]<<8|r.payload[2])?null:"GA94"!==String.fromCharCode(r.payload[3],r.payload[4],r.payload[5],r.payload[6])?null:3!==r.payload[7]?null:r.payload.subarray(8,r.payload.length-1)}if(d)if(a.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));e=
a.pts;var m=[];if(64&r[0])for(h=31&r[0],d=0;d<h;d++)p={type:3&r[2+(l=3*d)],pts:e},4&r[l+2]&&(p.ccData=r[l+3]<<8|r[l+4],m.push(p));this.captionPackets_=this.captionPackets_.concat(m);this.latestDts_!==a.dts&&(this.numSameDts_=0);this.numSameDts_++;this.latestDts_=a.dts}};wa.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,d){a.presortIndex=d}),this.captionPackets_.sort(function(a,d){return a.pts===d.pts?a.presortIndex-d.presortIndex:a.pts-d.pts}),this.captionPackets_.forEach(function(a){2>
a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};wa.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};wa.prototype.dispatchCea608Packet=function(a){this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&
(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};wa.prototype.setsChannel1Active=function(a){return 4096==(30720&a.ccData)};wa.prototype.setsChannel2Active=function(a){return 6144==(30720&a.ccData)};var La={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,
319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,
830:9492,831:9496},ra=function(a){return null===a?"":(a=La[a]||a,String.fromCharCode(a))},Ma=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ia=function(){for(var a=[],d=15;d--;)a.push("");return a},X=function De(a,d){De.prototype.init.call(this);this.field_=a||0;this.dataChannel_=d||0;this.name_="CC"+(1+(this.field_<<1|this.dataChannel_));this.setConstants();this.reset();this.push=function(a){var d,e,h;if((d=32639&a.ccData)!==this.lastControlCode_){if(4096==(61440&d)?
this.lastControlCode_=d:d!==this.PADDING_&&(this.lastControlCode_=null),e=d>>>8,h=255&d,d!==this.PADDING_)if(d===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(d===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),d=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=d,this.startPts_=a.pts;else if(d===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(a.pts);else if(d===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(a.pts);
else if(d===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(a.pts);else if(d===this.CARRIAGE_RETURN_)this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;else if(d===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(d===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(a.pts),this.displayed_=ia();else if(d===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=
ia();else if(d===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=ia()),this.mode_="paintOn",this.startPts_=a.pts;else if(this.isSpecialCharacter(e,h)){var l=ra((3&e)<<8|h);this[this.mode_](a.pts,l);this.column_++}else this.isExtCharacter(e,h)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),l=ra((3&e)<<8|h),this[this.mode_](a.pts,l),this.column_++):
this.isMidRowCode(e,h)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14==(14&h)&&this.addFormatting(a.pts,["i"]),1==(1&h)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(e,h)?this.column_+=3&h:this.isPAC(e,h)?(e=Ma.indexOf(7968&d),"rollUp"===this.mode_&&(0>e-this.rollUpRows_+1&&(e=this.rollUpRows_-1),this.setRollUp(a.pts,e)),e!==this.row_&&(this.clearFormatting(a.pts),this.row_=e),1&h&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16==(16&
d)&&(this.column_=4*((14&d)>>1)),this.isColorPAC(h)&&14==(14&h)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(e)&&(0===h&&(h=null),l=ra(e),l+=ra(h),this[this.mode_](a.pts,l),this.column_+=l.length)}else this.lastControlCode_=null}};X.prototype=new la;X.prototype.flushDisplayed=function(a){var d=this.displayed_.map(function(a){try{return a.trim()}catch(pl){return""}}).join("\n").replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:d,stream:this.name_})};
X.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=ia();this.nonDisplayed_=ia();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};X.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=
32|this.CONTROL_;this.END_OF_CAPTION_=47|this.CONTROL_;this.ROLL_UP_2_ROWS_=37|this.CONTROL_;this.ROLL_UP_3_ROWS_=38|this.CONTROL_;this.ROLL_UP_4_ROWS_=39|this.CONTROL_;this.CARRIAGE_RETURN_=45|this.CONTROL_;this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_;this.BACKSPACE_=33|this.CONTROL_;this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_;this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_};X.prototype.isSpecialCharacter=function(a,d){return a===this.EXT_&&48<=d&&63>=d};X.prototype.isExtCharacter=function(a,
d){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=d&&63>=d};X.prototype.isMidRowCode=function(a,d){return a===this.EXT_&&32<=d&&47>=d};X.prototype.isOffsetControlCode=function(a,d){return a===this.OFFSET_&&33<=d&&35>=d};X.prototype.isPAC=function(a,d){return a>=this.BASE_&&a<this.BASE_+8&&64<=d&&127>=d};X.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};X.prototype.isNormalChar=function(a){return 32<=a&&127>=a};X.prototype.setRollUp=function(a,d){if("rollUp"!==this.mode_&&(this.row_=
14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=ia(),this.displayed_=ia()),void 0!==d&&d!==this.row_)for(a=0;a<this.rollUpRows_;a++)this.displayed_[d-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===d&&(d=this.row_);this.topRow_=d-this.rollUpRows_+1};X.prototype.addFormatting=function(a,d){this.formatting_=this.formatting_.concat(d);d=d.reduce(function(a,d){return a+"\x3c"+d+"\x3e"},"");this[this.mode_](a,d)};X.prototype.clearFormatting=function(a){if(this.formatting_.length){var d=
this.formatting_.reverse().reduce(function(a,d){return a+"\x3c/"+d+"\x3e"},"");this.formatting_=[];this[this.mode_](a,d)}};X.prototype.popOn=function(a,d){a=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=a+d};X.prototype.rollUp=function(a,d){a=this.displayed_[this.row_];this.displayed_[this.row_]=a+d};X.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=
this.displayed_[a+1];this.displayed_[this.row_]=""};X.prototype.paintOn=function(a,d){a=this.displayed_[this.row_];this.displayed_[this.row_]=a+d};ca=X;var Ua={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ga=function(a,d){var e=1;for(d<a&&(e=-1);4294967296<Math.abs(d-a);)a+=8589934592*e;return a};N=function De(a){var d,e;De.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&(void 0===e&&(e=a.dts),a.dts=Ga(a.dts,e),a.pts=Ga(a.pts,e),d=a.dts,this.trigger("data",
a))};this.flush=function(){e=d;this.trigger("done")};this.discontinuity=function(){d=e=void 0}};N.prototype=new la;var Z,oa=function(a,d,e){for(var h="";d<e;d++)h+="%"+("00"+a[d].toString(16)).slice(-2);return h},ta=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Na={TXXX:function(a){var d;if(3===a.data[0]){for(d=1;d<a.data.length;d++)if(0===a.data[d]){a.description=decodeURIComponent(oa(a.data,1,d));a.value=decodeURIComponent(oa(a.data,d+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},
WXXX:function(a){var d;if(3===a.data[0])for(d=1;d<a.data.length;d++)if(0===a.data[d]){a.description=decodeURIComponent(oa(a.data,1,d));a.url=decodeURIComponent(oa(a.data,d+1,a.data.length));break}},PRIV:function(a){var d,e;for(d=0;d<a.data.length;d++)if(0===a.data[d]){a.owner=(e=a.data,unescape(oa(e,0,d)));break}a.privateData=a.data.subarray(d+1);a.data=a.privateData}};(Z=function(a){var d=!(!a||!a.debug),e=a&&a.descriptor,h=0,l=[],p=0;if(Z.prototype.init.call(this),this.dispatchType=Ua.METADATA_STREAM_TYPE.toString(16),
e)for(a=0;a<e.length;a++)this.dispatchType+=("00"+e[a].toString(16)).slice(-2);this.push=function(a){var e,r,m;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(p=0,l.length=0),0===l.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))d;else if(l.push(a),p+=a.data.byteLength,1===l.length&&(h=ta(a.data.subarray(6,10)),h+=10),!(p<h)){a={data:new Uint8Array(h),frames:[],pts:l[0].pts,dts:l[0].dts};for(e=0;e<h;)a.data.set(l[0].data.subarray(0,h-e),e),e+=l[0].data.byteLength,
p-=l[0].data.byteLength,l.shift();e=10;64&a.data[5]&&(e+=4,e+=ta(a.data.subarray(10,14)),h-=ta(a.data.subarray(16,20)));do{if(1>(r=ta(a.data.subarray(e+4,e+8))))return;if((m={id:String.fromCharCode(a.data[e],a.data[e+1],a.data[e+2],a.data[e+3]),data:a.data.subarray(e+10,e+r+10)}).key=m.id,Na[m.id]&&(Na[m.id](m),"com.apple.streaming.transportStreamTimestamp"===m.owner)){var u=m.data,w=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;w*=4;w+=3&u[7];m.timeStamp=w;void 0===a.pts&&void 0===a.dts&&(a.pts=
m.timeStamp,a.dts=m.timeStamp);this.trigger("timestamp",m)}a.frames.push(m);e+=10;e+=r}while(e<h);this.trigger("data",a)}}}).prototype=new la;var Ia,ya,Ka;(Ia=function(){var a=new Uint8Array(188),d=0;Ia.prototype.init.call(this);this.push=function(e){var h,l=0,p=188;for(d?((h=new Uint8Array(e.byteLength+d)).set(a.subarray(0,d)),h.set(e,d),d=0):h=e;p<h.byteLength;)71!==h[l]||71!==h[p]?(l++,p++):(this.trigger("data",h.subarray(l,p)),l+=188,p+=188);l<h.byteLength&&(a.set(h.subarray(l),0),d=h.byteLength-
l)};this.flush=function(){188===d&&71===a[0]&&(this.trigger("data",a),d=0);this.trigger("done")}}).prototype=new la;(ya=function(){var a;ya.prototype.init.call(this);(a=this).packetsWaitingForPmt=[];this.programMapTable=void 0;var d=function(a,d){var l=0;d.payloadUnitStartIndicator&&(l+=a[l]+1);"pat"===d.type?e(a.subarray(l),d):h(a.subarray(l),d)};var e=function(d,e){e.section_number=d[7];e.last_section_number=d[8];a.pmtPid=(31&d[10])<<8|d[11];e.pmtPid=a.pmtPid};var h=function(d,e){var h;if(1&d[5]){a.programMapTable=
{video:null,audio:null,"timed-metadata":{}};var l=3+((15&d[1])<<8|d[2])-4;for(h=12+((15&d[10])<<8|d[11]);h<l;){var p=d[h],r=(31&d[h+1])<<8|d[h+2];p===Ua.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=r:p===Ua.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=r:p===Ua.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][r]=p);h+=5+((15&d[h+3])<<8|d[h+4])}e.programMapTable=a.programMapTable}};this.push=function(a){var e={},h=4;if(e.payloadUnitStartIndicator=
!!(64&a[1]),e.pid=31&a[1],e.pid<<=8,e.pid|=a[2],1<(48&a[3])>>>4&&(h+=a[h]+1),0===e.pid)e.type="pat",d(a.subarray(h),e),this.trigger("data",e);else if(e.pid===this.pmtPid)for(e.type="pmt",d(a.subarray(h),e),this.trigger("data",e);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,h,e]):this.processPes_(a,h,e)};this.processPes_=function(a,d,e){e.pid===this.programMapTable.video?e.streamType=
Ua.H264_STREAM_TYPE:e.pid===this.programMapTable.audio?e.streamType=Ua.ADTS_STREAM_TYPE:e.streamType=this.programMapTable["timed-metadata"][e.pid];e.type="pes";e.data=a.subarray(d);this.trigger("data",e)}}).prototype=new la;ya.STREAM_TYPES={h264:27,adts:15};(Ka=function(){var a=this,d={data:[],size:0},e={data:[],size:0},h={data:[],size:0},l=function(d,e,h){var l=new Uint8Array(d.size),p={type:e},r,m=0;if(d.data.length&&!(9>d.size)){p.trackId=d.data[0].pid;for(r=0;r<d.data.length;r++){var u=d.data[r];
l.set(u.data,m);m+=u.data.byteLength}var w;p.packetLength=6+(l[4]<<8|l[5]);p.dataAlignmentIndicator=0!=(4&l[6]);192&(w=l[7])&&(p.pts=(14&l[9])<<27|(255&l[10])<<20|(254&l[11])<<12|(255&l[12])<<5|(254&l[13])>>>3,p.pts*=4,p.pts+=(6&l[13])>>>1,p.dts=p.pts,64&w&&(p.dts=(14&l[14])<<27|(255&l[15])<<20|(254&l[16])<<12|(255&l[17])<<5|(254&l[18])>>>3,p.dts*=4,p.dts+=(6&l[18])>>>1));p.data=l.subarray(9+l[8]);e="video"===e||p.packetLength<=d.size;(h||e)&&(d.size=0,d.data.length=0);e&&a.trigger("data",p)}};Ka.prototype.init.call(this);
this.push=function(p){({pat:function(){},pes:function(){switch(p.streamType){case Ua.H264_STREAM_TYPE:case Ua.H264_STREAM_TYPE:var a=d;var r="video";break;case Ua.ADTS_STREAM_TYPE:a=e;r="audio";break;case Ua.METADATA_STREAM_TYPE:a=h;r="timed-metadata";break;default:return}p.payloadUnitStartIndicator&&l(a,r,!0);a.data.push(p);a.size+=p.data.byteLength},pmt:function(){var d={type:"metadata",tracks:[]},e=p.programMapTable;null!==e.video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,
codec:"avc",type:"video"});null!==e.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"});a.trigger("data",d)}})[p.type]()};this.flush=function(){l(d,"video");l(e,"audio");l(h,"timed-metadata");this.trigger("done")}}).prototype=new la;var Va={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ia,TransportParseStream:ya,ElementaryStream:Ka,TimestampRolloverStream:N,CaptionStream:wa,Cea608Stream:ca,MetadataStream:Z},Ba;for(Ba in Ua)Ua.hasOwnProperty(Ba)&&
(Va[Ba]=Ua[Ba]);var Da,Ta=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];(Da=function(){var a;Da.prototype.init.call(this);this.push=function(d){var e,h,l,p,r,m=0,u=0;if("audio"===d.type)for(a?(h=a,(a=new Uint8Array(h.byteLength+d.data.byteLength)).set(h),a.set(d.data,h.byteLength)):a=d.data;m+5<a.length;)if(255===a[m]&&240==(246&a[m+1])){if(h=2*(1&~a[m+1]),e=(3&a[m+3])<<11|a[m+4]<<3|(224&a[m+5])>>5,r=9E4*(p=1024*(1+(3&a[m+6])))/Ta[(60&a[m+2])>>>2],l=m+e,a.byteLength<l)break;
if(this.trigger("data",{pts:d.pts+u*r,dts:d.dts+u*r,sampleCount:p,audioobjecttype:1+(a[m+2]>>>6&3),channelcount:(1&a[m+2])<<2|(192&a[m+3])>>>6,samplerate:Ta[(60&a[m+2])>>>2],samplingfrequencyindex:(60&a[m+2])>>>2,samplesize:16,data:a.subarray(m+7+h,l)}),a.byteLength===l)return void(a=void 0);u++;a=a.subarray(l)}else m++};this.flush=function(){this.trigger("done")}}).prototype=new la;var Pa,Qa,Ya=function(a){var d=a.byteLength,e=0,h=0;this.length=function(){return 8*d};this.bitsAvailable=function(){return 8*
d+h};this.loadWord=function(){var l=a.byteLength-d,p=new Uint8Array(4),r=Math.min(4,d);if(0===r)throw Error("no bytes available");p.set(a.subarray(l,l+r));e=(new DataView(p.buffer)).getUint32(0);h=8*r;d-=r};this.skipBits=function(a){var l;a<h||(a-=h,a-=8*(l=Math.floor(a/8)),d-=l,this.loadWord());e<<=a;h-=a};this.readBits=function(a){var l=Math.min(h,a),p=e>>>32-l;return 0<(h-=l)?e<<=l:0<d&&this.loadWord(),0<(l=a-l)?p<<l|this.readBits(l):p};this.skipLeadingZeros=function(){var a;for(a=0;a<h;++a)if(0!=
(e&2147483648>>>a))return e<<=a,h-=a,a;return this.loadWord(),a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=
function(){return this.readBits(8)};this.loadWord()};(Qa=function(){var a,d,e=0;Qa.prototype.init.call(this);this.push=function(h){var l;for(d=d?((l=new Uint8Array(d.byteLength+h.data.byteLength)).set(d),l.set(h.data,d.byteLength),l):h.data;e<d.byteLength-3;e++)if(1===d[e+2]){a=e+5;break}for(;a<d.byteLength;)switch(d[a]){case 0:if(0!==d[a-1]){a+=2;break}if(0!==d[a-2]){a++;break}for(e+3!==a-2&&this.trigger("data",d.subarray(e+3,a-2));1!==d[++a]&&a<d.length;);e=a-2;a+=3;break;case 1:if(0!==d[a-1]||
0!==d[a-2]){a+=3;break}this.trigger("data",d.subarray(e+3,a-2));e=a-2;a+=3;break;default:a+=3}d=d.subarray(e);a-=e;e=0};this.flush=function(){d&&3<d.byteLength&&this.trigger("data",d.subarray(e+3));d=null;e=0;this.trigger("done")}}).prototype=new la;var $a={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};(Pa=function(){var a,d,e,h,l=new Qa;Pa.prototype.init.call(this);(a=this).push=function(a){"video"===a.type&&(d=a.trackId,e=a.pts,h=a.dts,l.push(a))};l.on("data",
function(l){var p={trackId:d,pts:e,dts:h,data:l};switch(31&l[0]){case 5:p.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:p.nalUnitType="sei_rbsp";p.escapedRBSP=r(l.subarray(1));break;case 7:p.nalUnitType="seq_parameter_set_rbsp";p.escapedRBSP=r(l.subarray(1));p.config=m(p.escapedRBSP);break;case 8:p.nalUnitType="pic_parameter_set_rbsp";break;case 9:p.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",p)});l.on("done",function(){a.trigger("done")});this.flush=function(){l.flush()};
var p=function(a,d){var e,h=8,l=8;for(e=0;e<a;e++)0!==l&&(l=(h+d.readExpGolomb()+256)%256),h=0===l?h:l};var r=function(a){var d=a.byteLength;for(var e=[],h=1;h<d-2;)0===a[h]&&0===a[h+1]&&3===a[h+2]?(e.push(h+2),h+=2):h++;if(0===e.length)return a;d-=e.length;var l=new Uint8Array(d);var p=0;for(h=0;h<d;p++,h++)p===e[0]&&(p++,e.shift()),l[h]=a[p];return l};var m=function(a){var d,e,h,l,r,m=0,u=0,w=0,t=0,C=1;if(e=(d=new Ya(a)).readUnsignedByte(),h=d.readUnsignedByte(),a=d.readUnsignedByte(),d.skipUnsignedExpGolomb(),
$a[e]&&(3===(l=d.readUnsignedExpGolomb())&&d.skipBits(1),d.skipUnsignedExpGolomb(),d.skipUnsignedExpGolomb(),d.skipBits(1),d.readBoolean())){var q=3!==l?8:12;for(l=0;l<q;l++)d.readBoolean()&&p(6>l?16:64,d)}if(d.skipUnsignedExpGolomb(),0===(l=d.readUnsignedExpGolomb()))d.readUnsignedExpGolomb();else if(1===l)for(d.skipBits(1),d.skipExpGolomb(),d.skipExpGolomb(),q=d.readUnsignedExpGolomb(),l=0;l<q;l++)d.skipExpGolomb();if(d.skipUnsignedExpGolomb(),d.skipBits(1),l=d.readUnsignedExpGolomb(),q=d.readUnsignedExpGolomb(),
0===(r=d.readBits(1))&&d.skipBits(1),d.skipBits(1),d.readBoolean()&&(m=d.readUnsignedExpGolomb(),u=d.readUnsignedExpGolomb(),w=d.readUnsignedExpGolomb(),t=d.readUnsignedExpGolomb()),d.readBoolean()&&d.readBoolean()){switch(d.readUnsignedByte()){case 1:var D=[1,1];break;case 2:D=[12,11];break;case 3:D=[10,11];break;case 4:D=[16,11];break;case 5:D=[40,33];break;case 6:D=[24,11];break;case 7:D=[20,11];break;case 8:D=[32,11];break;case 9:D=[80,33];break;case 10:D=[18,11];break;case 11:D=[15,11];break;
case 12:D=[64,33];break;case 13:D=[160,99];break;case 14:D=[4,3];break;case 15:D=[3,2];break;case 16:D=[2,1];break;case 255:D=[d.readUnsignedByte()<<8|d.readUnsignedByte(),d.readUnsignedByte()<<8|d.readUnsignedByte()]}D&&(C=D[0]/D[1])}return{profileIdc:e,levelIdc:a,profileCompatibility:h,width:Math.ceil((16*(l+1)-2*m-2*u)*C),height:(2-r)*(q+1)*16-2*w-2*t}}}).prototype=new la;var Ra;(Ra=function(){var a=new Uint8Array,d=0;Ra.prototype.init.call(this);this.setTimestamp=function(a){d=a};this.push=function(e){var h,
l=0;for(a.length?(h=a.length,(a=new Uint8Array(e.byteLength+h)).set(a.subarray(0,h)),a.set(e,h)):a=e;3<=a.length-l;)if(73!==a[l]||68!==a[l+1]||51!==a[l+2])if(255!=(255&a[l])||240!=(240&a[l+1]))l++;else{if(7>a.length-l)break;if(l+(e=6144&a[l+3]|a[l+4]<<3|(224&a[l+5])>>5)>a.length)break;h={type:"audio",data:a.subarray(l,l+e),pts:d,dts:d};this.trigger("data",h);l+=e}else{if(10>a.length-l)break;e=a[l+6]<<21|a[l+7]<<14|a[l+8]<<7|a[l+9];if(l+(e=(16&a[l+5])>>4?e+20:e+10)>a.length)break;h={type:"timed-metadata",
data:a.subarray(l,l+e)};this.trigger("data",h);l+=e}a=0<a.length-l?a.subarray(l):new Uint8Array}}).prototype=new la;var Sa,Oa,cb,Ha,Gb=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Hb=["width","height","profileIdc","levelIdc","profileCompatibility"],Xa=function(a,d){var e;if(a.length!==d.length)return!1;for(e=0;e<a.length;e++)if(a[e]!==d[e])return!1;return!0};(Oa=function(a,d){var e=[],h=0,l=0,p=0,r=1/0;d=d||{};Oa.prototype.init.call(this);this.push=function(d){ua(a,
d);a&&Gb.forEach(function(e){a[e]=d[e]});e.push(d)};this.setEarliestDts=function(d){l=d-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){r=a};this.setAudioAppendStart=function(a){p=a};this.flush=function(){var m;if(0!==e.length){var u=qc(e,a,l);a.baseMediaDecodeTime=za(a,d.keepOriginalTimestamps);var w=p,t=r,D,C,q=0;var B=m=0;if(u.length&&(D=va(a.baseMediaDecodeTime,a.samplerate),C=Math.ceil(9E4/(a.samplerate/1024)),w&&t&&(q=D-Math.max(w,t),B=(m=Math.floor(q/C))*
C),!(1>m||45E3<B))){(w=sa[a.samplerate])||(w=u[0].data);for(t=0;t<m;t++)u.splice(t,0,{data:w});a.baseMediaDecodeTime-=Math.floor(xa(B,a.samplerate))}w=[];for(m=0;m<u.length;m++)B=u[m],w.push({size:B.data.byteLength,duration:1024});a.samples=w;m=V.mdat(Ja(u));e=[];u=V.moof(h,[a]);B=new Uint8Array(u.byteLength+m.byteLength);h++;B.set(u);B.set(m,u.byteLength);ka(a);this.trigger("data",{track:a,boxes:B})}this.trigger("done","AudioSegmentStream")}}).prototype=new la;(Sa=function(a,d){var e,h,l=0,p=[],
r=[];d=d||{};Sa.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(d){ua(a,d);"seq_parameter_set_rbsp"!==d.nalUnitType||e||(e=d.config,a.sps=[d.data],Hb.forEach(function(d){a[d]=e[d]},this));"pic_parameter_set_rbsp"!==d.nalUnitType||h||(h=d.data,a.pps=[d.data]);p.push(d)};this.flush=function(){for(var e,h,m;p.length&&"access_unit_delimiter_rbsp"!==p[0].nalUnitType;)p.shift();if(0===p.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=
ma(p),(m=na(e))[0][0].keyFrame||((h=this.getGopForFusion_(p[0],a))?(m.unshift(h),m.byteLength+=h.byteLength,m.nalCount+=h.nalCount,m.pts=h.pts,m.dts=h.dts,m.duration+=h.duration):m=pa(m)),r.length){if(!(e=d.alignGopsAtEnd?this.alignGopsAtEnd_(m):this.alignGopsAtStart_(m)))return this.gopCache_.unshift({gop:m.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ka(a);m=e}ua(a,m);a.samples=qa(m);e=
V.mdat(bb(m));a.baseMediaDecodeTime=za(a,d.keepOriginalTimestamps);this.trigger("processedGopsInfo",m.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:m.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);p=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);m=V.moof(l,[a]);h=new Uint8Array(m.byteLength+e.byteLength);l++;h.set(m);h.set(e,m.byteLength);this.trigger("data",
{track:a,boxes:h});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){ka(a);h=e=void 0};this.getGopForFusion_=function(d){var e,h,l,p,r=1/0;for(p=0;p<this.gopCache_.length;p++){var m=(l=this.gopCache_[p]).gop;a.pps&&Xa(a.pps[0],l.pps[0])&&a.sps&&Xa(a.sps[0],l.sps[0])&&(m.dts<a.timelineStartInfo.dts||-1E4<=(e=d.dts-m.dts-m.duration)&&45E3>=e&&(!h||e<r)&&(h=l,r=e))}return h?h.gop:null};this.alignGopsAtStart_=function(a){var d,e,h,l,p;var m=a.byteLength;var u=
a.nalCount;var w=a.duration;for(d=e=0;d<r.length&&e<a.length&&(h=r[d],l=a[e],h.pts!==l.pts);)l.pts>h.pts?d++:(e++,m-=l.byteLength,u-=l.nalCount,w-=l.duration);return 0===e?a:e===a.length?null:((p=a.slice(e)).byteLength=m,p.duration=w,p.nalCount=u,p.pts=p[0].pts,p.dts=p[0].dts,p)};this.alignGopsAtEnd_=function(a){var d,e,h;var l=r.length-1;var p=a.length-1;var m=null;for(h=!1;0<=l&&0<=p;){if(d=r[l],e=a[p],d.pts===e.pts){h=!0;break}d.pts>e.pts?l--:(l===r.length-1&&(m=p),p--)}if(!h&&null===m)return null;
if(0===(l=h?p:m))return a;a=a.slice(l);l=a.reduce(function(a,d){return a.byteLength+=d.byteLength,a.duration+=d.duration,a.nalCount+=d.nalCount,a},{byteLength:0,duration:0,nalCount:0});return a.byteLength=l.byteLength,a.duration=l.duration,a.nalCount=l.nalCount,a.pts=a[0].pts,a.dts=a[0].dts,a};this.alignGopsWith=function(a){r=a}}).prototype=new la;(Ha=function(a,d){this.numberOfTracks=0;this.metadataStream=d;"undefined"!=typeof(a=a||{}).remux?this.remuxTracks=!!a.remux:this.remuxTracks=!0;"boolean"==
typeof a.keepOriginalTimestamps&&(this.keepOriginalTimestamps=a.keepOriginalTimestamps);this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;Ha.prototype.init.call(this);this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBoxes.push(a.boxes),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=
a.track),void("audio"===a.track.type&&(this.audioTrack=a.track)))}}).prototype=new la;Ha.prototype.flush=function(a){var d,e,h=0,l={captions:[],captionStreams:{},metadata:[],info:{}},p=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}this.videoTrack?(p=this.videoTrack.timelineStartInfo.pts,
Hb.forEach(function(a){l.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(p=this.audioTrack.timelineStartInfo.pts,Gb.forEach(function(a){l.info[a]=this.audioTrack[a]},this));1===this.pendingTracks.length?l.type=this.pendingTracks[0].type:l.type="combined";this.emittedTracks+=this.pendingTracks.length;a=V.initSegment(this.pendingTracks);l.initSegment=new Uint8Array(a.byteLength);l.initSegment.set(a);l.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)l.data.set(this.pendingBoxes[a],
h),h+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)(d=this.pendingCaptions[a]).startTime=d.startPts,this.keepOriginalTimestamps||(d.startTime-=p),d.startTime/=9E4,d.endTime=d.endPts,this.keepOriginalTimestamps||(d.endTime-=p),d.endTime/=9E4,l.captionStreams[d.stream]=!0,l.captions.push(d);for(a=0;a<this.pendingMetadata.length;a++)(e=this.pendingMetadata[a]).cueTime=e.pts,this.keepOriginalTimestamps||(e.cueTime-=p),e.cueTime/=9E4,l.metadata.push(e);l.metadata.dispatchType=
this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",l);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};(cb=function(a){var d,e,h=this,l=!0;cb.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var d={};(this.transmuxPipeline_=
d).type="aac";d.metadataStream=new Va.MetadataStream;d.aacStream=new Ra;d.audioTimestampRolloverStream=new Va.TimestampRolloverStream("audio");d.timedMetadataTimestampRolloverStream=new Va.TimestampRolloverStream("timed-metadata");d.adtsStream=new Da;d.coalesceStream=new Ha(a,d.metadataStream);d.headOfPipeline=d.aacStream;d.aacStream.pipe(d.audioTimestampRolloverStream).pipe(d.adtsStream);d.aacStream.pipe(d.timedMetadataTimestampRolloverStream).pipe(d.metadataStream).pipe(d.coalesceStream);d.metadataStream.on("timestamp",
function(a){d.aacStream.setTimestamp(a.timeStamp)});d.aacStream.on("data",function(l){"timed-metadata"!==l.type||d.audioSegmentStream||(e=e||{timelineStartInfo:{baseMediaDecodeTime:h.baseMediaDecodeTime},codec:"adts",type:"audio"},d.coalesceStream.numberOfTracks++,d.audioSegmentStream=new Oa(e,a),d.adtsStream.pipe(d.audioSegmentStream).pipe(d.coalesceStream))});d.coalesceStream.on("data",this.trigger.bind(this,"data"));d.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=
function(){var l={};(this.transmuxPipeline_=l).type="ts";l.metadataStream=new Va.MetadataStream;l.packetStream=new Va.TransportPacketStream;l.parseStream=new Va.TransportParseStream;l.elementaryStream=new Va.ElementaryStream;l.videoTimestampRolloverStream=new Va.TimestampRolloverStream("video");l.audioTimestampRolloverStream=new Va.TimestampRolloverStream("audio");l.timedMetadataTimestampRolloverStream=new Va.TimestampRolloverStream("timed-metadata");l.adtsStream=new Da;l.h264Stream=new Pa;l.captionStream=
new Va.CaptionStream;l.coalesceStream=new Ha(a,l.metadataStream);l.headOfPipeline=l.packetStream;l.packetStream.pipe(l.parseStream).pipe(l.elementaryStream);l.elementaryStream.pipe(l.videoTimestampRolloverStream).pipe(l.h264Stream);l.elementaryStream.pipe(l.audioTimestampRolloverStream).pipe(l.adtsStream);l.elementaryStream.pipe(l.timedMetadataTimestampRolloverStream).pipe(l.metadataStream).pipe(l.coalesceStream);l.h264Stream.pipe(l.captionStream).pipe(l.coalesceStream);l.elementaryStream.on("data",
function(p){var r;if("metadata"===p.type){for(r=p.tracks.length;r--;)d||"video"!==p.tracks[r].type?e||"audio"!==p.tracks[r].type||((e=p.tracks[r]).timelineStartInfo.baseMediaDecodeTime=h.baseMediaDecodeTime):(d=p.tracks[r]).timelineStartInfo.baseMediaDecodeTime=h.baseMediaDecodeTime;d&&!l.videoSegmentStream&&(l.coalesceStream.numberOfTracks++,l.videoSegmentStream=new Sa(d,a),l.videoSegmentStream.on("timelineStartInfo",function(a){e&&(e.timelineStartInfo=a,l.audioSegmentStream.setEarliestDts(a.dts))}),
l.videoSegmentStream.on("processedGopsInfo",h.trigger.bind(h,"gopInfo")),l.videoSegmentStream.on("baseMediaDecodeTime",function(a){e&&l.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),l.h264Stream.pipe(l.videoSegmentStream).pipe(l.coalesceStream));e&&!l.audioSegmentStream&&(l.coalesceStream.numberOfTracks++,l.audioSegmentStream=new Oa(e,a),l.adtsStream.pipe(l.audioSegmentStream).pipe(l.coalesceStream))}});l.coalesceStream.on("data",this.trigger.bind(this,"data"));l.coalesceStream.on("done",this.trigger.bind(this,
"done"))};this.setBaseMediaDecodeTime=function(h){var l=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=h);e&&(e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,ka(e),a.keepOriginalTimestamps||(e.timelineStartInfo.baseMediaDecodeTime=h),l.audioTimestampRolloverStream&&l.audioTimestampRolloverStream.discontinuity());d&&(l.videoSegmentStream&&(l.videoSegmentStream.gopCache_=[],l.videoTimestampRolloverStream.discontinuity()),d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=
void 0,ka(d),l.captionStream.reset(),a.keepOriginalTimestamps||(d.timelineStartInfo.baseMediaDecodeTime=h));l.timedMetadataTimestampRolloverStream&&l.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){e&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){d&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(l){var d=73===a[0]&&68===a[1]&&
51===a[2];d&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():d||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();l=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){l=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new la;var ab=function(){function a(a,d){for(var e=0;e<d.length;e++){var h=d[e];h.enumerable=h.enumerable||!1;h.configurable=
!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(d,e,h){return e&&a(d.prototype,e),h&&a(d,h),d}}(),Za=function(){function a(d,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.options=e||{};this.self=d;this.init()}return ab(a,[{key:"init",value:function(){var a;this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new cb(this.options);var d=this.self;(a=this.transmuxer).on("data",function(a){var e=a.initSegment;a.initSegment=
{data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength};e=a.data;a.data=e.buffer;d.postMessage({action:"data",segment:a,byteOffset:e.byteOffset,byteLength:e.byteLength},[a.data])});a.captionStream&&a.captionStream.on("data",function(a){d.postMessage({action:"caption",data:a})});a.on("done",function(a){d.postMessage({action:"done"})});a.on("gopInfo",function(a){d.postMessage({action:"gopInfo",gopInfo:a})})}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},
{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]),
a}();new function(a){a.onmessage=function(d){"init"===d.data.action&&d.data.options?this.messageHandlers=new Za(a,d.data.options):(this.messageHandlers||(this.messageHandlers=new Za(a)),d.data&&d.data.action&&"init"!==d.data.action&&this.messageHandlers[d.data.action]&&this.messageHandlers[d.data.action](d.data))}}(d)}()}),Lh={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Mh=function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,e,l){return"avc1."+
("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(l).toString(16)).slice(-2)})})},jc=function(){var a,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d={codecCount:0};return d.codecCount=e.split(",").length,d.codecCount=d.codecCount||2,(a=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e))&&(d.videoCodec=a[2],d.videoObjectTypeIndicator=a[3]),d.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),d.audioProfile=d.audioProfile&&d.audioProfile[2],d},Ee=function(a,e,d){return a+"/"+
e+'; codecs\x3d"'+d.filter(function(a){return!!a}).join(", ")+'"'},Sk=function(a,e){var d,h=e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t",l=(d=e.attributes||{}).CODECS?jc(d.CODECS):Lh,p=e.attributes||{};d=!0;var r=!1;if(!e)return[];if(a.mediaGroups.AUDIO&&p.AUDIO&&(e=a.mediaGroups.AUDIO[p.AUDIO]))for(var m in d=!(r=!0),e)if(!e[m].uri&&!e[m].playlists){d=!0;break}r&&!l.audioProfile&&(d||(l.audioProfile=function(a,d){if(!a.mediaGroups.AUDIO||!d)return null;a=a.mediaGroups.AUDIO[d];if(!a)return null;
for(var e in a)if(d=a[e],d.default&&d.playlists)return jc(d.playlists[0].attributes.CODECS).audioProfile;return null}(a,p.AUDIO)),l.audioProfile||(t.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),l.audioProfile=Lh.audioProfile));var u,q;l.videoCodec&&(u=""+l.videoCodec+l.videoObjectTypeIndicator);l.audioProfile&&(q="mp4a.40."+l.audioProfile);a=Ee("audio",h,[q]);l=Ee("video",h,[u]);h=Ee("video",h,[u,q]);return r?
!d&&u?[l,a]:d||u?[h,a]:[a,a]:u?[h]:[a]},Tk=function(a){function e(a,h){ia(this,e);var d=Ta(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.EventTarget));d.timestampOffset_=0;d.pendingBuffers_=[];d.bufferUpdating_=!1;d.mediaSource_=a;d.codecs_=h;d.audioCodec_=null;d.videoCodec_=null;d.audioDisabled_=!1;d.appendAudioInitSegment_=!0;d.gopBuffer_=[];d.timeMapping_=0;d.safeAppend_=11<=t.browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:d.safeAppend_};return d.codecs_.forEach(function(a){/mp4a\.\d+.\d+/i.test(a)?
d.audioCodec_=a:/avc1\.[\da-f]+/i.test(a)&&(d.videoCodec_=a)}),d.transmuxer_=new Rk,d.transmuxer_.postMessage({action:"init",options:a}),d.transmuxer_.onmessage=function(a){return"data"===a.data.action?d.data_(a):"done"===a.data.action?d.done_(a):"gopInfo"===a.data.action?d.appendGopInfo_(a):void 0},Object.defineProperty(d,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"==typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=
0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}}),Object.defineProperty(d,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}}),Object.defineProperty(d,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||
this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(d,"buffered",{get:function(){return function(a,d,e){var h=null,l=null,p=0,r=[],m=[];if(!a&&!d)return t.createTimeRange();if(!a)return d.buffered;if(!d||e)return a.buffered;if(0===a.buffered.length&&0===d.buffered.length)return t.createTimeRange();a=a.buffered;d=d.buffered;for(e=a.length;e--;)r.push({time:a.start(e),type:"start"}),r.push({time:a.end(e),type:"end"});for(e=d.length;e--;)r.push({time:d.start(e),type:"start"}),r.push({time:d.end(e),
type:"end"});r.sort(function(a,d){return a.time-d.time});for(e=0;e<r.length;e++)"start"===r[e].type?2==++p&&(h=r[e].time):"end"===r[e].type&&1==--p&&(l=r[e].time),null!==h&&null!==l&&(m.push([h,l]),l=h=null);return t.createTimeRanges(m)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),d}return Oa(e,t.EventTarget),Na(e,[{key:"data_",value:function(a){var d=a.data.segment;d.data=new Uint8Array(d.data,a.data.byteOffset,a.data.byteLength);d.initSegment=new Uint8Array(d.initSegment.data,d.initSegment.byteOffset,
d.initSegment.byteLength);a=this.mediaSource_.player_;if(d.captions&&d.captions.length)for(var e in this.inbandTextTracks_||(this.inbandTextTracks_={}),d.captionStreams)if(!this.inbandTextTracks_[e]){a.tech_.trigger({type:"usage",name:"hls-608"});var p=a.textTracks().getTrackById(e);this.inbandTextTracks_[e]=p||a.addRemoteTextTrack({kind:"captions",id:e,label:e},!1).track}d.metadata&&d.metadata.length&&!this.metadataTrack_&&(this.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},
!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=d.metadata.dispatchType);this.pendingBuffers_.push(d)}},{key:"done_",value:function(a){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var a=this,e=["audio","video"];e.forEach(function(d){if(a[d+"Codec_"]&&!a[d+"Buffer_"]){var h=null;a.mediaSource_[d+"Buffer_"]?(h=a.mediaSource_[d+"Buffer_"]).updating=!1:(h=function(a,d){var e=a.addSourceBuffer(d),
h=Object.create(null);h.updating=!1;h.realBuffer_=e;a=function(a){"function"==typeof e[a]?h[a]=function(){return e[a].apply(e,arguments)}:"undefined"==typeof h[a]&&Object.defineProperty(h,a,{get:function(){return e[a]},set:function(d){return e[a]=d}})};for(var l in e)a(l);return h}(a.mediaSource_.nativeMediaSource_,d+'/mp4;codecs\x3d"'+a[d+"Codec_"]+'"'),a.mediaSource_[d+"Buffer_"]=h);a[d+"Buffer_"]=h;["update","updatestart","updateend"].forEach(function(l){h.addEventListener(l,function(){if("audio"!==
d||!a.audioDisabled_)return"updateend"===l&&(a[d+"Buffer_"].updating=!1),e.every(function(e){return!("audio"!==e||!a.audioDisabled_)||d===e||!a[e+"Buffer_"]||!a[e+"Buffer_"].updating})?a.trigger(l):void 0})})}})}},{key:"appendBuffer",value:function(a){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var d=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:d.end(d.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",
gopsToAlignWith:function(a,d,e){if("undefined"==typeof d||null===d||!a.length)return[];d=Math.ceil(9E4*(d-e+3));for(e=0;e<a.length&&!(a[e].pts>d);e++);return a.slice(e)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){var d=this.gopBuffer_;
a=a.data.gopInfo;if(a.length)if(this.safeAppend_)d=a.slice();else{for(var e=a[0].pts,p=0;p<d.length&&!(d[p].pts>=e);p++);d=d.slice(0,p).concat(a)}this.gopBuffer_=d}},{key:"remove",value:function(a,e){if(this.videoBuffer_){this.videoBuffer_.updating=!0;this.videoBuffer_.remove(a,e);var d=this.gopBuffer_;var h=this.timeMapping_,r=Math.ceil(9E4*(a-h)),m=Math.ceil(9E4*(e-h));h=d.slice();for(var u=d.length;u--&&!(d[u].pts<=m););if(-1===u)d=h;else{for(m=u+1;m--&&!(d[m].pts<=r););d=(m=Math.max(m,0),h.splice(m,
u-m+1),h)}this.gopBuffer_=d}if(!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,e)),Eb(a,e,this.metadataTrack_),this.inbandTextTracks_)for(var t in this.inbandTextTracks_)Eb(a,e,this.inbandTextTracks_[t])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,d){var e=d.type,h=d.data,l=d.initSegment;return a[e].segments.push(h),
a[e].bytes+=h.byteLength,a[e].initSegment=l,d.captions&&(a.captions=a.captions.concat(d.captions)),d.info&&(a[e].info=d.info),d.metadata&&(a.metadata=a.metadata.concat(d.metadata)),a},a);this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});
this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var e=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(e=!0);Pk(this,a.captions,a.metadata);!this.audioDisabled_&&
this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;e&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,e){var d=0,h=void 0;if(a.bytes){h=new Uint8Array(a.bytes);a.segments.forEach(function(a){h.set(a,d);d+=a.byteLength});try{e.updating=!0,e.appendBuffer(h)}catch(r){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:r.message,originalError:r})}}}},
{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]),e}(),Fe=function(a){function e(){ia(this,e);var a=Ta(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),h=void 0;for(h in a.nativeMediaSource_=new m.MediaSource,a.nativeMediaSource_)h in e.prototype||"function"!=typeof a.nativeMediaSource_[h]||
(a[h]=a.nativeMediaSource_[h].bind(a.nativeMediaSource_));return a.duration_=NaN,Object.defineProperty(a,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(a){(this.duration_=a)===1/0||(this.nativeMediaSource_.duration=a)}}),Object.defineProperty(a,"seekable",{get:function(){return this.duration_===1/0?t.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(a,"readyState",
{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),a.sourceBuffers=[],a.activeSourceBuffers_=[],a.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var d=a.sourceBuffers[0];return d.appendAudioInitSegment_=!0,d.audioDisabled_=!d.audioCodec_,void a.activeSourceBuffers_.push(d)}var e=!1,h=!0;for(d=0;d<a.player_.audioTracks().length;d++){var m=
a.player_.audioTracks()[d];if(m.enabled&&"main"!==m.kind){h=!(e=!0);break}}a.sourceBuffers.forEach(function(d,l){if(d.appendAudioInitSegment_=!0,d.videoCodec_&&d.audioCodec_)d.audioDisabled_=e;else if(d.videoCodec_&&!d.audioCodec_)d.audioDisabled_=!0,h=!1;else if(!d.videoCodec_&&d.audioCodec_&&(d.audioDisabled_=l?h:!h,d.audioDisabled_))return;a.activeSourceBuffers_.push(d)})},a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})},a.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&
a.transmuxer_.postMessage({action:"resetCaptions"})})},a.onHlsSegmentTimeMapping_=function(d){a.sourceBuffers.forEach(function(a){return a.timeMapping_=d.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},a),a.on("sourceopen",function(d){(d=q.querySelector('[src\x3d"'+a.url_+'"]'))&&(a.player_=t(d.parentNode),a.player_&&(a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",
a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)))}),a.on("sourceended",function(d){d=Ih(a.duration);for(var e=0;e<a.sourceBuffers.length;e++){var h=a.sourceBuffers[e];(h=h.metadataTrack_&&h.metadataTrack_.cues)&&h.length&&
(h[h.length-1].endTime=d)}}),a.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",
this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),a}return Oa(e,t.EventTarget),Na(e,[{key:"addSeekableRange_",value:function(a,e){a=void 0;if(this.duration!==1/0)throw(a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",a.code=11,a;(e>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&
(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(a){var d,e,p=void 0;p=(d={type:"",parameters:{}},e=a.trim().split(";"),d.type=e.shift().trim(),e.forEach(function(a){var e=a.trim().split("\x3d");1<e.length&&(a=e[0].replace(/"/g,"").trim(),e=e[1].replace(/"/g,"").trim(),d.parameters[a]=e)}),d);/^(video|audio)\/mp2t$/i.test(p.type)?(a=[],p.parameters&&p.parameters.codecs&&(a=p.parameters.codecs.split(","),a=(a=Mh(a)).filter(function(a){return/mp4a\.\d+.\d+/i.test(a)||/avc1\.[\da-f]+/i.test(a)})),
0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),p=new Tk(this,a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),p.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):p=this.nativeMediaSource_.addSourceBuffer(a);return this.sourceBuffers.push(p),p}}]),e}(),Nh=0;t.mediaSources={};var Oh=function(a,e){a=t.mediaSources[a];if(!a)throw Error("Media Source not found (Video.js)");a.trigger({type:"sourceopen",swfId:e})},Ge=function(){return!!m.MediaSource&&
!!m.MediaSource.isTypeSupported&&m.MediaSource.isTypeSupported('video/mp4;codecs\x3d"avc1.4d400d,mp4a.40.2"')},kc=function(){if(this.MediaSource={open:Oh,supportsNativeMediaSources:Ge},Ge())return new Fe;throw Error("Cannot use create a virtual MediaSource for this video");};kc.open=Oh;kc.supportsNativeMediaSources=Ge;var Ph={createObjectURL:function(a){var e=void 0;return a instanceof Fe?(e=m.URL.createObjectURL(a.nativeMediaSource_),a.url_=e):a instanceof Fe?(e="blob:vjs-media-source/"+Nh,Nh++,
t.mediaSources[e]=a,e):(e=m.URL.createObjectURL(a),a.url_=e)}};t.MediaSource=kc;t.URL=Ph;var Uk=t.EventTarget,Vk=t.mergeOptions,Qh=function(a,e){var d=Vk(a,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod});for(a=0;a<e.playlists.length;a++){var h=ye(d,e.playlists[a]);h&&(d=h)}return xe(e,function(a,e,h,m){if(a.playlists&&a.playlists.length){var l=a.playlists[0].uri;(a=ye(d,a.playlists[0]))&&((d=a).mediaGroups[e][h][m].playlists[0]=d.playlists[l])}}),d},He=function(a){function e(a,h,
l,p){ia(this,e);var d=Ta(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(d.hls_=h,d.withCredentials=l,!a)throw Error("A non-empty playlist URL or playlist is required");return d.on("minimumUpdatePeriod",function(){d.refreshXml_()}),d.on("mediaupdatetimeout",function(){d.refreshMedia_()}),"string"==typeof a?(d.srcUrl=a,d.state="HAVE_NOTHING",Ta(d)):(d.masterPlaylistLoader_=p,d.state="HAVE_METADATA",d.started=!0,d.media(a),m.setTimeout(function(){d.trigger("loadedmetadata")},0),d)}return Oa(e,
Uk),Na(e,[{key:"dispose",value:function(){this.stopRequest();m.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var d=this.state;if("string"==typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var e=
!this.media_||a.uri!==this.media_.uri;this.state="HAVE_METADATA";e&&(this.media_&&this.trigger("mediachanging"),this.media_=a,this.refreshMedia_(),"HAVE_MASTER"!==d&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest();m.clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(a){var d=this;m.clearTimeout(this.mediaUpdateTimeout);var e=this.media();a?this.mediaUpdateTimeout=m.setTimeout(function(){return d.load()},
e?e.targetDuration/2*1E3:5E3):this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=Fj(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});a.uri=this.srcUrl;for(var e=0;e<a.playlists.length;e++){var l="placeholder-uri-"+e;a.playlists[e].uri=l;a.playlists[l]=a.playlists[e]}return xe(a,function(d,e,h,l){d.playlists&&d.playlists.length&&(e="placeholder-uri-"+e+"-"+h+"-"+l,d.playlists[0].uri=e,a.playlists[e]=d.playlists[0])}),oh(a),
ph(a),a}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(d,e){if(a.request){if(a.request=null,d)return a.error={status:e.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=e.responseText;e.responseHeaders&&e.responseHeaders.date?a.masterLoaded_=Date.parse(e.responseHeaders.date):
a.masterLoaded_=Date.now();a.syncClientServerClock_(a.onClientServerClockSync_.bind(a))}})}},{key:"syncClientServerClock_",value:function(a){var d=this,e=Gj(this.masterXml_);return null===e?(this.clientOffset_=this.masterLoaded_-Date.now(),a()):"DIRECT"===e.method?(this.clientOffset_=e.value-Date.now(),a()):void(this.request=this.hls_.xhr({uri:Sa(this.srcUrl,e.value),method:e.method,withCredentials:this.withCredentials},function(h,l){if(d.request){if(h)return d.clientOffset_=d.masterLoaded_-Date.now(),
a();h="HEAD"===e.method?l.responseHeaders&&l.responseHeaders.date?Date.parse(l.responseHeaders.date):d.masterLoaded_:Date.parse(l.responseText);d.clientOffset_=h-Date.now();a()}}))}},{key:"onClientServerClockSync_",value:function(){var a=this;this.master=this.parseMasterXml();this.state="HAVE_MASTER";this.trigger("loadedplaylist");this.media_||this.media(this.master.playlists[0]);m.setTimeout(function(){a.trigger("loadedmetadata")},0);this.master.minimumUpdatePeriod&&m.setTimeout(function(){a.trigger("minimumUpdatePeriod")},
this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var a=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(d,e){if(a.request){if(a.request=null,d)return a.error={status:e.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=e.responseText;d=a.parseMasterXml();a.master=Qh(a.master,d);m.setTimeout(function(){a.trigger("minimumUpdatePeriod")},
a.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var a=this,e=void 0,l=void 0;l=this.masterPlaylistLoader_?(e=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(e=this.master,this.parseMasterXml());(e=Qh(e,l))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=e:this.master=e,this.media_=e.playlists[this.media_.uri]):this.trigger("playlistunchanged");this.media().endList||(this.mediaUpdateTimeout=m.setTimeout(function(){a.trigger("mediaupdatetimeout")},
qh(this.media(),!!e)));this.trigger("loadedplaylist")}}]),e}(),lc=function(a){return t.log.debug?t.log.debug.bind(t,"VHS:",a+" \x3e"):function(){}},Wk=function(){function a(e,d,h,l){ia(this,a);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=e;this.processedAppend_=!1;this.type_=h;this.mimeType_=d;this.logger_=lc("SourceUpdater["+h+"]["+d+"]");"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,d,l)):this.createSourceBuffer_(d,
l)}return Na(a,[{key:"createSourceBuffer_",value:function(a,d){var e=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(a);this.logger_("created SourceBuffer");d&&(d.trigger("sourcebufferadded"),2>this.mediaSource.sourceBuffers.length)?d.on("sourcebufferadded",function(){e.start_()}):this.start_()}},{key:"start_",value:function(){var a=this;this.started_=!0;this.onUpdateendCallback_=function(){var d=a.pendingCallback_;a.pendingCallback_=null;a.logger_("buffered ["+Be(a.buffered())+"]");d&&d();
a.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(a){var d=this;this.processedAppend_&&this.queueCallback_(function(){d.sourceBuffer_.abort()},a)}},{key:"appendBuffer",value:function(a,d){var e=this;this.processedAppend_=!0;this.queueCallback_(function(){e.sourceBuffer_.appendBuffer(a)},d)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:t.createTimeRanges()}},{key:"remove",
value:function(a,d){var e=this,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Qb;this.processedAppend_&&this.queueCallback_(function(){e.logger_("remove ["+a+" \x3d\x3e "+d+"]");e.sourceBuffer_.remove(a,d)},l)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(a){var d=this;return"undefined"!=typeof a&&(this.queueCallback_(function(){d.sourceBuffer_.timestampOffset=a}),this.timestampOffset_=
a),this.timestampOffset_}},{key:"queueCallback_",value:function(a,d){this.callbacks_.push([a.bind(this),d]);this.runCallback_()}},{key:"runCallback_",value:function(){var a=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(a=this.callbacks_.shift(),this.pendingCallback_=a[1],a[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),a}(),
Fa={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Rh=function(a){var e,d,h={};return a.byterange&&(h.Range=(e=a.byterange,d=e.offset+e.length-1,"bytes\x3d"+e.offset+"-"+d)),h},Sh=function(a){a.forEach(function(a){a.abort()})},Ie=function(a,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:-101,xhr:e}:
e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:-102,xhr:e}:a?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:2,xhr:e}:null},Xk=function(a,e,d){var h=0,l=!1;return function(p,m){if(!l)return p?(l=!0,Sh(a),d(p,m)):(h+=1)===a.length?(m.endOfAllRequests=Date.now(),m.encryptedBytes?(e.addEventListener("message",function sb(a){if(a.data.source===m.requestId)return e.removeEventListener("message",sb),a=a.data.decrypted,m.bytes=new Uint8Array(a.bytes,a.byteOffset,
a.byteLength),d(null,m)}),void e.postMessage(Ah({source:m.requestId,encrypted:m.encryptedBytes,key:m.key.bytes,iv:m.key.iv}),[m.encryptedBytes.buffer,m.key.bytes.buffer])):d(null,m)):void 0}},Yk=function(a,e){return function(d){var h,l;return a.stats=t.mergeOptions(a.stats,(h=d.target,(l={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-h.requestTime||0}).bytesReceived=d.loaded,l.bandwidth=Math.floor(l.bytesReceived/l.roundTripTime*8E3),l)),!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&
(a.stats.firstBytesReceivedAt=Date.now()),e(d,a)}},Zk=function(a,e,d,h,l,p,m){var r=[],u=Xk(r,d,m);l.key&&(d=a(t.mergeOptions(e,{uri:l.key.resolvedUri,responseType:"arraybuffer"}),function(a,d){var e=d.response;if(a=Ie(a,d))return u(a,l);if(16!==e.byteLength)return u({status:d.status,message:"Invalid HLS key at URL: "+d.uri,code:2,xhr:d},l);d=new DataView(e);return l.key.bytes=new Uint32Array([d.getUint32(0),d.getUint32(4),d.getUint32(8),d.getUint32(12)]),u(null,l)}),r.push(d));l.map&&!l.map.bytes&&
(d=a(t.mergeOptions(e,{uri:l.map.resolvedUri,responseType:"arraybuffer",headers:Rh(l.map)}),function(a,d){var e=d.response;return(a=Ie(a,d))?u(a,l):0===e.byteLength?u({status:d.status,message:"Empty HLS segment content at URL: "+d.uri,code:2,xhr:d},l):(l.map.bytes=new Uint8Array(d.response),h.isInitialized()||h.init(),l.map.timescales=Da.timescale(l.map.bytes),l.map.videoTrackIds=Da.videoTrackIds(l.map.bytes),u(null,l))}),r.push(d));a=a(t.mergeOptions(e,{uri:l.resolvedUri,responseType:"arraybuffer",
headers:Rh(l)}),function(a,d){var e=d.response;a=Ie(a,d);var p=void 0;return a?u(a,l):0===e.byteLength?u({status:d.status,message:"Empty HLS segment content at URL: "+d.uri,code:2,xhr:d},l):(l.stats={bandwidth:d.bandwidth,bytesReceived:d.bytesReceived||0,roundTripTime:d.roundTripTime||0},l.key?l.encryptedBytes=new Uint8Array(d.response):l.bytes=new Uint8Array(d.response),l.map&&l.map.bytes&&(h.isInitialized()||h.init(),(p=h.parse(l.bytes,l.map.videoTrackIds,l.map.timescales))&&p.captions&&(l.captionStreams=
p.captionStreams,l.fmp4Captions=p.captions)),u(null,l))});return a.addEventListener("progress",Yk(l,p)),r.push(a),function(){return Sh(r)}},Th=function(a,e){var d;return a&&(d=m.getComputedStyle(a))?d[e]:""},mc=function(a,e){var d=a.slice();a.sort(function(a,l){var h=e(a,l);return 0===h?d.indexOf(a)-d.indexOf(l):h})},Je=function(a,e){var d=void 0,h=void 0;return a.attributes.BANDWIDTH&&(d=a.attributes.BANDWIDTH),d=d||m.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(h=e.attributes.BANDWIDTH),d-(h||m.Number.MAX_VALUE)},
Uh=function(a,e,d){if(!a||!e)return!1;d=d===a.segments.length;return a.endList&&"open"===e.readyState&&d},Ke=function(a){function e(a){ia(this,e);var d=Ta(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!=typeof a.currentTime)throw new TypeError("No currentTime getter specified");if(!a.mediaSource)throw new TypeError("No MediaSource specified");return d.bandwidth=a.bandwidth,d.throughput={rate:0,count:0},d.roundTrip=
NaN,d.resetStats_(),d.mediaIndex=null,d.hasPlayed_=a.hasPlayed,d.currentTime_=a.currentTime,d.seekable_=a.seekable,d.seeking_=a.seeking,d.duration_=a.duration,d.mediaSource_=a.mediaSource,d.hls_=a.hls,d.loaderType_=a.loaderType,d.startingMedia_=void 0,d.segmentMetadataTrack_=a.segmentMetadataTrack,d.goalBufferLength_=a.goalBufferLength,d.sourceType_=a.sourceType,d.inbandTextTracks_=a.inbandTextTracks,d.state_="INIT",d.checkBufferTimeout_=null,d.error_=void 0,d.currentTimeline_=-1,d.pendingSegment_=
null,d.mimeType_=null,d.sourceUpdater_=null,d.xhrOptions_=null,d.activeInitSegmentId_=null,d.initSegments_={},d.captionParser_=new xk,d.decrypter_=a.decrypter,d.syncController_=a.syncController,d.syncPoint_={segmentIndex:0,time:0},d.syncController_.on("syncinfoupdate",function(){return d.trigger("syncinfoupdate")}),d.mediaSource_.addEventListener("sourceopen",function(){return d.ended_=!1}),d.fetchAtBuffer_=!1,d.logger_=lc("SegmentLoader["+d.loaderType_+"]"),Object.defineProperty(d,"state",{get:function(){return this.state_},
set:function(a){a!==this.state_&&(this.logger_(this.state_+" -\x3e "+a),this.state_=a)}}),d}return Oa(e,t.EventTarget),Na(e,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_();this.captionParser_.reset()}},
{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){return"undefined"!=typeof a&&(this.error_=a),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",
value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():t.createTimeRanges()}},{key:"initSegment",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!a)return null;var e=Vc(a),p=this.initSegments_[e];return d&&!p&&a.bytes&&(this.initSegments_[e]=p={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,timescales:a.timescales,videoTrackIds:a.videoTrackIds}),p||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||
this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Wk(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),
this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(a){var e=this.playlist_,p=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=d;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});if(this.logger_("playlist update ["+(e?e.id:null)+" \x3d\x3e "+a.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();e&&e.uri===a.uri?(d=a.mediaSequence-
e.mediaSequence,this.logger_("live window shift ["+d+"]"),null!==this.mediaIndex&&(this.mediaIndex-=d),p&&(p.mediaIndex-=d,0<=p.mediaIndex&&(p.segment=a.segments[p.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(e,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(m.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a,
e){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(a){this.ended_=!1;this.resetLoader();this.remove(0,this.duration_(),a);this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,
e,l){if(this.sourceUpdater_&&this.sourceUpdater_.remove(a,e,l),Eb(a,e,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var d in this.inbandTextTracks_)Eb(a,e,this.inbandTextTracks_[d])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&m.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=m.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&m.clearTimeout(this.checkBufferTimeout_);
this.checkBufferTimeout_=m.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);a&&(Uh(this.playlist_,this.mediaSource_,a.mediaIndex)?this.endOfStream():(a.mediaIndex!==
this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((a.timeline!==this.currentTimeline_||null!==a.startOfSegment&&a.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),a.timestampOffset=a.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(a)))}}},{key:"checkBuffer_",value:function(a,e,l,p,m,w){var d=0,h=void 0;a.length&&(d=a.end(a.length-1));a=Math.max(0,d-m);if(!e.segments.length||a>=this.goalBufferLength_()||
!p&&1<=a)return null;if(null===w)return l=this.getSyncSegmentCandidate_(e),this.generateSegmentInfo_(e,l,null,!0);if(null!==l)return p=e.segments[l],h=p&&p.end?p.end:d,this.generateSegmentInfo_(e,l+1,h,!1);this.fetchAtBuffer_?(d=Ea.getMediaInfoForTime(e,d,w.segmentIndex,w.time),l=d.mediaIndex,h=d.startTime):(d=Ea.getMediaInfoForTime(e,m,w.segmentIndex,w.time),l=d.mediaIndex,h=d.startTime);return this.generateSegmentInfo_(e,l,h,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var d=this;if(-1===
this.currentTimeline_)return 0;var e=a.segments.map(function(a,d){return{timeline:a.timeline,segmentIndex:d}}).filter(function(a){return a.timeline===d.currentTimeline_});return e.length?e[Math.min(e.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,e,l,p){if(0>e||e>=a.segments.length)return null;var d=a.segments[e];return{requestId:"segment-loader-"+Math.random(),uri:d.resolvedUri,mediaIndex:e,isSyncRequest:p,startOfSegment:l,playlist:a,bytes:null,
encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:d.duration,segment:d}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var d=this.currentTime_(),e=a.bandwidth,p=this.pendingSegment_.duration,m=Ea.estimateSegmentRequestTime(p,e,this.playlist_,a.bytesReceived);a=function(a,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
1;return((a.length?a.end(a.length-1):0)-d)/e}(this.buffered_(),d,this.hls_.tech_.playbackRate())-1;if(m<=a)return!1;if(d=function(a){var d=a.currentTime,e=a.bandwidth,h=a.duration,l=a.segmentDuration,p=a.timeUntilRebuffer,m=a.currentTimeline,r=a.syncController;a=a.master.playlists.filter(function(a){return!Ea.isIncompatible(a)});var w=a.filter(Ea.isEnabled);w.length||(w=a.filter(function(a){return!Ea.isDisabled(a)}));a=w.filter(Ea.hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var u=r.getSyncPoint(a,
h,m,d)?1:2;return{playlist:a,rebufferingImpact:Ea.estimateSegmentRequestTime(l,e,a)*u-p}});w=a.filter(function(a){return 0>=a.rebufferingImpact});return mc(w,function(a,d){return Je(d.playlist,a.playlist)}),w.length?w[0]:(mc(a,function(a,d){return a.rebufferingImpact-d.rebufferingImpact}),a[0]||null)}({master:this.hls_.playlists.master,currentTime:d,bandwidth:e,duration:this.duration_(),segmentDuration:p,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_}))return e=
m-a-d.rebufferingImpact,p=.5,a<=ic&&(p=1),!d.playlist||d.playlist.uri===this.playlist_.uri||e<p?!1:(this.bandwidth=d.playlist.attributes.BANDWIDTH*Fa.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}},{key:"handleProgress_",value:function(a,e){this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(e.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=
Zk(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){var d,e,p,m;a=(d=this.seekable_(),e=this.currentTime_(),p=this.playlist_.targetDuration||10,m=d.length&&0<d.start(0)&&d.start(0)<e?d.start(0):e-30,Math.min(m,e-p));0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var d=a.segment,e={resolvedUri:d.resolvedUri,
byterange:d.byterange,requestId:a.requestId};d.key&&(a=d.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),e.key={resolvedUri:d.key.resolvedUri,iv:a});return d.map&&(e.map=this.initSegment(d.map)),e}},{key:"segmentRequestFinished_",value:function(a,e){if(this.mediaRequests+=1,e.stats&&(this.mediaBytesTransferred+=e.stats.bytesReceived,this.mediaTransferDuration+=e.stats.roundTripTime),this.pendingSegment_){if(e.requestId===this.pendingSegment_.requestId){if(a)return this.pendingSegment_=
null,this.state="READY",-102===a.code?void(this.mediaRequestsAborted+=1):(this.pause(),-101===a.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),void this.trigger("error")));this.bandwidth=e.stats.bandwidth;this.roundTrip=e.stats.roundTripTime;e.map&&(e.map=this.initSegment(e.map,!0));this.processSegmentResponse_(e)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var d=
this.pendingSegment_;d.bytes=a.bytes;a.map&&(d.segment.map.bytes=a.map.bytes);d.endOfAllRequests=a.endOfAllRequests;a.fmp4Captions&&(!function(a,d,e){for(var h in e)a[h]||(d.trigger({type:"usage",name:"hls-608"}),e=d.textTracks().getTrackById(h),a[h]=e||d.addRemoteTextTrack({kind:"captions",id:h,label:h},!1).track)}(this.inbandTextTracks_,this.hls_.tech_,a.captionStreams),function(a){var d=a.inbandTextTracks,e=a.captionArray,h=a.timestampOffset;if(e){var l=window.WebKitDataCue||window.VTTCue;e.forEach(function(a){var e=
a.stream,p=a.startTime,m=a.endTime;d[e]&&(p+=h,m+=h,d[e].addCue(new l(p,m,a.text)))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:a.fmp4Captions,timestampOffset:0}),this.captionParser_.clearParsedCaptions());this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var e=this.pendingSegment_,l=e.segment,p=this.syncController_.probeSegmentInfo(e);"undefined"==typeof this.startingMedia_&&p&&(p.containsAudio||p.containsVideo)&&(this.startingMedia_=
{containsAudio:p.containsAudio,containsVideo:p.containsVideo});var m,w;if(p=(m=this.loaderType_,w=this.startingMedia_,"main"===m&&w&&p?p.containsAudio||p.containsVideo?w.containsVideo&&!p.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!w.containsVideo&&p.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null))return this.error({message:p,blacklistDuration:1/0}),void this.trigger("error");if(e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==e.timestampOffset&&e.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(e.timestampOffset),this.trigger("timestampoffset"));var u,t,q,D,B,fa,v,x,y,z;m=this.syncController_.mappingForTimeline(e.timeline);if(null!==
m&&this.trigger({type:"segmenttimemapping",mapping:m}),this.state="APPENDING",l.map){var A=Vc(l.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===A||(m=this.initSegment(l.map),this.sourceUpdater_.appendBuffer(m.bytes,function(){a.activeInitSegmentId_=A}))}e.byteLength=e.bytes.byteLength;"number"==typeof l.start&&"number"==typeof l.end?this.mediaSecondsLoaded+=l.end-l.start:this.mediaSecondsLoaded+=l.duration;this.logger_((u=e.segment,t=u.start,q=u.end,D=e.playlist,B=D.mediaSequence,fa=D.id,
v=D.segments,x=void 0===v?[]:v,y=e.mediaIndex,z=e.timeline,["appending ["+y+"] of ["+B+", "+(B+x.length)+"] from playlist ["+fa+"]","["+t+" \x3d\x3e "+q+"] in timeline ["+z+"]"].join(" ")));this.sourceUpdater_.appendBuffer(e.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var a=this.pendingSegment_,e=a.segment,l=null!==this.mediaIndex;(this.pendingSegment_=
null,this.recordThroughput_(a),this.addSegmentMetadataCue_(a),this.state="READY",this.mediaIndex=a.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=a.timeline,this.trigger("syncinfoupdate"),e.end&&this.currentTime_()-e.end>3*a.playlist.targetDuration)?this.resetEverything():(l&&this.trigger("bandwidthupdate"),this.trigger("progress"),Uh(a.playlist,this.mediaSource_,a.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(a){var d=this.throughput.rate,
e=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/e*8E3)-d)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(a){if(this.segmentMetadataTrack_){var d=a.segment,e=d.start,p=d.end;"number"==typeof e&&isFinite(e)&&"number"==typeof p&&isFinite(p)&&(Eb(e,p,this.segmentMetadataTrack_),a={dateTimeObject:d.dateTimeObject,dateTimeString:d.dateTimeString,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,
byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:e,end:p},e=new (m.WebKitDataCue||m.VTTCue)(e,p,JSON.stringify(a)),e.value=a,this.segmentMetadataTrack_.addCue(e))}}}]),e}(),Vh=new Uint8Array(["\n","\n"].map(function(a){return a.charCodeAt(0)})),$k=function(a){function e(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};ia(this,e);d=Ta(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,d));return d.mediaSource_=null,d.subtitlesTrack_=null,d}
return Oa(e,Ke),Na(e,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return t.createTimeRanges();var a=this.subtitlesTrack_.cues;return t.createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!a)return null;var e=Vc(a),p=this.initSegments_[e];d&&!p&&a.bytes&&(d=new Uint8Array(Vh.byteLength+a.bytes.byteLength),d.set(a.bytes),d.set(Vh,a.bytes.byteLength),
this.initSegments_[e]=p={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:d});return p||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(a){return"undefined"==typeof a||(this.subtitlesTrack_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(a,
e){Eb(a,e,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e=this.skipEmptySegments_(e)){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",
function(){a.state="READY";a.paused()||a.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,l=e.segment;if("function"!=typeof m.WebVTT&&this.subtitlesTrack_&&
this.subtitlesTrack_.tech_){var p=function(){a.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",p),void this.subtitlesTrack_.tech_.one("vttjserror",function(){a.subtitlesTrack_.tech_.off("vttjsloaded",p);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")})}l.requested=!0;try{this.parseVTTCues_(e)}catch(r){return this.error({message:r.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,
this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength;this.mediaSecondsLoaded+=l.duration;e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime);e.cues.forEach(function(d){a.subtitlesTrack_.addCue(d)});this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var d=void 0,e=!1;"function"==typeof m.TextDecoder?
d=new m.TextDecoder("utf8"):(d=m.WebVTT.StringDecoder(),e=!0);d=new m.WebVTT.Parser(m,m.vttjs,d);if(a.cues=[],a.timestampmap={MPEGTS:0,LOCAL:0},d.oncue=a.cues.push.bind(a.cues),d.ontimestampmap=function(d){return a.timestampmap=d},d.onparsingerror=function(a){t.log.warn("Error encountered when parsing cues: "+a.message)},a.segment.map){var p=a.segment.map.bytes;e&&(p=decodeURIComponent(escape(String.fromCharCode.apply(null,p))));d.parse(p)}p=a.bytes;e&&(p=decodeURIComponent(escape(String.fromCharCode.apply(null,
p))));d.parse(p);d.flush()}},{key:"updateTimeMapping_",value:function(a,e,l){var d=a.segment;if(e)if(a.cues.length){var h=a.timestampmap,m=h.MPEGTS/9E4-h.LOCAL+e.mapping;(a.cues.forEach(function(a){a.startTime+=m;a.endTime+=m}),l.syncInfo)||(l.syncInfo={mediaSequence:l.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-d.duration)})}else d.empty=!0}}]),e}(),al=function(a,e){var d;return(d=Ra.isLikelyAacData(a)?function(a){for(var d,e=!1,h=0,m=null,u=null,
t,q=0;3<=a.length-q;){switch(Ra.parseType(a,q)){case "timed-metadata":if(10>a.length-q){e=!0;break}if((t=Ra.parseId3TagSize(a,q))>a.length){e=!0;break}null===u&&(d=a.subarray(q,q+t),u=Ra.parseAacTimestamp(d));q+=t;break;case "audio":if(7>a.length-q){e=!0;break}if((t=Ra.parseAdtsSize(a,q))>a.length){e=!0;break}null===m&&(d=a.subarray(q,q+t),m=Ra.parseSampleRate(d));h++;q+=t;break;default:q++}if(e)return null}if(null===m||null===u)return null;a=9E4/m;return{audio:[{type:"audio",dts:u,pts:u},{type:"audio",
dts:u+1024*h*a,pts:u+1024*h*a}]}}(a):Ak(a))&&(d.audio||d.video)?(function(a,d){if(a.audio&&a.audio.length){var e=d;"undefined"==typeof e&&(e=a.audio[0].dts);a.audio.forEach(function(a){a.dts=fb(a.dts,e);a.pts=fb(a.pts,e);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(a.video&&a.video.length){var h=d;if("undefined"==typeof h&&(h=a.video[0].dts),a.video.forEach(function(a){a.dts=fb(a.dts,h);a.pts=fb(a.pts,h);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4}),a.firstKeyFrame)a=a.firstKeyFrame,a.dts=fb(a.dts,h),
a.pts=fb(a.pts,h),a.dtsTime=a.dts/9E4,a.ptsTime=a.dts/9E4}}(d,e),d):null},Wh=[{name:"VOD",run:function(a,e,d,h,l){return d===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(a,e,d,h,l){if(!a.datetimeToDisplayTime)return null;e=e.segments||[];h=d=null;l=l||0;for(var p=0;p<e.length;p++){var m=e[p];if(m.dateTimeObject){m=m.dateTimeObject.getTime()/1E3+a.datetimeToDisplayTime;var t=Math.abs(l-m);if(null!==h&&h<t)break;h=t;d={time:m,segmentIndex:p}}}return d}},{name:"Segment",run:function(a,
e,d,h,l){a=e.segments||[];d=e=null;l=l||0;for(var p=0;p<a.length;p++){var m=a[p];if(m.timeline===h&&"undefined"!=typeof m.start){var t=Math.abs(l-m.start);if(null!==d&&d<t)break;(!e||null===d||t<=d)&&(d=t,e={time:m.start,segmentIndex:p})}}return e}},{name:"Discontinuity",run:function(a,e,d,h,l){d=null;if(l=l||0,e.discontinuityStarts&&e.discontinuityStarts.length){h=null;for(var p=0;p<e.discontinuityStarts.length;p++){var m=e.discontinuityStarts[p],t=a.discontinuities[e.discontinuitySequence+p+1];
if(t){var u=Math.abs(l-t.time);if(null!==h&&h<u)break;(!d||null===h||u<=h)&&(h=u,d={time:t.time,segmentIndex:m})}}}return d}},{name:"Playlist",run:function(a,e,d,h,l){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence}:null}}],bl=function(a){function e(){ia(this,e);var a=Ta(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.inspectCache_=void 0,a.timelines=[],a.discontinuities=[],a.datetimeToDisplayTime=null,a.logger_=lc("SyncController"),
a}return Oa(e,t.EventTarget),Na(e,[{key:"getSyncPoint",value:function(a,e,l,p){a=this.runStrategies_(a,e,l,p);return a.length?this.selectSyncPoint_(a,{key:"time",value:p}):null}},{key:"getExpiredTime",value:function(a,e){if(!a||!a.segments)return null;e=this.runStrategies_(a,e,a.discontinuitySequence,0);if(!e.length)return null;e=this.selectSyncPoint_(e,{key:"segmentIndex",value:0});return 0<e.segmentIndex&&(e.time*=-1),Math.abs(e.time+hc(a,e.segmentIndex,0))}},{key:"runStrategies_",value:function(a,
e,l,p){for(var d=[],h=0;h<Wh.length;h++){var m=Wh[h],t=m.run(this,a,e,l,p);t&&(t.strategy=m.name,d.push({strategy:m.name,syncPoint:t}))}return d}},{key:"selectSyncPoint_",value:function(a,e){for(var d=a[0].syncPoint,h=Math.abs(a[0].syncPoint[e.key]-e.value),m=a[0].strategy,t=1;t<a.length;t++){var u=Math.abs(a[t].syncPoint[e.key]-e.value);u<h&&(h=u,d=a[t].syncPoint,m=a[t].strategy)}return this.logger_("syncPoint for ["+e.key+": "+e.value+"] chosen with strategy ["+m+"]: [time:"+d.time+", segmentIndex:"+
d.segmentIndex+"]"),d}},{key:"saveExpiredSegmentInfo",value:function(a,e){for(var d=e.mediaSequence-a.mediaSequence-1;0<=d;d--){var h=a.segments[d];if(h&&"undefined"!=typeof h.start){e.syncInfo={mediaSequence:a.mediaSequence+d,time:h.start};this.logger_("playlist refresh sync: [time:"+e.syncInfo.time+", mediaSequence: "+e.syncInfo.mediaSequence+"]");this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject&&
(this.datetimeToDisplayTime=-(a.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var d=a.segment,e=a.playlist,p=void 0;return(p=d.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,p)&&(this.saveDiscontinuitySyncInfo_(a),e.syncInfo||(e.syncInfo={mediaSequence:e.mediaSequence+a.mediaIndex,time:d.start})),p}},{key:"probeMp4Segment_",value:function(a){var d=a.segment,
e=Da.timescale(d.map.bytes);e=Da.startTime(e,a.bytes);return null!==a.timestampOffset&&(a.timestampOffset-=e),{start:e,end:e+d.duration}}},{key:"probeTsSegment_",value:function(a){a=al(a.bytes,this.inspectCache_);var d=void 0,e=void 0;return a?(a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,d=a.video[0].dtsTime,e=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,d=a.audio[0].dtsTime,e=a.audio[1].dtsTime),{start:d,end:e,containsVideo:a.video&&2===a.video.length,
containsAudio:a.audio&&2===a.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,e){var d=a.segment,h=this.timelines[a.timeline];if(null!==a.timestampOffset)h={time:a.startOfSegment,mapping:a.startOfSegment-e.start},this.timelines[a.timeline]=
h,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+a.timeline+": [time: "+h.time+"] [mapping: "+h.mapping+"]"),d.start=a.startOfSegment;else{if(!h)return!1;d.start=e.start+h.mapping}d.end=e.end+h.mapping;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var d=a.playlist,e=a.segment;if(e.discontinuity)this.discontinuities[e.timeline]={time:e.start,accuracy:0};else if(d.discontinuityStarts&&d.discontinuityStarts.length)for(var p=0;p<d.discontinuityStarts.length;p++){var m=
d.discontinuityStarts[p],t=d.discontinuitySequence+p+1,u=m-a.mediaIndex,q=Math.abs(u);if(!this.discontinuities[t]||this.discontinuities[t].accuracy>q)m=0>u?e.start-hc(d,a.mediaIndex,m):e.end+hc(d,a.mediaIndex+1,m),this.discontinuities[t]={time:m,accuracy:q}}}}]),e}(),cl=new mf("./decrypter-worker.worker.js",function(a,e){var d=function(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function");};var h=function(){function a(a,d){for(var e=0;e<d.length;e++){var h=d[e];h.enumerable=
h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(d,e,h){return e&&a(d.prototype,e),h&&a(d,h),d}}();var l=null;var p=function(){function a(e){d(this,a);if(!l){var h=[[[],[],[],[],[]],[[],[],[],[],[]]],p=h[0],m=h[1],r=p[4],u=m[4],t,q,w,B=[],D=[],C=void 0,v=void 0,x=void 0;for(t=0;256>t;t++)D[(B[t]=t<<1^283*(t>>7))^t]=t;for(q=w=0;!r[q];q^=C||1,w=D[w]||1){x=(x=w^w<<1^w<<2^w<<3^w<<4)>>8^255&x^99;var y=16843009*B[v=B[C=B[u[r[q]=x]=q]]]^65537*
v^257*C^16843008*q;var z=257*B[x]^16843008*x;for(t=0;4>t;t++)p[t][q]=z=z<<24^z>>>8,m[t][x]=y=y<<24^y>>>8}for(t=0;5>t;t++)p[t]=p[t].slice(0),m[t]=m[t].slice(0);l=h}this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];h=this._tables[0][4];p=this._tables[1];t=e.length;q=1;if(4!==t&&6!==t&&8!==t)throw Error("Invalid aes key size");r=e.slice(0);u=[];this._key=[r,u];for(e=t;e<4*
t+28;e++)m=r[e-1],(0==e%t||8===t&&4==e%t)&&(m=h[m>>>24]<<24^h[m>>16&255]<<16^h[m>>8&255]<<8^h[255&m],0==e%t&&(m=m<<8^m>>>24^q<<24,q=q<<1^283*(q>>7))),r[e]=r[e-t]^m;for(t=0;e;t++,e--)m=r[3&t?e:e-4],u[t]=4>=e||4>t?m:p[0][h[m>>>24]]^p[1][h[m>>16&255]]^p[2][h[m>>8&255]]^p[3][h[255&m]]}return a.prototype.decrypt=function(a,d,e,h,l,p){var m=this._key[1];a^=m[0];h^=m[1];e^=m[2];d^=m[3];var r=m.length/4-2,t,u=4;var q=this._tables[1];var w=q[0],B=q[1],D=q[2],C=q[3],v=q[4];for(t=0;t<r;t++){q=w[a>>>24]^B[h>>
16&255]^D[e>>8&255]^C[255&d]^m[u];var x=w[h>>>24]^B[e>>16&255]^D[d>>8&255]^C[255&a]^m[u+1];var fa=w[e>>>24]^B[d>>16&255]^D[a>>8&255]^C[255&h]^m[u+2];d=w[d>>>24]^B[a>>16&255]^D[h>>8&255]^C[255&e]^m[u+3];u+=4;a=q;h=x;e=fa}for(t=0;4>t;t++)l[(3&-t)+p]=v[a>>>24]<<24^v[h>>16&255]<<16^v[e>>8&255]<<8^v[255&d]^m[u++],q=a,a=h,h=e,e=d,d=q},a}();var m=function(){function a(){d(this,a);this.listeners={}}return a.prototype.on=function(a,d){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(d)},a.prototype.off=
function(a,d){if(!this.listeners[a])return!1;d=this.listeners[a].indexOf(d);return this.listeners[a].splice(d,1),-1<d},a.prototype.trigger=function(a){var d=this.listeners[a];if(d)if(2===arguments.length)for(var e=d.length,h=0;h<e;++h)d[h].call(this,arguments[1]);else{e=Array.prototype.slice.call(arguments,1);h=d.length;for(var l=0;l<h;++l)d[l].apply(this,e)}},a.prototype.dispose=function(){this.listeners={}},a.prototype.pipe=function(a){this.on("data",function(d){a.push(d)})},a}();var t=function(a){function e(){d(this,
e);var h=a.call(this,m);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!=typeof h&&"function"!=typeof h?this:h;return h.jobs=[],h.delay=1,h.timeout_=null,h}return function(a,d){if("function"!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
d):a.__proto__=d)}(e,a),e.prototype.processJob_=function(){this.jobs.shift()();this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},e.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(m);var u=function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24};var q=function(){function a(e,h,l,p){d(this,a);var m=a.STEP,r=new Int32Array(e.buffer),q=new Uint8Array(e.byteLength);
e=0;this.asyncStream_=new t;this.asyncStream_.push(this.decryptChunk_(r.subarray(e,e+m),h,l,q));for(e=m;e<r.length;e+=m)l=new Uint32Array([u(r[e-4]),u(r[e-3]),u(r[e-2]),u(r[e-1])]),this.asyncStream_.push(this.decryptChunk_(r.subarray(e,e+m),h,l,q));this.asyncStream_.push(function(){p(null,q.subarray(0,q.byteLength-q[q.byteLength-1]))})}return a.prototype.decryptChunk_=function(a,d,e,h){return function(){var l=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),m=new p(Array.prototype.slice.call(d)),
r=new Uint8Array(a.byteLength),t=new Int32Array(r.buffer),q;var w=e[0];var B=e[1];var C=e[2];var v=e[3];for(q=0;q<l.length;q+=4){var x=u(l[q]);var D=u(l[q+1]);var y=u(l[q+2]);var z=u(l[q+3]);m.decrypt(x,D,y,z,t,q);t[q]=u(t[q]^w);t[q+1]=u(t[q+1]^B);t[q+2]=u(t[q+2]^C);t[q+3]=u(t[q+3]^v);w=x;B=D;C=y;v=z}h.set(r,a.byteOffset)}},h(a,null,[{key:"STEP",get:function(){return 32E3}}]),a}();new function(a){a.onmessage=function(d){var e=d.data;d=new Uint8Array(e.encrypted.bytes,e.encrypted.byteOffset,e.encrypted.byteLength);
var h=new Uint32Array(e.key.bytes,e.key.byteOffset,e.key.byteLength/4),l=new Uint32Array(e.iv.bytes,e.iv.byteOffset,e.iv.byteLength/4);new q(d,h,l,function(d,h){var l,m;a.postMessage((l={source:e.source,decrypted:h},m={},Object.keys(l).forEach(function(a){var d=l[a];ArrayBuffer.isView(d)?m[a]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:m[a]=d}),m),[h.buffer])})}}(this)}),Wc=function(a,e){a.abort();a.pause();e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=
null)},Xc={AUDIO:function(a,e){return function(){var d=e.mediaTypes[a],h=e.blacklistCurrentPlaylist;Wc(e.segmentLoaders[a],d);var l=d.activeTrack(),m=d.activeGroup();m=(m.filter(function(a){return a.default})[0]||m[0]).id;m=d.tracks[m];if(l!==m){for(var r in t.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),d.tracks)d.tracks[r].enabled=d.tracks[r]===m;d.onTrackChanged()}else h({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(a,
e){return function(){var d=e.segmentLoaders[a],h=e.mediaTypes[a];t.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");Wc(d,h);(d=h.activeTrack())&&(d.mode="disabled");h.onTrackChanged()}}},Xh={AUDIO:function(a,e,d){if(e){var h=d.tech,l=d.requestOptions,m=d.segmentLoaders[a];e.on("loadedmetadata",function(){var a=e.media();m.playlist(a,l);(!h.paused()||a.endList&&"none"!==h.preload())&&m.load()});e.on("loadedplaylist",function(){m.playlist(e.media(),l);h.paused()||
m.load()});e.on("error",Xc[a](a,d))}},SUBTITLES:function(a,e,d){var h=d.tech,l=d.requestOptions,m=d.segmentLoaders[a],r=d.mediaTypes[a];e.on("loadedmetadata",function(){var a=e.media();m.playlist(a,l);m.track(r.activeTrack());(!h.paused()||a.endList&&"none"!==h.preload())&&m.load()});e.on("loadedplaylist",function(){m.playlist(e.media(),l);h.paused()||m.load()});e.on("error",Xc[a](a,d))}},dl=function(a,e){return function(d){return d.attributes[a]===e}},el=function(a){return function(e){return e.resolvedUri===
a}},fl={AUDIO:function(a,e){var d,h,l=e.hls,m=e.sourceType,r=e.segmentLoaders[a],q=e.requestOptions.withCredentials,u=e.master,B=u.mediaGroups;u=u.playlists;var C=e.mediaTypes[a],v=C.groups;C=C.tracks;var x=e.masterPlaylistLoader,y;for(y in B[a]&&0!==Object.keys(B[a]).length||(B[a]={main:{default:{default:!0}}}),B[a]){v[y]||(v[y]=[]);var z=u.filter(dl(a,y)),A;for(A in B[a][y]){var F=B[a][y][A];z.filter(el(F.resolvedUri)).length&&delete F.resolvedUri;var Y=void 0;if(Y=F.resolvedUri?new Tc(F.resolvedUri,
l,q):F.playlists&&"dash"===m?new He(F.playlists[0],l,q,x):null,F=t.mergeOptions({id:A,playlistLoader:Y},F),Xh[a](a,F.playlistLoader,e),v[y].push(F),"undefined"==typeof C[A])F=new t.AudioTrack({id:A,kind:(d=F,h=void 0,h=d.default?"main":"alternative",d.characteristics&&0<=d.characteristics.indexOf("public.accessibility.describes-video")&&(h="main-desc"),h),enabled:!1,language:F.language,default:F.default,label:A}),C[A]=F}}r.on("error",Xc[a](a,e))},SUBTITLES:function(a,e){var d=e.tech,h=e.hls,l=e.sourceType,
m=e.segmentLoaders[a],r=e.requestOptions.withCredentials,q=e.master.mediaGroups,u=e.mediaTypes[a],B=u.groups;u=u.tracks;var v=e.masterPlaylistLoader,x;for(x in q[a])for(var y in B[x]||(B[x]=[]),q[a][x])if(!q[a][x][y].forced){var z=q[a][x][y],A=void 0;if("hls"===l?A=new Tc(z.resolvedUri,h,r):"dash"===l&&(A=new He(z.playlists[0],h,r,v)),z=t.mergeOptions({id:y,playlistLoader:A},z),Xh[a](a,z.playlistLoader,e),B[x].push(z),"undefined"==typeof u[y])z=d.addRemoteTextTrack({id:y,kind:"subtitles",default:z.default&&
z.autoselect,language:z.language,label:y},!1).track,u[y]=z}m.on("error",Xc[a](a,e))},"CLOSED-CAPTIONS":function(a,e){var d=e.tech,h=e.master.mediaGroups,l=e.mediaTypes[a];e=l.groups;l=l.tracks;for(var m in h[a])for(var r in e[m]||(e[m]=[]),h[a][m]){var q=h[a][m][r];q.instreamId.match(/CC\d/)&&(e[m].push(t.mergeOptions({id:r},q)),"undefined"==typeof l[r])&&(q=d.addRemoteTextTrack({id:q.instreamId,kind:"captions",default:q.default&&q.autoselect,language:q.language,label:r},!1).track,l[r]=q)}}},gl={AUDIO:function(a,
e){return function(){var d=e.mediaTypes[a].tracks,h;for(h in d)if(d[h].enabled)return d[h];return null}},SUBTITLES:function(a,e){return function(){var d=e.mediaTypes[a].tracks,h;for(h in d)if("showing"===d[h].mode)return d[h];return null}}},hl=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(d){fl[d](d,a)});var e=a.mediaTypes,d=a.masterPlaylistLoader,h=a.tech,l=a.hls;["AUDIO","SUBTITLES"].forEach(function(d){e[d].activeGroup=function(e){var h=a.mediaTypes[d].groups,l=a.masterPlaylistLoader.media();
if(!l)return null;var m=null;return l.attributes[d]&&(m=h[l.attributes[d]]),m=m||h.main,"undefined"==typeof e?m:null===e?null:m.filter(function(a){return a.id===e.id})[0]||null};e[d].activeTrack=gl[d](d,a);e[d].onGroupChanged=function(){var e=a.segmentLoaders,h=e[d];e=e.main;var l=a.mediaTypes[d],m=l.activeTrack();m=l.activeGroup(m);var p=l.activePlaylistLoader;Wc(h,l);m&&(m.playlistLoader?(h.resyncLoader(),(l.activePlaylistLoader=m.playlistLoader).load()):p&&e.resetEverything())};e[d].onTrackChanged=
function(){var e=a.segmentLoaders,h=e[d];e=e.main;var l=a.mediaTypes[d],m=l.activeTrack(),p=l.activeGroup(m),r=l.activePlaylistLoader;Wc(h,l);p&&(p.playlistLoader?(r!==p.playlistLoader&&(h.track&&h.track(m),h.resetEverything()),(l.activePlaylistLoader=p.playlistLoader).load()):e.resetEverything())}});var m=e.AUDIO.activeGroup();m=(m.filter(function(a){return a.default})[0]||m[0]).id;e.AUDIO.tracks[m].enabled=!0;e.AUDIO.onTrackChanged();d.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return e[a].onGroupChanged()})});
var r=function(){e.AUDIO.onTrackChanged();h.trigger({type:"usage",name:"hls-audio-change"})},t;for(t in h.audioTracks().addEventListener("change",r),h.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),l.on("dispose",function(){h.audioTracks().removeEventListener("change",r);h.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),h.clearTracks("audio"),e.AUDIO.tracks)h.audioTracks().addTrack(e.AUDIO.tracks[t])},gb=void 0,il="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),
jl=function(a){function e(a){ia(this,e);var d,l=Ta(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),m=a.url,r=a.withCredentials,q=a.tech,u=a.bandwidth,B=a.externHls,v=a.useCueTags,x=a.blacklistDuration,y=a.enableLowInitialPlaylist,z=a.sourceType,A=a.seekTo;if(!m)throw Error("A non-empty playlist URL is required");gb=B;l.withCredentials=r;l.tech_=q;l.hls_=q.hls;l.seekTo_=A;l.sourceType_=z;l.useCueTags_=v;l.blacklistDuration=x;l.enableLowInitialPlaylist=y;l.useCueTags_&&(l.cueTagsTrack_=l.tech_.addTextTrack("metadata",
"ad-cues"),l.cueTagsTrack_.inBandMetadataTrackDispatchType="");l.requestOptions_={withCredentials:l.withCredentials,timeout:null};l.mediaTypes_=(d={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){d[a]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Qb,activeTrack:Qb,onGroupChanged:Qb,onTrackChanged:Qb}}),d);l.mediaSource=new t.MediaSource;l.mediaSource.addEventListener("sourceopen",l.handleSourceOpen_.bind(l));l.seekable_=t.createTimeRanges();l.hasPlayed_=function(){return!1};
l.syncController_=new bl(a);l.segmentMetadataTrack_=q.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;l.decrypter_=new cl;l.inbandTextTracks_={};r={hls:l.hls_,mediaSource:l.mediaSource,currentTime:l.tech_.currentTime.bind(l.tech_),seekable:function(){return l.seekable()},seeking:function(){return l.tech_.seeking()},duration:function(){return l.mediaSource.duration},hasPlayed:function(){return l.hasPlayed_()},goalBufferLength:function(){return l.goalBufferLength()},bandwidth:u,
syncController:l.syncController_,decrypter:l.decrypter_,sourceType:l.sourceType_,inbandTextTracks:l.inbandTextTracks_};return l.masterPlaylistLoader_="dash"===l.sourceType_?new He(m,l.hls_,l.withCredentials):new Tc(m,l.hls_,l.withCredentials),l.setupMasterPlaylistLoaderListeners_(),l.mainSegmentLoader_=new Ke(t.mergeOptions(r,{segmentMetadataTrack:l.segmentMetadataTrack_,loaderType:"main"}),a),l.audioSegmentLoader_=new Ke(t.mergeOptions(r,{loaderType:"audio"}),a),l.subtitleSegmentLoader_=new $k(t.mergeOptions(r,
{loaderType:"vtt"}),a),l.setupSegmentLoaderListeners_(),il.forEach(function(a){l[a+"_"]=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]}.bind(l,a)}),l.logger_=lc("MPC"),l.masterPlaylistLoader_.load(),l}return Oa(e,t.EventTarget),Na(e,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var d=a.masterPlaylistLoader_.media(),e=1500*a.masterPlaylistLoader_.targetDuration;Ae(a.masterPlaylistLoader_.master,
a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=e;d.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(d,a.requestOptions_),a.mainSegmentLoader_.load());hl({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});
a.triggerPresenceUsage_(a.master(),d);try{a.setupSourceBuffers_()}catch(p){return t.log.warn("Failed to create SourceBuffers",p),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();a.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",function(){var d=a.masterPlaylistLoader_.media();if(!d)return a.excludeUnsupportedVariants_(),d=void 0,a.enableLowInitialPlaylist&&(d=a.selectInitialPlaylist()),d||(d=a.selectPlaylist()),a.initialMedia_=d,void a.masterPlaylistLoader_.media(a.initialMedia_);
if(a.useCueTags_&&a.updateAdCues_(d),a.mainSegmentLoader_.playlist(d,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),!d.endList){var e=function(){var d=a.seekable();0!==d.length&&a.mediaSource.addSeekableRange_(d.start(0),d.end(0))};if(a.duration()!==1/0)a.tech_.one("durationchange",function r(){a.duration()===1/0?e():a.tech_.one("durationchange",r)});else e()}});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});
this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var d=a.masterPlaylistLoader_.media(),e=1500*a.masterPlaylistLoader_.targetDuration;Ae(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=e;a.mainSegmentLoader_.playlist(d,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});
this.masterPlaylistLoader_.on("playlistunchanged",function(){var d=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(d)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",
value:function(a,e){a=a.mediaGroups||{};var d=!0,h=Object.keys(a.AUDIO),m;for(m in a.AUDIO)for(var t in a.AUDIO[m])a.AUDIO[m][t].uri||(d=!1);d&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});gb.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"hls-aes"});gb.Playlist.isFmp4(e)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});h.length&&1<Object.keys(a.AUDIO[h[0]]).length&&this.tech_.trigger({type:"usage",
name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var d=a.selectPlaylist(),e=a.masterPlaylistLoader_.media(),m=a.tech_.buffered();m=m.length?m.end(m.length-1)-a.tech_.currentTime():0;var r=a.bufferLowWaterLine();(!e.endList||a.duration()<Fa.MAX_BUFFER_LOW_WATER_LINE||d.attributes.BANDWIDTH<e.attributes.BANDWIDTH||r<=
m)&&a.masterPlaylistLoader_.media(d);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});
this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(d){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:d.mapping})});this.audioSegmentLoader_.on("ended",
function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&
(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var a=this,e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything(function(){t.browser.IE_VERSION||t.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&
this.seekTo_(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<a.start(0)?this.seekTo_(a.end(a.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var a=this,e=this.masterPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_())return!1;if(!e.endList){var l=this.seekable();if(!l.length)return!1;if(t.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay");
a.seekTo_(l.end(0));a.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay");this.seekTo_(l.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(h){return t.log.warn("Failed to create Source Buffers",h),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!=typeof a&&"function"==typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},
{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);a&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var d=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===d)return!1;a=gb.Playlist.playlistEnd(a,
d);d=this.tech_.currentTime();var e=this.tech_.buffered();if(!e.length)return.1>=a-d;e=e.end(e.length-1);return.1>=e-d&&.1>=a-e}},{key:"blacklistCurrentPlaylist",value:function(){var a,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},l=arguments[1],m=void 0;if(m=e.playlist||this.masterPlaylistLoader_.media(),l=l||e.blacklistDuration||this.blacklistDuration,!m){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(w){return this.trigger("error")}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(Uc).length;
return r?(t.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r)):(m.excludeUntil=Date.now()+1E3*l,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),a=this.selectPlaylist(),t.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(a))}},
{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var d=Fh(this.tech_.buffered(),a);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?d&&d.length?a:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),
this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:gb.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},
{key:"onSyncInfoUpdate_",value:function(){var a=void 0,e=void 0;if(this.masterPlaylistLoader_){var l=this.masterPlaylistLoader_.media();if(l){var m=this.syncController_.getExpiredTime(l,this.mediaSource.duration);null===m||0===(a=gb.Playlist.seekable(l,m)).length||this.mediaTypes_.AUDIO.activePlaylistLoader&&((l=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(m=this.syncController_.getExpiredTime(l,this.mediaSource.duration)))||0===(e=gb.Playlist.seekable(l,m)).length)||(e?e.start(0)>
a.end(0)||a.start(0)>e.end(0)?this.seekable_=a:this.seekable_=t.createTimeRanges([[e.start(0)>a.start(0)?e.start(0):a.start(0),e.end(0)<a.end(0)?e.end(0):a.end(0)]]):this.seekable_=a,this.logger_("seekable updated ["+Be(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}},{key:"updateDuration",value:function(){var a=this,e=this.mediaSource.duration,l=gb.Playlist.duration(this.masterPlaylistLoader_.media()),m=this.tech_.buffered(),r=function u(){a.mediaSource.duration=l;a.tech_.trigger("durationchange");
a.mediaSource.removeEventListener("sourceopen",u)};0<m.length&&(l=Math.max(l,m.end(m.length-1)));e!==l&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(d){d=a.mediaTypes_[d].groups;for(var e in d)d[e].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();
this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a,e=this.masterPlaylistLoader_.media();if(e&&"open"===this.mediaSource.readyState){if(1>(a=Sk(this.masterPlaylistLoader_.master,e)).length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");
this.configureLoaderMimeTypes_(a);this.excludeIncompatibleVariants_(e)}}},{key:"configureLoaderMimeTypes_",value:function(a){var d=1<a.length&&-1===a[0].indexOf(",")&&a[0]!==a[1]?new t.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],d);a[1]&&this.audioSegmentLoader_.mimeType(a[1],d)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(a){a.attributes.CODECS&&m.MediaSource&&m.MediaSource.isTypeSupported&&!m.MediaSource.isTypeSupported('video/mp4; codecs\x3d"'+
a.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return Mh([a])[0]})+'"')&&(a.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(a){var d=2,e=null,m=void 0;a.attributes.CODECS&&(m=jc(a.attributes.CODECS),e=m.videoCodec,d=m.codecCount);this.master().playlists.forEach(function(a){var h={codecCount:2,videoCodec:null};a.attributes.CODECS&&(h=jc(a.attributes.CODECS));h.codecCount!==d&&(a.excludeUntil=1/0);h.videoCodec!==e&&(a.excludeUntil=1/0)})}},{key:"updateAdCues_",
value:function(a){var d=0,e=this.seekable();e.length&&(d=e.start(0));(function(a,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(a.segments)for(var h=void 0,l=0;l<a.segments.length;l++){var p=a.segments[l];if(!h){a:{var r=e+p.duration/2;h=d.cues;for(var t=0;t<h.length;t++){var q=h[t];if(r>=q.adStartTime&&r<=q.adEndTime){r=q;break a}}r=null}h=r}if(h){if("cueIn"in p){h.endTime=e;h.adEndTime=e;e+=p.duration;h=null;continue}if(e<h.endTime){e+=p.duration;continue}h.endTime+=p.duration}else if("cueOut"in
p&&((h=new m.VTTCue(e,e+p.duration,p.cueOut)).adStartTime=e,h.adEndTime=e+parseFloat(p.cueOut),d.addCue(h)),"cueOutCont"in p){r=void 0;h=p.cueOutCont.split("/").map(parseFloat);if(!Array.isArray(h))if($jscomp.initSymbol(),$jscomp.initSymbolIterator(),Symbol.iterator in Object(h)){t=[];q=!0;var B=!1,v=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var x=h[Symbol.iterator]();!(q=(r=x.next()).done)&&(t.push(r.value),2!==t.length);q=!0);}catch(uj){B=!0,v=uj}finally{try{!q&&x.return&&
x.return()}finally{if(B)throw v;}}h=t}else throw new TypeError("Invalid attempt to destructure non-iterable instance");r=h[0];t=h[1];(h=new m.VTTCue(e,e+p.duration,"")).adStartTime=e-r;h.adEndTime=h.adStartTime+t;d.addCue(h)}e+=p.duration}})(a,this.cueTagsTrack_,d)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),e=Fa.GOAL_BUFFER_LENGTH;return Math.min(e+a*Fa.GOAL_BUFFER_LENGTH_RATE,Math.max(e,Fa.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",value:function(){var a=
this.tech_.currentTime(),e=Fa.BUFFER_LOW_WATER_LINE;return Math.min(e+a*Fa.BUFFER_LOW_WATER_LINE_RATE,Math.max(e,Fa.MAX_BUFFER_LOW_WATER_LINE))}}]),e}(),kl=function l(e,d,h){ia(this,l);var m,r,t=e.masterPlaylistController_,q=t[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(t);d.attributes.RESOLUTION&&(t=d.attributes.RESOLUTION,this.width=t.width,this.height=t.height);this.bandwidth=d.attributes.BANDWIDTH;this.id=h;this.enabled=(m=e.playlists,r=d.uri,function(d){var e=m.master.playlists[r],
h=ze(e),l=Uc(e);return"undefined"==typeof d?l:(d?delete e.disabled:e.disabled=!0,d===l||h||(q(),d?m.trigger("renditionenabled"):m.trigger("renditiondisabled")),d)})},Yh=["seeking","seeked","pause","playing","error"],ll=function(){function e(d){var h=this;ia(this,e);this.tech_=d.tech;this.seekable=d.seekable;this.seekTo=d.seekTo;this.allowSeeksWithinUnsafeLiveWindow=d.allowSeeksWithinUnsafeLiveWindow;this.media=d.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=
null;this.logger_=lc("PlaybackWatcher");this.logger_("initialize");var l=function(){return h.monitorCurrentTime_()},p=function(){return h.techWaiting_()},r=function(){return h.cancelTimer_()},t=function(){return h.fixesBadSeeks_()};this.tech_.on("seekablechanged",t);this.tech_.on("waiting",p);this.tech_.on(Yh,r);this.tech_.on("canplay",l);this.dispose=function(){h.logger_("dispose");h.tech_.off("seekablechanged",t);h.tech_.off("waiting",p);h.tech_.off(Yh,r);h.tech_.off("canplay",l);h.checkCurrentTimeTimeout_&&
m.clearTimeout(h.checkCurrentTimeTimeout_);h.cancelTimer_()}}return Na(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&m.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=m.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&
!this.tech_.seeking()){var d=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===d&&(!e.length||d+.1>=e.end(e.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&d===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):d===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=d)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));
this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var d=this.seekable(),e=this.tech_.currentTime(),l=void 0;this.afterSeekableWindow_(d,e,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(l=d.end(d.length-1));this.beforeSeekableWindow_(d,e)&&(l=d.start(0)+.1);return"undefined"!=typeof l&&(this.logger_("Trying to seek outside of seekable at time "+e+" with seekable range "+Be(d)+". Seeking to "+l+"."),this.seekTo(l),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var d=
this.tech_.currentTime(),e=this.tech_.buffered();e=Fh(e,d);return e.length&&d+3<=e.end(0)?(this.cancelTimer_(),this.seekTo(d),this.logger_("Stopped at "+d+" while inside a buffered region ["+e.start(0)+" -\x3e "+e.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var d=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||
this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(d,e))return d=d.end(d.length-1),this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+d),this.cancelTimer_(),this.seekTo(d),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;var l=this.tech_.buffered();d=Gh(l,e);return this.videoUnderflow_(d,l,e)?(this.cancelTimer_(),this.seekTo(e),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<d.length?(l=d.start(0)-
e,this.logger_("Stopped at "+e+", setting timer for "+l+", seeking to "+d.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*l,e),!0):!1}},{key:"afterSeekableWindow_",value:function(d,e,l){var h=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(!d.length)return!1;var m=d.end(d.length-1)+.1;return!l.endList&&h&&(m=d.end(d.length-1)+3*l.targetDuration),m<e}},{key:"beforeSeekableWindow_",value:function(d,e){return!!(d.length&&0<d.start(0)&&e<d.start(0)-.1)}},{key:"videoUnderflow_",
value:function(d,e,l){return 0===d.length&&(d=this.gapFromVideoUnderflow_(e,l))?(this.logger_("Encountered a gap in video from "+d.start+" to "+d.end+". Seeking to current time "+l),!0):!1}},{key:"skipTheGap_",value:function(d){var e=this.tech_.buffered(),l=this.tech_.currentTime();e=Gh(e,l);this.cancelTimer_();0!==e.length&&l===d&&(this.logger_("skipTheGap_:","currentTime:",l,"scheduled currentTime:",d,"nextRange start:",e.start(0)),this.seekTo(e.start(0)+ic),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},
{key:"gapFromVideoUnderflow_",value:function(d,e){if(2>d.length)d=t.createTimeRanges();else{for(var h=[],m=1;m<d.length;m++){var r=d.end(m-1),q=d.start(m);h.push([r,q])}d=t.createTimeRanges(h)}for(h=0;h<d.length;h++)if(m=d.start(h),r=d.end(h),4>e-m&&2<e-m)return{start:m,end:r};return null}}]),e}(),ml={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Zh=function(e){!function p(e,l){var h=0,m=0,q=t.mergeOptions(ml,l);e.ready(function(){e.trigger({type:"usage",
name:"hls-error-reload-initialized"})});var B=function(){m&&e.currentTime(m)},v=function(h){null!=h&&(m=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",B),e.src(h),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},x=function(){if(Date.now()-h<1E3*q.errorInterval)e.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(q.getSource&&"function"==typeof q.getSource)return h=Date.now(),q.getSource.call(e,v);t.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},
y=function tj(){e.off("loadedmetadata",B);e.off("error",x);e.off("dispose",tj)};e.on("error",x);e.on("dispose",y);e.reloadSourceOnError=function(h){y();p(e,h)}}(this,e)};t.use("*",function(e){return{setSource:function(d,e){e(null,d)},setCurrentTime:function(d){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(d),d},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.currentTime())}}});var xa={PlaylistLoader:Tc,Playlist:Ea,Decrypter:Dk,
AsyncStream:mh,decrypt:nh,utils:Mk,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,d,h,l,p){e=e.playlists.map(function(d){var e,h;return e=d.attributes.RESOLUTION&&d.attributes.RESOLUTION.width,h=d.attributes.RESOLUTION&&d.attributes.RESOLUTION.height,{bandwidth:d.attributes.BANDWIDTH||m.Number.MAX_VALUE,width:e,height:h,playlist:d}});mc(e,function(d,e){return d.bandwidth-e.bandwidth});var r=(e=e.filter(function(d){return!Ea.isIncompatible(d.playlist)})).filter(function(d){return Ea.isEnabled(d.playlist)});
r.length||(r=e.filter(function(d){return!Ea.isDisabled(d.playlist)}));var t=r.filter(function(e){return e.bandwidth*Fa.BANDWIDTH_VARIANCE<d}),q=t[t.length-1],B=t.filter(function(d){return d.bandwidth===q.bandwidth})[0];if(!1===p)return(e=B||r[0]||e[0])?e.playlist:null;p=t.filter(function(d){return d.width&&d.height});mc(p,function(d,e){return d.width-e.width});t=p.filter(function(d){return d.width===h&&d.height===l});q=t[t.length-1];t=t.filter(function(d){return d.bandwidth===q.bandwidth})[0];var v=
void 0,x=void 0,y=void 0;t||(x=(v=p.filter(function(d){return d.width>h||d.height>l})).filter(function(d){return d.width===v[0].width&&d.height===v[0].height}),q=x[x.length-1],y=x.filter(function(d){return d.bandwidth===q.bandwidth})[0]);return(e=y||t||B||r[0]||e[0])?e.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Th(this.tech_.el(),"width"),10),parseInt(Th(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(Ea.isEnabled);
return mc(e,function(d,e){return Je(d,e)}),e.filter(function(d){return jc(d.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Je,comparePlaylistResolution:function(e,d){var h=void 0,l=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(h=e.attributes.RESOLUTION.width),h=h||m.Number.MAX_VALUE,d.attributes.RESOLUTION&&d.attributes.RESOLUTION.width&&(l=d.attributes.RESOLUTION.width),h===(l=l||m.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&d.attributes.BANDWIDTH?e.attributes.BANDWIDTH-
d.attributes.BANDWIDTH:h-l},xhr:zh()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(e){Object.defineProperty(xa,e,{get:function(){return t.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),Fa[e]},set:function(d){t.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");"number"!=typeof d||0>d?t.log.warn("value of Hls."+
e+" must be greater than or equal to 0"):Fa[e]=d}})});var $h=function(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null},ai=function(e,d){d=d.media();for(var h=-1,l=0;l<e.length;l++)if(e[l].id===d.uri){h=l;break}e.selectedIndex_=h;e.trigger({selectedIndex:h,type:"change"})};xa.canPlaySource=function(){return t.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var nl=function(e){if("dash"===
e.options_.sourceType){var d=t.players[e.tech_.options_.playerId];if(d.eme){var h=e.source_.keySystems;var l=e.playlists.media();e=e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media();if(h){var m={},r;for(r in h)m[r]={audioContentType:'audio/mp4; codecs\x3d"'+e.attributes.CODECS+'"',videoContentType:'video/mp4; codecs\x3d"'+l.attributes.CODECS+'"'},l.contentProtection&&l.contentProtection[r]&&l.contentProtection[r].pssh&&(m[r].pssh=l.contentProtection[r].pssh),"string"==typeof h[r]&&
(m[r].url=h[r]);h=t.mergeOptions(h,m)}h&&(d.currentSource().keySystems=h,d.eme.initializeMediaKeys&&d.eme.initializeMediaKeys())}}},bi=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem("videojs-vhs");if(!e)return null;try{return JSON.parse(e)}catch(d){return null}};xa.supportsNativeHls=function(){var e=q.createElement("video");return t.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(d){return/maybe|probably/i.test(e.canPlayType(d))}):
!1}();xa.supportsNativeDash=!!t.getTech("Html5").isSupported()&&/maybe|probably/i.test(q.createElement("video").canPlayType("application/dash+xml"));xa.supportsTypeNatively=function(e){return"hls"===e?xa.supportsNativeHls:"dash"===e&&xa.supportsNativeDash};xa.isSupported=function(){return t.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ol=t.getComponent("Component"),ci=function(e){function d(e,l,m){ia(this,d);var h=Ta(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,
l,m.hls));l.options_&&l.options_.playerId&&(m=t(l.options_.playerId),m.hasOwnProperty("hls")||Object.defineProperty(m,"hls",{get:function(){return t.log.warn("player.hls is deprecated. Use player.tech().hls instead."),l.trigger({type:"usage",name:"hls-player-access"}),h},configurable:!0}),m.vhs=h,(m.dash=h).player_=m);if(h.tech_=l,h.source_=e,h.stats={},h.setOptions_(),h.options_.overrideNative&&l.overrideNativeAudioTracks&&l.overrideNativeVideoTracks)l.overrideNativeAudioTracks(!0),l.overrideNativeVideoTracks(!0);
else if(h.options_.overrideNative&&(l.featuresNativeVideoTracks||l.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(q,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(d){(d=q.fullscreenElement||q.webkitFullscreenElement||q.mozFullScreenElement||q.msFullscreenElement)&&d.contains(h.tech_.el())&&h.masterPlaylistController_.smoothQualityChange_()}),h.on(h.tech_,"seeking",function(){this.tech_.seeking()&&
0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),h.on(h.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),h.on(h.tech_,"play",h.play),h}return Oa(d,ol),Na(d,[{key:"setOptions_",value:function(){var d=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||
!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var e=
bi();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"}));e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Fa.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Fa.INITIAL_BANDWIDTH;"withCredentials limitRenditionByPlayerDimensions bandwidth smoothQualityChange customTagParsers customTagMappers".split(" ").forEach(function(e){"undefined"!=
typeof d.source_[e]&&(d.options_[e]=d.source_[e])});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(d,e){var h=this;d&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=xa,this.options_.sourceType=$h(e),this.options_.seekTo=function(d){h.tech_.setCurrentTime(d);h.setCurrentTime(d)},this.masterPlaylistController_=new jl(this.options_),this.playbackWatcher_=new ll(t.mergeOptions(this.options_,
{seekable:function(){return h.seekable()},media:function(){return h.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){t.players[h.tech_.options_.playerId].error(h.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):xa.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=xa.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,
this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(d){this.masterPlaylistController_.selectPlaylist=d.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(d){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=d;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=
1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(d){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=d;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var d=1/(this.bandwidth||1),e=void 0;return e=0<this.throughput?1/this.throughput:0,Math.floor(1/(d+e))},set:function(){t.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=
this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return h.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return h.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return h.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return h.masterPlaylistController_.mediaRequestsTimedout_()||
0},enumerable:!0},mediaRequestsErrored:{get:function(){return h.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return h.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return h.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return h.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Hh(h.tech_.buffered())},
enumerable:!0},currentTime:{get:function(){return h.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return h.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return h.tech_.name_},enumerable:!0},duration:{get:function(){return h.tech_.duration()},enumerable:!0},master:{get:function(){return h.playlists.master},enumerable:!0},playerDimensions:{get:function(){return h.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Hh(h.tech_.seekable())},
enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return h.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(h.options_.useBandwidthFromLocalStorage){var d={bandwidth:h.bandwidth,throughput:Math.round(h.throughput)};if(window.localStorage){var e=bi();e=e?t.mergeOptions(e,d):d;try{window.localStorage.setItem("videojs-vhs",
JSON.stringify(e))}catch(u){}}}}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var d=h.playlists;h.representations=function(){return d.master.playlists.filter(function(d){return!ze(d)}).map(function(d,e){return new kl(h,d,d.uri)})};nl(h)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return h.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(t.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},
{key:"setupQualityLevels_",value:function(){var d=this,e=t.players[this.tech_.options_.playerId];e&&e.qualityLevels&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e=d.qualityLevels_;d.representations().forEach(function(d){e.addQualityLevel(d)});ai(e,d.playlists)}),this.playlists.on("mediachange",function(){ai(d.qualityLevels_,d.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",
value:function(d){this.masterPlaylistController_.setCurrentTime(d)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();this.player_&&(delete this.player_.vhs,delete this.player_.dash,
delete this.player_.hls);this.tech_&&this.tech_.hls&&delete this.tech_.hls;(function w(d,e,m){null===d&&(d=Function.prototype);var l=Object.getOwnPropertyDescriptor(d,e);if(void 0===l)return d=Object.getPrototypeOf(d),null===d?void 0:w(d,e,m);if("value"in l)return l.value;e=l.get;return void 0!==e?e.call(m):void 0})(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"dispose",this).call(this)}},{key:"convertToStreamTime",value:function(d,e){return Nk({playlist:this.masterPlaylistController_.media(),
time:d,callback:e})}},{key:"seekToStreamTime",value:function(d,e){var h=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2;return Ok({streamTime:d,playlist:this.masterPlaylistController_.media(),retryCount:l,pauseAfterSeek:h,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:e})}}]),d}(),Le={name:"videojs-http-streaming",VERSION:"1.8.0",canHandleSource:function(e){var d=t.mergeOptions(t.options,1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{});return Le.canPlayType(e.type,d)},handleSource:function(e,d){var h=t.mergeOptions(t.options,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});return d.hls=new ci(e,d,h),d.hls.xhr=zh(),d.hls.src(e.src,e.type),d.hls},canPlayType:function(e){var d=t.mergeOptions(t.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,h=$h(e);return!h||xa.supportsTypeNatively(h)&&!d?"":"maybe"}};return"undefined"!=typeof t.MediaSource&&"undefined"!=
typeof t.URL||(t.MediaSource=kc,t.URL=Ph),kc.supportsNativeMediaSources()&&t.getTech("Html5").registerSourceHandler(Le,0),t.HlsHandler=ci,t.HlsSourceHandler=Le,t.Hls=xa,t.use||t.registerComponent("Hls",xa),t.options.hls=t.options.hls||{},t.registerPlugin?t.registerPlugin("reloadSourceOnError",Zh):t.plugin("reloadSourceOnError",Zh),t});
(function(m,q){if("object"===typeof exports&&"undefined"!==typeof module){var v=require("video.js");module.exports=q(v.default||v)}else"function"===typeof define&&define.amd?define(["videojs"],function(v){return m.Youtube=q(v)}):m.Youtube=q(m.videojs)})(this,function(m){function q(){YT.ready(function(){M.isApiReady=!0;for(var m=0;m<M.apiReadyQueue.length;++m)M.apiReadyQueue[m].initYTPlayer()})}function v(m,q){var B=!1,v=document.createElement("script"),y=document.getElementsByTagName("script")[0];
y&&(y.parentNode.insertBefore(v,y),v.onload=function(){B||(B=!0,q())},v.onreadystatechange=function(){B||"complete"!==this.readyState&&"loaded"!==this.readyState||(B=!0,q())},v.src=m)}function y(){var m=document.head||document.getElementsByTagName("head")[0],q=document.createElement("style");q.type="text/css";q.styleSheet?q.styleSheet.cssText=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }":
q.appendChild(document.createTextNode(".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }"));m.appendChild(q)}function O(){"undefined"!=typeof Optanon||"undefined"!=typeof OptanonActiveGroups?0<OptanonActiveGroups.indexOf(",4")&&(v("https://www.youtube.com/iframe_api",q),y()):(v("https://www.youtube.com/iframe_api",q),
y())}var z=m.browser.IS_IOS||m.browser.IS_NATIVE_ANDROID,S=m.getTech("Tech"),M=m.extend(S,{constructor:function(m,q){S.call(this,m,q);this.setPoster(m.poster);this.setSrc(this.options_.source,!0);this.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-youtube",z&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),M.isApiReady?this.initYTPlayer():M.apiReadyQueue.push(this))}.bind(this))},dispose:function(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&
this.ytPlayer.destroy();else{var m=M.apiReadyQueue.indexOf(this);-1!==m&&M.apiReadyQueue.splice(m,1)}this.ytPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile","");this.el_.parentNode.removeChild(this.el_);S.prototype.dispose.call(this)},createEl:function(){var m=document.createElement("div");m.setAttribute("id",this.options_.techId);m.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");m.setAttribute("class",
"vjs-tech");var q=document.createElement("div");q.appendChild(m);z||this.options_.ytControls||(m=document.createElement("div"),m.setAttribute("class","vjs-iframe-blocker"),m.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),m.onclick=function(){this.pause()}.bind(this),q.appendChild(m));return q},initYTPlayer:function(){var m={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};"undefined"!==typeof this.options_.autohide&&(m.autohide=this.options_.autohide);
"undefined"!==typeof this.options_.cc_load_policy&&(m.cc_load_policy=this.options_.cc_load_policy);"undefined"!==typeof this.options_.ytControls&&(m.controls=this.options_.ytControls);"undefined"!==typeof this.options_.disablekb&&(m.disablekb=this.options_.disablekb);"undefined"!==typeof this.options_.color&&(m.color=this.options_.color);m.controls?"undefined"!==typeof this.options_.fs&&(m.fs=this.options_.fs):m.fs=0;if(-1!==this.options_.source.src.indexOf("end\x3d")){var q=this.options_.source.src.match(/end=([0-9]*)/);
this.options_.end=parseInt(q[1])}"undefined"!==typeof this.options_.end&&(m.end=this.options_.end);"undefined"!==typeof this.options_.hl?m.hl=this.options_.hl:"undefined"!==typeof this.options_.language&&(m.hl=this.options_.language.substr(0,2));"undefined"!==typeof this.options_.iv_load_policy&&(m.iv_load_policy=this.options_.iv_load_policy);"undefined"!==typeof this.options_.list?m.list=this.options_.list:this.url&&"undefined"!==typeof this.url.listId&&(m.list=this.url.listId);"undefined"!==typeof this.options_.listType&&
(m.listType=this.options_.listType);"undefined"!==typeof this.options_.modestbranding&&(m.modestbranding=this.options_.modestbranding);"undefined"!==typeof this.options_.playlist&&(m.playlist=this.options_.playlist);"undefined"!==typeof this.options_.playsinline&&(m.playsinline=this.options_.playsinline);"undefined"!==typeof this.options_.rel&&(m.rel=this.options_.rel);"undefined"!==typeof this.options_.showinfo&&(m.showinfo=this.options_.showinfo);-1!==this.options_.source.src.indexOf("start\x3d")&&
(q=this.options_.source.src.match(/start=([0-9]*)/),this.options_.start=parseInt(q[1]));"undefined"!==typeof this.options_.start&&(m.start=this.options_.start);"undefined"!==typeof this.options_.theme&&(m.theme=this.options_.theme);if("undefined"!==typeof this.options_.customVars){var v=this.options_.customVars;Object.keys(v).forEach(function(q){m[q]=v[q]})}this.activeVideoId=this.url?this.url.videoId:null;this.activeList=m.list;q={videoId:this.activeVideoId,playerVars:m,events:{onReady:this.onPlayerReady.bind(this),
onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};"undefined"!==typeof this.options_.enablePrivacyEnhancedMode&&this.options_.enablePrivacyEnhancedMode&&(q.host="https://www.youtube-nocookie.com");this.ytPlayer=new YT.Player(this.options_.techId,q)},onPlayerReady:function(){this.options_.muted&&
this.ytPlayer.mute();1<this.ytPlayer.getAvailablePlaybackRates().length&&(this.featuresPlaybackRate=!0);this.playerReady_=!0;this.triggerReady();this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(m){m=m.data;if(m!==this.lastState&&!this.errorNumber)switch(this.lastState=m,m){case -1:this.trigger("loadstart");
this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");if(this.isSeeking)this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay");if(this.isSeeking)this.onSeeked();else this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),
this.player_.trigger("waiting")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(m){this.errorNumber=m.data;this.trigger("pause");this.trigger("error")},error:function(){var m=1E3+this.errorNumber;switch(this.errorNumber){case 5:return{code:m,message:"Error while trying to play the video"};case 2:case 100:return{code:m,message:"Unable to find the video"};case 101:case 150:return{code:m,message:"Playback on other Websites has been disabled by the video owner."}}return{code:m,
message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(m){m={videoId:m};this.options_.start&&(m.startSeconds=this.options_.start);this.options_.end&&(m.endSeconds=this.options_.end);this.ytPlayer.loadVideoById(m)},cueVideoById_:function(m){m={videoId:m};this.options_.start&&(m.startSeconds=this.options_.start);this.options_.end&&(m.endSeconds=this.options_.end);this.ytPlayer.cueVideoById(m)},src:function(m){m&&this.setSrc({src:m});return this.source},poster:function(){return z?
null:this.poster_},setPoster:function(m){this.poster_=m},setSrc:function(m){m&&m.src&&(delete this.errorNumber,this.source=m,this.url=M.parseUrl(m.src),!this.options_.poster&&this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!z?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=
this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(m){this.options_.autoplay=m},loop:function(){return this.options_.loop},setLoop:function(m){this.options_.loop=m},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?
this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&this.ytPlayer.pauseVideo()},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(m){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=
this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());this.ytPlayer.seekTo(m,!0);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==m&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),
250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?m.createTimeRange(0,this.ytPlayer.getDuration()):m.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(m){this.ytPlayer&&this.ytPlayer.setPlaybackRate(m)},duration:function(){return this.ytPlayer?
this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(m){this.ytPlayer&&this.ytPlayer.setVolume(100*m)},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():!1},setMuted:function(m){this.ytPlayer&&(this.muted(!0),m?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},
50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return m.createTimeRange();var q=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return m.createTimeRange(0,q)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 3:return 2;default:return 1}},readyState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;
case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},checkHighResPoster:function(){var m="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var q=new Image;q.onload=function(){if("naturalHeight"in q){if(90>=q.naturalHeight||120>=q.naturalWidth)return}else if(90>=q.height||120>=q.width)return;this.poster_=m;this.trigger("posterchange")}.bind(this);
q.onerror=function(){};q.src=m}catch(Wa){}}});M.isSupported=function(){return!0};M.canPlaySource=function(m){return M.canPlayType(m.type)};M.canPlayType=function(m){return"video/youtube"===m};M.parseUrl=function(m){var q={videoId:null},v=m.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/);v&&11===v[2].length&&(q.videoId=v[2]);(v=m.match(/[?&]list=([^#&\?]+)/))&&v[1]&&(q.listId=v[1]);return q};M.apiReadyQueue=[];"undefined"!==typeof document&&(window.addEventListener("consent.onetrust",
function(m){if(-1<Cookies.get("OptanonConsent").indexOf("groups\x3d"))try{var q=window.dataLayer;void 0!==q&&q.forEach(function(m){"trackOptanonEvent"===m.event&&m.optanonAction&&-1<m.optanonAction.indexOf("Accept Cookies")&&O()})}catch(Wa){}}),O());"undefined"!==typeof m.registerTech?m.registerTech("Youtube",M):m.registerComponent("Youtube",M)});
!function(m,q){"undefined"!=typeof window&&window.videojs?q(window.videojs):"function"==typeof define&&define.amd?define("videojs-hotkeys",["video.js"],function(m){return q(m.default||m)}):"undefined"!=typeof module&&module.exports&&(module.exports=q(require("video.js")))}(0,function(m){"undefined"!=typeof window&&(window.videojs_hotkeys={version:"0.2.27"});(m.registerPlugin||m.plugin)("hotkeys",function(q){function v(m){null!=m&&"function"==typeof m.then&&m.then(null,function(m){})}var y=this,O=
y.el(),z=document,S=(q=(m.mergeOptions||m.util.mergeOptions)({volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableHoverScroll:!1,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,captureDocumentHotkeys:!1,documentHotkeysFocusElementFilter:function(){return!1},enableModifiersForNumbers:!0,enableInactiveFocus:!0,skipInitialFocus:!1,playPauseKey:function(m){return 32===m.which||179===m.which},rewindKey:function(m){return 37===m.which||177===m.which},forwardKey:function(m){return 39===
m.which||176===m.which},volumeUpKey:function(m){return 38===m.which},volumeDownKey:function(m){return 40===m.which},muteKey:function(m){return 77===m.which},fullscreenKey:function(m){return 70===m.which},customKeys:{}},q||{})).volumeStep,M=q.seekStep,B=q.enableMute,Y=q.enableVolumeScroll,Wa=q.enableHoverScroll,bb=q.enableFullscreen,cb=q.enableNumbers,Fb=q.enableJogStyle,Ga=q.alwaysCaptureHotkeys,Pa=q.captureDocumentHotkeys,nc=q.documentHotkeysFocusElementFilter,oc=q.enableModifiersForNumbers,J=q.enableInactiveFocus,
Ha=q.skipInitialFocus,pb=m.VERSION;O.hasAttribute("tabIndex")||O.setAttribute("tabIndex","-1");O.style.outline="none";!Ga&&y.autoplay()||Ha||y.one("play",function(){O.focus()});J&&y.on("userinactive",function(){var m=function(){clearTimeout(q)},q=setTimeout(function(){y.off("useractive",m);var q=z.activeElement,v=O.querySelector(".vjs-control-bar");q&&q.parentElement==v&&O.focus()},10);y.one("useractive",m)});y.on("play",function(){var m=O.querySelector(".iframeblocker");m&&""===m.style.display&&
(m.style.display="block",m.style.bottom="39px")});var Ia=function(m){var F,J=m.which,ba=m.preventDefault.bind(m),Y=y.duration();if(y.controls()){var Z=z.activeElement;if(Ga||Pa&&nc(Z)||Z==O||Z==O.querySelector(".vjs-tech")||Z==O.querySelector(".vjs-control-bar")||Z==O.querySelector(".iframeblocker"))switch(q.playPauseKey(m,y)?1:q.rewindKey(m,y)?2:q.forwardKey(m,y)?3:q.volumeUpKey(m,y)?4:q.volumeDownKey(m,y)?5:q.muteKey(m,y)?6:q.fullscreenKey(m,y)?7:void 0){case 1:ba();(Ga||Pa)&&m.stopPropagation();
y.paused()?v(y.play()):y.pause();break;case 2:var ca=!y.paused();ba();ca&&y.pause();0>=(F=y.currentTime()-("function"==typeof M?M(m):M))&&(F=0);y.currentTime(F);ca&&v(y.play());break;case 3:ca=!y.paused();ba();ca&&y.pause();(F=y.currentTime()+("function"==typeof M?M(m):M))>=Y&&(F=ca?Y-.001:Y);y.currentTime(F);ca&&v(y.play());break;case 5:ba();Fb?(F=y.currentTime()-1,1>=y.currentTime()&&(F=0),y.currentTime(F)):y.volume(y.volume()-S);break;case 4:ba();Fb?((F=y.currentTime()+1)>=Y&&(F=Y),y.currentTime(F)):
y.volume(y.volume()+S);break;case 6:B&&y.muted(!y.muted());break;case 7:bb&&(y.isFullscreen()?y.exitFullscreen():y.requestFullscreen());break;default:for(ca in(47<J&&59>J||95<J&&106>J)&&(oc||!(m.metaKey||m.ctrlKey||m.altKey))&&cb&&(F=48,95<J&&(F=96),F=J-F,ba(),y.currentTime(y.duration()*F*.1)),q.customKeys)(F=q.customKeys[ca])&&F.key&&F.handler&&F.key(m)&&(ba(),F.handler(y,q,m))}}},Z=!1;J=O.querySelector(".vjs-volume-menu-button")||O.querySelector(".vjs-volume-panel");null!=J&&(J.onmouseover=function(){Z=
!0},J.onmouseout=function(){Z=!1});J=function(m){var q=Wa?0:z.activeElement;y.controls()&&(Ga||q==O||q==O.querySelector(".vjs-tech")||q==O.querySelector(".iframeblocker")||q==O.querySelector(".vjs-control-bar")||Z)&&Y&&(m=window.event||m,q=Math.max(-1,Math.min(1,m.wheelDelta||-m.detail)),m.preventDefault(),1==q?y.volume(y.volume()+S):-1==q&&y.volume(y.volume()-S))};return y.on("keydown",Ia),y.on("dblclick",function(m){null!=pb&&"7.1.0">=pb&&y.controls()&&(m=m.relatedTarget||m.toElement||z.activeElement,
m!=O&&m!=O.querySelector(".vjs-tech")&&m!=O.querySelector(".iframeblocker")||bb&&(y.isFullscreen()?y.exitFullscreen():y.requestFullscreen()))}),y.on("mousewheel",J),y.on("DOMMouseScroll",J),Pa&&document.addEventListener("keydown",function(m){Ia(m)}),this})});